(self.webpackChunkxform=self.webpackChunkxform||[]).push([[780],{3147:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Gl});var r=n(9784),l=n(6252),o=n(9963);n(1249),n(4916);const i={logicForm:"AXFb4Oig8ZeDiFbhXuYz",logicOperator:"iWE_4uCf4uyQn_tLfdFy",multipleSelect:"sB3AFYNaFORDlWcGrxlt",isOpen:"OtHZDvPvfQXl3I11LAgt",multipleSelectPanel:"KWHt_ndQ5GEsVJUtXQYh",multipleSelectInput:"h1PUhksP8HK12SoDIGes",multipleSelectContent:"WmRtyHt8kqMQHupjVvLp",multipleSelectTags:"xePwQttuwHZK5vdsCR3C",multipleSelectTag:"DVFkYWXKXx2rZjsQFmu4",isSingle:"WNtQTCU1_0FMcrKNFNtQ",multipleSelectCount:"N3qbgu_2jrraEnSTvr4v",isBottom:"eB5UIkUUUezJM4OFekON",isTop:"j7WxDYcNwNmrUp0hYKDC",multipleSelectOptions:"cfOFhC3FekAfcitjEycp",multipleSelectOption:"mwsDV3WFwJJI70BjHpCL",isSelected:"MEYf6umeDEjDlX5WICTO",multipleSelectPlaceholder:"vzAYAKVuocClV63pX2iZ",warnFieldTitle:"cAYZ4kU7Yau6BiGPdWNa"};var a=n(8018),u=(n(9826),n(1539),(0,r.hS)().CLASS);function c(e,t){var n=t.parent.find(e.field);if(null==n)return(0,l.Wm)("div",{class:u.IS_WARNING},[(0,l.Uk)("当前逻辑失效，目标字段被删除或位置发生变化")]);var r=(0,l.Wm)("strong",{class:i.warnFieldTitle},[n.title]);return(0,l.Wm)("div",{class:u.IS_WARNING},[(0,l.Uk)("当前逻辑失效，目标字段"),r,(0,l.Uk)("的位置发生变化")])}var s=r.gN.createFieldLogic({type:"string_value_compare",title:"值",render:function(e,t){var n=t.previousField(e.field);if(null==n)return c(e,t);var r=[a.d.OPERATOR_EQ,a.d.OPERATOR_NE,a.d.OPERATOR_CONTAINS,a.d.OPERATOR_EMPTY].map((function(e){return(0,l.Wm)("option",{value:e.type},[e.title])})),u=(0,l.wy)((0,l.Wm)("select",{class:"form-control form-control-sm ".concat(i.logicOperator),"onUpdate:modelValue":function(t){return e.operator=t}},[r]),[[o.bM,e.operator]]),s=e.operator===a.d.OPERATOR_EMPTY.type?null:(0,l.wy)((0,l.Wm)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":function(t){return e.value=t},placeholder:"目标值"},null),[[o.nr,e.value]]);return(0,l.Wm)("div",{class:i.logicForm},[(0,l.Wm)("span",null,[(0,l.Uk)("如果")]),(0,l.Wm)("strong",null,[n?n.title:"N/A"]),(0,l.Wm)("span",null,[(0,l.Uk)("的值")]),u,s])},test:function(e,t){var n=a.d.get(e.operator);if(null==n)return!0;var r=t.previousField(e.field);return null==r||n.test(r.value,e.value)},validator:function(e){return e.operator==a.d.OPERATOR_EMPTY.type||(!(0,r.xb)(e.value)||"请补全目标值")},onCreated:function(e){null==e.operator&&(e.operator=a.d.OPERATOR_EQ.type)}}),d=r.gN.createFieldLogic({type:"string_length_compare",title:"长度",render:function(e,t){var n=t.previousField(e.field);if(null==n)return c(e,t);var r=[a.d.OPERATOR_EQ,a.d.OPERATOR_NE,a.d.OPERATOR_LT,a.d.OPERATOR_LTE,a.d.OPERATOR_GT,a.d.OPERATOR_GTE].map((function(e){return(0,l.Wm)("option",{value:e.type},[e.title])})),u=(0,l.wy)((0,l.Wm)("select",{class:"form-control form-control-sm ".concat(i.logicOperator),"onUpdate:modelValue":function(t){return e.operator=t}},[r]),[[o.bM,e.operator]]),s=e.operator===a.d.OPERATOR_EMPTY.type?null:(0,l.wy)((0,l.Wm)("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":function(t){return e.value=t},placeholder:"目标值"},null),[[o.nr,e.value]]);return(0,l.Wm)("div",{class:i.logicForm},[(0,l.Wm)("span",null,[(0,l.Uk)("如果")]),(0,l.Wm)("strong",null,[n?n.title:"N/A"]),(0,l.Wm)("span",null,[(0,l.Uk)("的长度")]),u,s])},test:function(e,t){var n=a.d.get(e.operator);if(null==n)return!0;var r=t.previousField(e.field);if(null==r)return!0;var l=r.value;return"string"==typeof l&&n.test(l.length,e.value)},validator:function(e){return!(0,r.xb)(e.value)||"请补全目标值"},onCreated:function(e){null==e.operator&&(e.operator=a.d.OPERATOR_EQ.type)}}),f=(n(8309),r.gN.createFieldLogic({type:"number_value_compare",title:"值",render:function(e,t){var n=t.previous().find((function(t){return t.name==e.field}));if(null==n)return c(e,t);var r=[a.d.OPERATOR_EQ,a.d.OPERATOR_NE,a.d.OPERATOR_LT,a.d.OPERATOR_LTE,a.d.OPERATOR_GT,a.d.OPERATOR_GTE].map((function(e){return(0,l.Wm)("option",{value:e.type},[e.title])})),u=(0,l.wy)((0,l.Wm)("select",{class:"form-control form-control-sm ".concat(i.logicOperator),"onUpdate:modelValue":function(t){return e.operator=t}},[r]),[[o.bM,e.operator]]),s=e.operator===a.d.OPERATOR_EMPTY.type?null:(0,l.wy)((0,l.Wm)("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":function(t){return e.value=t},placeholder:"目标值"},null),[[o.nr,e.value,void 0,{number:!0}]]);return(0,l.Wm)("div",{class:i.logicForm},[(0,l.Wm)("span",null,[(0,l.Uk)("如果")]),(0,l.Wm)("strong",null,[n?n.title:"N/A"]),(0,l.Wm)("span",null,[(0,l.Uk)("的值")]),u,s])},test:function(e,t){var n=a.d.get(e.operator);if(null==n)return!0;var r=t.previousField(e.field);if(null==r)return!0;var l=r.value;return"number"==typeof l&&n.test(l,e.value)},validator:function(e){return!(0,r.xb)(e.value)||"请补全目标值"},onCreated:function(e){null==e.operator&&(e.operator=a.d.OPERATOR_EQ.type)}})),p=r.gN.createFieldLogic({type:"date_value_compare",title:"值",render:function(e,t){var n=t.previousField(e.field);if(null==n)return c(e,t);var r=[a.d.OPERATOR_EQ,a.d.OPERATOR_NE,a.d.OPERATOR_LT,a.d.OPERATOR_LTE,a.d.OPERATOR_GT,a.d.OPERATOR_GTE,a.d.OPERATOR_EMPTY].map((function(e){return(0,l.Wm)("option",{value:e.type},[e.title])})),u=(0,l.wy)((0,l.Wm)("select",{class:"form-control form-control-sm ".concat(i.logicOperator),"onUpdate:modelValue":function(t){return e.operator=t}},[r]),[[o.bM,e.operator]]),s=e.operator===a.d.OPERATOR_EMPTY.type?null:(0,l.wy)((0,l.Wm)("input",{type:"date",class:"form-control form-control-sm","onUpdate:modelValue":function(t){return e.value=t},placeholder:"目标值"},null),[[o.nr,e.value]]);return(0,l.Wm)("div",{class:i.logicForm},[(0,l.Wm)("span",null,[(0,l.Uk)("如果")]),(0,l.Wm)("strong",null,[n?n.title:"N/A"]),(0,l.Wm)("span",null,[(0,l.Uk)("的值")]),u,s])},test:function(e,t){var n=a.d.get(e.operator);if(null==n)return!0;var r=t.previousField(e.field);return null==r||n.test(r.value,e.value)},validator:function(e){return!(0,r.xb)(e.value)||"请补全目标值"},onCreated:function(e){null==e.operator&&(e.operator=a.d.OPERATOR_EQ.type)}}),m=(n(9753),n(2772),n(561),n(7042),n(6699),n(2023),n(4812),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(1038),n(9070),n(2443),n(3680),n(3706),n(2703),n(8011),n(489),n(9554),n(4747),n(8304),n(5069),n(2262));function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */b=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},l=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var l=t&&t.prototype instanceof d?t:d,o=Object.create(l.prototype),i=new P(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(l,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===l)throw o;return k()}for(n.method=l,n.arg=o;;){var i=n.delegate;if(i){var a=w(i,n);if(a){if(a===s)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var s={};function d(){}function f(){}function p(){}var m={};a(m,l,(function(){return this}));var y=Object.getPrototypeOf,h=y&&y(y(W([])));h&&h!==t&&n.call(h,l)&&(m=h);var g=p.prototype=d.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(l,o,i,a){var u=c(e[l],e,o);if("throw"!==u.type){var s=u.arg,d=s.value;return d&&"object"==v(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,a)}),(function(e){r("throw",e,i,a)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,a)}))}a(u.arg)}var l;this._invoke=function(e,n){function o(){return new t((function(t,l){r(e,n,t,l)}))}return l=l?l.then(o,o):o()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var l=r.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function W(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,a(g,"constructor",p),a(p,"constructor",f),f.displayName=a(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(O.prototype),a(O.prototype,o,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,l,o){void 0===o&&(o=Promise);var i=new O(u(t,n,r,l),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),a(g,i,"Generator"),a(g,l,(function(){return this})),a(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=W,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var l=this.tryEntries.length-1;l>=0;--l){var o=this.tryEntries[l],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r];if(l.tryLoc<=this.prev&&n.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var o=l;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var l=r.arg;E(n)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:W(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t,n,r,l,o,i){try{var a=e[o](i),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,l)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var o=e.apply(t,n);function i(e){O(o,r,l,i,a,"next",e)}function a(e){O(o,r,l,i,a,"throw",e)}i(void 0)}))}}var x=(0,r.hS)(),E=x.CLASS,P=x.SELECTOR,W=(0,l.aZ)({name:"multiple-select",props:{options:{required:!0,type:Array},modelValue:{default:null,type:Array}},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,r=(0,m.iH)(null),o=(0,m.iH)(null),a=(0,m.iH)(!1),u=(0,m.iH)(1),c=(0,l.Fl)((function(){return!Array.isArray(e.modelValue)||0==e.modelValue.length}));function s(t,r){r.stopPropagation();var l=Array.isArray(e.modelValue)?e.modelValue:[],o=l.indexOf(t.value);o>=0?l.splice(o,1):l.push(t.value),n("update:modelValue",l)}function d(e){if(null==r.value)return 1;var t=r.value,n=t.closest(P.IS_SCROLL);if(null==n)return 1;var l=t.getBoundingClientRect(),o=n.getBoundingClientRect();return e.getBoundingClientRect().bottom+l.height>o.bottom?-1:1}function f(e){return p.apply(this,arguments)}function p(){return(p=w(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.value=!a.value,a.value){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,l.Y3)();case 5:u.value=d(t.target);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){var t=e.target;t instanceof Element&&null!=o.value&&(o.value.contains(t)||(a.value=!1))}function g(t){t.stopPropagation();var r=e.modelValue;r.splice(0,1),n("update:modelValue",r)}return document.addEventListener("click",v,!0),(0,l.Jd)((function(){document.removeEventListener("click",v,!0)})),function(){var t,n=e.options.map((function(t){var n,r,o=(y(n={},i.multipleSelectOption,!0),y(n,i.isSelected,e.modelValue&&e.modelValue.includes(t.value)),n);return(0,l.Wm)("div",{class:o,onClick:s.bind(null,t)},[null!==(r=t.label)&&void 0!==r?r:t.value])})),d=(y(t={},i.multipleSelect,!0),y(t,i.isOpen,a.value),y(t,i.isBottom,1===u.value),y(t,i.isTop,-1===u.value),t),p=c.value?(0,l.Wm)("div",{class:i.multipleSelectPlaceholder},[(0,l.Uk)("请选择目标值")]):function(){var t=e.modelValue;if(1==t.length)return(0,l.Wm)("div",{class:i.multipleSelectContent},[(0,l.Wm)("div",{class:i.multipleSelectTags},[(0,l.Wm)("div",{class:[i.multipleSelectTag,i.isSingle]},[t[0]])])]);var n=h(t),r=n[0],o=n.slice(1);return(0,l.Wm)("div",{class:i.multipleSelectContent},[(0,l.Wm)("div",{class:i.multipleSelectTags},[(0,l.Wm)("div",{class:i.multipleSelectTag},[(0,l.Wm)("span",{class:i.multipleSelectTagContent},[r]),(0,l.Wm)("button",{type:"button",class:"btn-close shadow-none",onClick:g},null)])]),(0,l.Wm)("div",{class:i.multipleSelectCount},[(0,l.Uk)("+"),o.length])])}();return(0,l.Wm)("div",{class:d,ref:o},[(0,l.Wm)("div",{class:i.multipleSelectInput,onClick:f},[p]),(0,l.Wm)("div",{class:i.multipleSelectPanel,ref:r},[(0,l.Wm)("div",{class:[i.multipleSelectOptions,E.IS_SCROLL]},[n])])])}}});function k(e,t){if(e.operator==a.d.OPERATOR_EMPTY.type)return null;if(e.operator==a.d.OPERATOR_CONTAINS.type)return(0,l.wy)((0,l.Wm)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":function(t){return e.value=t},placeholder:"目标值"},null),[[o.nr,e.value]]);if(!Array.isArray(t.options))return null;if(e.operator==a.d.OPERATOR_OPTION_EQ.type||e.operator==a.d.OPERATOR_OPTION_NE.type||e.operator==a.d.OPERATOR_OPTION_CONTAINS.type)return(0,l.Wm)(W,{options:t.options,modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t}},null);var n=t.options.map((function(e){var t;return(0,l.Wm)("option",{value:e.value},[null!==(t=e.label)&&void 0!==t?t:e.value])}));return(0,l.wy)((0,l.Wm)("select",{class:"form-control form-control-sm","onUpdate:modelValue":function(t){return e.value=t}},[(0,l.Wm)("option",{value:null,disabled:!0},[(0,l.Uk)("-- 请选择目标值 --")]),n]),[[o.bM,e.value]])}function T(e,t){if(!(t instanceof r.Wi)||null==e.value)return!1;var n=t.previous().find((function(t){return t.name==e.field}));if(null==n)return!1;var l=n.options;if(!Array.isArray(l)||0==l.length)return!1;var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=g(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}(Array.isArray(e.value)?e.value:[e.value]);try{var a=function(){var e=o.value;if(null==l.find((function(t){return t.value===e})))return{v:!1}};for(i.s();!(o=i.n()).done;){var u=a();if("object"===v(u))return u.v}}catch(e){i.e(e)}finally{i.f()}return!0}var S=r.gN.createFieldLogic({type:"option_value_compare",title:"值",render:function(e,t){var n=t.previousField(e.field);if(null==n)return c(e,t);var r=[a.d.OPERATOR_EQ,a.d.OPERATOR_NE,a.d.OPERATOR_CONTAINS,a.d.OPERATOR_EMPTY].map((function(e){return(0,l.Wm)("option",{value:e.type},[e.title])})),u=(0,l.wy)((0,l.Wm)("select",{class:"form-control form-control-sm ".concat(i.logicOperator),"onUpdate:modelValue":function(t){return e.operator=t}},[r]),[[o.bM,e.operator]]),s=k(e,n);return(0,l.Wm)("div",{class:i.logicForm},[(0,l.Wm)("span",null,[(0,l.Uk)("如果")]),(0,l.Wm)("strong",null,[n.title]),(0,l.Wm)("span",null,[(0,l.Uk)("的值")]),u,s])},test:function(e,t){var n=a.d.get(e.operator);if(null==n)return!0;var r=t.previousField(e.field);return null==r||n.test(r.value,e.value)},validator:function(e,t){return e.operator==a.d.OPERATOR_EMPTY.type||(e.operator==a.d.OPERATOR_CONTAINS.type?!(0,r.xb)(e.value)||"请输入目标值":!((0,r.xb)(e.value)||!T(e,t))||"请选择目标值")},onCreated:function(e,t){null==e.operator&&(e.operator=a.d.OPERATOR_EQ.type),e.operator==a.d.OPERATOR_CONTAINS.type||T(e,t)||(e.value=null)}}),R=r.gN.createFieldLogic({type:"multiple_option_value_compare",title:"值",render:function(e,t){var n=t.previousField(e.field);if(null==n)return c(e,t);var r=[a.d.OPERATOR_OPTION_EQ,a.d.OPERATOR_OPTION_NE,a.d.OPERATOR_OPTION_CONTAINS,a.d.OPERATOR_EMPTY].map((function(e){return(0,l.Wm)("option",{value:e.type},[e.title])})),u=(0,l.wy)((0,l.Wm)("select",{class:"form-control form-control-sm ".concat(i.logicOperator),"onUpdate:modelValue":function(t){return e.operator=t}},[r]),[[o.bM,e.operator]]),s=k(e,n);return(0,l.Wm)("div",{class:i.logicForm},[(0,l.Wm)("span",null,[(0,l.Uk)("如果")]),(0,l.Wm)("strong",null,[n.title]),(0,l.Wm)("span",null,[(0,l.Uk)("的值")]),u,s])},test:function(e,t){var n=a.d.get(e.operator);if(null==n)return!0;var r=t.previousField(e.field);return null==r||n.test(r.value,e.value)},onCreated:function(e,t){null==e.operator&&(e.operator=a.d.OPERATOR_OPTION_EQ.type),T(e,t)||(e.value=null)}});const A={use:function(){(0,r.ZN)(s),(0,r.ZN)(d),(0,r.ZN)(f),(0,r.ZN)(p),(0,r.ZN)(S),(0,r.ZN)(R)},remove:function(){(0,r.I5)(s),(0,r.I5)(d),(0,r.I5)(f),(0,r.I5)(p),(0,r.I5)(S),(0,r.I5)(R)}};var C=n(3161),V=["id","name","placeholder","disabled"];n(4678),n(7327);var D=n(1207),I=(0,r.hS)().EVENTS;function U(e){return"_value"in e?e._value:e.value}function j(e){var t=e.checked,n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}function N(e){return null==U(e)?e.checked:e.value}function L(e){var t=e.selectedIndex;return t<0?null:U(e.options[t])}function F(e,t,n,r){var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"build",n=e.value,r=e.type;if("number"==r){var l=parseFloat(n);return isNaN(l)?n:l}if("select"==r)return L(e);if("checkbox"==r){var o='input[type="checkbox"][name="'.concat(e.name,'"]'),i=Array.from(document.querySelectorAll(o));return"setting"===t&&1==i.length?j(i[0]):i.filter((function(e){return e.checked})).map(N)}return e.value}(t.target,"setting");e(I.UPDATE_FIELD,{prop:n,value:l,scope:r})}const Z=(0,l.aZ)({name:"xform-bs-text",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(){return{value:(0,D.Hg)()}}});var M=n(3744);const q=(0,M.Z)(Z,[["render",function(e,t,n,r,i,a){return(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.value=t}),id:e.field.uid,name:e.field.name,type:"text",class:"form-control form-control-sm",placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled},null,8,V)),[[o.nr,e.value]])}]]);var Y={class:"xform-bs-field-setting-prop"},H=(0,l._)("header",null,"默认值：",-1);var B=n(3577),G={class:"xform-bs-field-setting-head"},Q={class:"xform-bs-field-setting-prop"},K=(0,l._)("header",null,"标题：",-1),z={key:0,class:"xform-bs-field-setting-prop"},X=(0,l._)("header",null,"提示：",-1),$={key:1,class:"xform-bs-field-setting-prop"},J=(0,l._)("header",null,"属性：",-1),ee={key:0,class:"form-check form-check-inline"},te=["id","name"],ne=["for"],re={class:"form-check form-check-inline"},le=["id","name"],oe=["for"],ie={class:"form-check form-check-inline"},ae=["id","name"],ue=["for"];var ce={class:"xform-bs-field-setting-prop"},se=(0,l._)("span",null,"逻辑：",-1);var de=n(9622),fe=["id"],pe={class:"modal-content"},me={class:"modal-header"},ve={key:0,class:"modal-title"},be={class:"modal-body"},ye={class:"modal-footer"},he={key:0,class:"modal-footer-left"};var ge=1e4;function _e(){var e=null,t="xbs-modal__".concat(ge++);function n(t){if(null!=e){var n=e._element;n.addEventListener("hidden.bs.modal",(function e(){n.removeEventListener("hidden.bs.modal",e),"function"==typeof t&&t()})),e.hide()}}return{id:t,show:function(){var n;n=document.getElementById(t),(e=null==n?null:new window.bootstrap.Modal(n,{backdrop:"static",keyboard:!1}))&&e.show()},hide:n,destroy:function(){var t=function(){e.dispose(),e=null};if(null!=e)return e._isShown?n(t):void t()}}}const Oe=(0,l.aZ)({name:"modal",inheritAttrs:!1,props:{title:{type:String,default:null},visible:{type:Boolean,default:!1},width:{type:String,default:"640px"}},emits:["update:visible","confirm","closed"],setup:function(e,t){var n=t.emit,r=(0,m.iH)(!1),o=_e();function i(){n("update:visible",!1)}return(0,l.YP)((function(){return e.visible}),(function(){e.visible?(r.value=!0,(0,l.Y3)((function(){return o.show()}))):o.hide((function(){r.value=!1,n("closed")}))})),(0,l.Jd)((function(){o.destroy(),i()})),{id:o.id,close:i,confirm:function(){n("confirm")},rendered:r}}}),we=(0,M.Z)(Oe,[["render",function(e,t,n,r,o,i){return(0,l.wg)(),(0,l.j4)(l.lR,{to:"body"},[e.rendered?((0,l.wg)(),(0,l.iD)("div",(0,l.dG)({key:0,class:"modal fade xform-bs-modal",id:e.id},e.$attrs),[(0,l._)("div",{class:"modal-dialog modal-dialog-centered",style:(0,B.j5)({width:e.width})},[(0,l._)("div",pe,[(0,l._)("div",me,[(0,l.WI)(e.$slots,"header",{},(function(){return[e.title?((0,l.wg)(),(0,l.iD)("h5",ve,(0,B.zw)(e.title),1)):(0,l.kq)("",!0)]})),(0,l._)("button",{type:"button",class:"btn-close shadow-none",onClick:t[0]||(t[0]=function(){return e.close&&e.close.apply(e,arguments)})})]),(0,l._)("div",be,[(0,l.WI)(e.$slots,"default")]),(0,l._)("div",ye,[e.$slots["footer-left"]?((0,l.wg)(),(0,l.iD)("div",he,[(0,l.WI)(e.$slots,"footer-left")])):(0,l.kq)("",!0),(0,l._)("button",{type:"button",class:"btn btn-sm btn-link btn-text",onClick:t[1]||(t[1]=function(){return e.close&&e.close.apply(e,arguments)})},"关闭"),(0,l._)("button",{type:"button",class:"btn btn-sm btn-primary",onClick:t[2]||(t[2]=function(){return e.confirm&&e.confirm.apply(e,arguments)})},"保存")])])],4)],16,fe)):(0,l.kq)("",!0)])}]]),xe=(0,l.aZ)({name:"field-logic",props:{field:{type:r.Wi,required:!0}},setup:function(e){var t=(0,r.j9)(),n=(0,m.iH)(null),o=(0,m.iH)(!1),i=(0,l.Fl)({get:function(){return e.field.logic},set:function(n){t.updateField(e.field,{prop:"logic",value:n})}});return{editor:n,logic:i,visible:o,save:function(){var e=n.value;if(null!=e){var t=e.submit();t.valid&&(i.value=t.data,o.value=!1)}},showModal:function(){o.value=!0}}},components:{LogicEditor:de.h,Modal:we}}),Ee={classes:{modal:"MyFDKdyFHQgakOSw6YhR",logicBtn:"VMGeYtrSlpdGbmEa3zR4",tip:"o5agcyLGhHZQzloobthZ"}},Pe=(0,M.Z)(xe,[["render",function(e,t,n,r,o,i){var a=(0,l.up)("LogicEditor"),u=(0,l.up)("Modal");return(0,l.wg)(),(0,l.iD)("section",ce,[(0,l._)("header",null,[se,(0,l._)("button",{type:"button",class:(0,B.C_)(["btn btn-link btn-text",e.classes.logicBtn]),onClick:t[0]||(t[0]=function(){return e.showModal&&e.showModal.apply(e,arguments)})},"配置",2)]),(0,l._)("div",{class:(0,B.C_)(e.classes.tip)},"配置字段逻辑后，如果依赖的字段能够满足指定的条件，就会显示该字段，否则会隐藏该字段。",2),(0,l.Wm)(u,{title:"配置逻辑",class:(0,B.C_)(e.classes.modal),width:"840px",visible:e.visible,"onUpdate:visible":t[1]||(t[1]=function(t){return e.visible=t}),onConfirm:e.save},{default:(0,l.w5)((function(){return[(0,l.Wm)(a,{field:e.field,ref:"editor"},null,8,["field"])]})),_:1},8,["class","visible","onConfirm"])])}],["__cssModules",Ee]]),We=(0,l.aZ)({name:"field-setting",props:{field:{type:r.Wi,required:!0},placeholder:{type:Boolean,default:!0},required:{type:Boolean,default:!0},logic:{type:Boolean,default:!0},attributes:{type:Boolean,default:!0}},setup:function(e){return{fieldRef:(0,m.Vh)(e,"field"),allowLogic:(0,l.Fl)((function(){return!0===(0,r.iE)().logic}))}},components:{FieldLogic:Pe}}),ke=(0,M.Z)(We,[["render",function(e,t,n,r,i,a){var u=(0,l.up)("FieldLogic");return(0,l.wg)(),(0,l.iD)("div",{class:(0,B.C_)("xform-bs-field-setting xform-bs-".concat(e.fieldRef.type,"-setting"))},[(0,l._)("h3",G,(0,B.zw)(e.field.conf.title),1),(0,l._)("section",Q,[K,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control form-control-sm",placeholder:"[必填] 请输入标题...","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.fieldRef.title=t})},null,512),[[o.nr,e.fieldRef.title]]),(0,l.WI)(e.$slots,"title")]),e.placeholder?((0,l.wg)(),(0,l.iD)("section",z,[X,(0,l.wy)((0,l._)("textarea",{class:"form-control form-control-sm",placeholder:"[可选] 请输入提示信息...",rows:"3","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.fieldRef.placeholder=t})},null,512),[[o.nr,e.fieldRef.placeholder]])])):(0,l.kq)("",!0),e.attributes?((0,l.wg)(),(0,l.iD)("section",$,[J,e.required?((0,l.wg)(),(0,l.iD)("div",ee,[(0,l.wy)((0,l._)("input",{id:"".concat(e.field.name,"-required"),name:"".concat(e.field.name,"-required"),type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.fieldRef.required=t})},null,8,te),[[o.e8,e.fieldRef.required]]),(0,l._)("label",{class:"form-check-label",for:"".concat(e.field.name,"-required"),title:"勾选则该字段在表单提交时必须填写"},"必填",8,ne)])):(0,l.kq)("",!0),(0,l._)("div",re,[(0,l.wy)((0,l._)("input",{id:"".concat(e.field.name,"-disabled"),name:"".concat(e.field.name,"-disabled"),type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.fieldRef.disabled=t})},null,8,le),[[o.e8,e.fieldRef.disabled]]),(0,l._)("label",{class:"form-check-label",for:"".concat(e.field.name,"-disabled"),title:"勾选则该字段在表单中无法编辑, 也不参与表单验证"},"禁用",8,oe)]),(0,l._)("div",ie,[(0,l.wy)((0,l._)("input",{id:"".concat(e.field.name,"-hidden"),name:"".concat(e.field.name,"-hidden"),type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.fieldRef.hidden=t})},null,8,ae),[[o.e8,e.fieldRef.hidden]]),(0,l._)("label",{class:"form-check-label",for:"".concat(e.field.name,"-hidden"),title:"勾选则该字段将不会再表单中显示"},"隐藏",8,ue)]),(0,l.WI)(e.$slots,"attributes")])):(0,l.kq)("",!0),(0,l.WI)(e.$slots,"default"),e.allowLogic?((0,l.wg)(),(0,l.j4)(u,{key:2,field:e.fieldRef,"onUpdate:field":t[5]||(t[5]=function(t){return e.fieldRef=t})},null,8,["field"])):(0,l.kq)("",!0)],2)}]]);var Te=(0,r.hS)().EVENTS;const Se=(0,l.aZ)({name:"xform-bs-text-setting",props:{field:r.Wi},emits:[Te.UPDATE_FIELD],setup:function(){return{compatValue:(0,D.Xu)([]).useCompatValue()}},components:(Re={},Ae=ke.name,Ce=ke,Ae in Re?Object.defineProperty(Re,Ae,{value:Ce,enumerable:!0,configurable:!0,writable:!0}):Re[Ae]=Ce,Re)});var Re,Ae,Ce;const Ve=(0,M.Z)(Se,[["render",function(e,t,n,r,i,a){var u=(0,l.up)("field-setting");return(0,l.wg)(),(0,l.j4)(u,{field:e.field},{default:(0,l.w5)((function(){return[(0,l._)("section",Y,[H,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.compatValue=t}),placeholder:"[可选] 如果字段没有填写，默认为设定的值"},null,512),[[o.nr,e.compatValue]])])]})),_:1},8,["field"])}]]),De=r.gN.create({icon:C.Z,type:"text",title:"单行文本",setting:Ve,build:q,validator:function(e,t){return e.required&&(0,r.xb)(t)?Promise.reject("必填"):Promise.resolve()},logic:[s,d]});var Ie=n(3923),Ue=["id","name","placeholder","disabled"];const je=(0,l.aZ)({name:"xform-bs-textarea",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(){return{value:(0,D.Hg)()}}}),Ne=(0,M.Z)(je,[["render",function(e,t,n,r,i,a){return(0,l.wy)(((0,l.wg)(),(0,l.iD)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.value=t}),id:e.field.uid,rows:"3",name:e.field.name,class:"form-control form-control-sm",placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled},null,8,Ue)),[[o.nr,e.value]])}]]);var Le={class:"xform-bs-field-setting-prop"},Fe=(0,l._)("header",null,"默认值：",-1);var Ze=(0,r.hS)().EVENTS;const Me=(0,l.aZ)({name:"xform-bs-textarea-setting",props:{field:r.Wi},emits:[Ze.UPDATE_FIELD],setup:function(){return{compatValue:(0,D.Xu)([]).useCompatValue()}},components:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},ke.name,ke)}),qe=(0,M.Z)(Me,[["render",function(e,t,n,r,i,a){var u=(0,l.up)("field-setting");return(0,l.wg)(),(0,l.j4)(u,{field:e.field},{default:(0,l.w5)((function(){return[(0,l._)("section",Le,[Fe,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.compatValue=t}),placeholder:"[可选] 如果字段没有填写，默认为设定的值"},null,512),[[o.nr,e.compatValue]])])]})),_:1},8,["field"])}]]),Ye=r.gN.create({icon:Ie.Z,type:"textarea",title:"多行文本",setting:qe,build:Ne,validator:function(e,t){return e.required&&(0,r.xb)(t)?Promise.reject("必填"):Promise.resolve()},logic:[s,d]});var He=n(4874),Be={class:"xform-bs-field-setting-prop"},Ge=(0,l._)("header",null,"默认值：",-1),Qe={class:"form-check form-check-inline"},Ke=["id","name"],ze=["for"];var Xe=(0,r.hS)().EVENTS;const $e=(0,l.aZ)({name:"xform-bs-number-setting",props:{field:r.Wi},emits:[Xe.UPDATE_FIELD],setup:function(){var e=(0,D.Xu)([]);return{integer:(0,D.Et)("integer","attributes"),compatValue:e.useCompatValue()}},components:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},ke.name,ke)}),Je=(0,M.Z)($e,[["render",function(e,t,n,r,i,a){var u=(0,l.up)("field-setting");return(0,l.wg)(),(0,l.j4)(u,{field:e.field},{attributes:(0,l.w5)((function(){return[(0,l._)("div",Qe,[(0,l.wy)((0,l._)("input",{id:"".concat(e.field.name,"-integer"),name:"".concat(e.field.name,"-integer"),type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.integer=t})},null,8,Ke),[[o.e8,e.integer]]),(0,l._)("label",{class:"form-check-label",for:"".concat(e.field.name,"-integer"),title:"勾选则只允许输入整数"},"整数",8,ze)])]})),default:(0,l.w5)((function(){return[(0,l._)("section",Be,[Ge,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.compatValue=t}),placeholder:"[可选] 如果字段没有填写，默认为设定的值"},null,512),[[o.nr,e.compatValue,void 0,{number:!0}]])])]})),_:1},8,["field"])}]]);var et=(0,l.aZ)({name:"xform-bs-number",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){var t=(0,D.Hg)();return function(){return(0,l.wy)((0,l.Wm)("input",{id:e.field.uid,name:e.field.name,type:"number","onUpdate:modelValue":function(e){return t.value=e},class:"form-control form-control-sm",placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled},null),[[o.nr,t.value,void 0,{number:!0}]])}}});const tt=r.gN.create({icon:He.Z,type:"number",title:"数字",setting:Je,build:et,validator:function(e,t){return e.required&&(0,r.xb)(t)?Promise.reject("必填"):e.attributes.integer&&!/^[-+]?[1-9]?\d+$/.test(t+"")?Promise.reject("请输入整数"):Promise.resolve()},logic:[f]});var nt=n(1871),rt=["id","name","disabled"],lt={class:"xform-bs-is-placeholer",value:""},ot=["value"];const it=(0,l.aZ)({name:"xform-bs-select",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(){var e=(0,D.Hg)("");return{value:e,className:(0,l.Fl)((function(){return{"form-select":!0,"form-select-sm":!0,"xform-bs-select":!0,"xform-bs-is-empty":null==e||"string"==typeof e.value&&0==e.value.length}}))}}}),at=(0,M.Z)(it,[["render",function(e,t,n,r,i,a){return(0,l.wy)(((0,l.wg)(),(0,l.iD)("select",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.value=t}),id:e.field.uid,name:e.field.name,class:(0,B.C_)(e.className),disabled:e.disabled||e.field.disabled},[(0,l._)("option",lt,"---- "+(0,B.zw)(e.field.placeholder||"请选择")+" ----",1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.field.options,(function(e){return(0,l.wg)(),(0,l.iD)("option",{key:e.value,value:e.value},(0,B.zw)(e.value),9,ot)})),128))],10,rt)),[[o.bM,e.value]])}]]);var ut={class:"xform-bs-field-setting-prop"},ct=(0,l._)("header",null,"选项：",-1),st=["value","onInput"],dt=["onClick","disabled"],ft={class:"xform-bs-field-setting-prop"},pt=(0,l._)("header",null,"默认值：",-1),mt=["value"],vt=(0,l._)("option",{value:""},"-- 请选择--",-1),bt=["value"];n(5212),n(7941),n(5003),n(9337),n(3321);function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gt=(0,r.hS)(),_t=gt.BuiltInDefaultValueType,Ot=gt.EVENTS;const wt=(0,l.aZ)({name:"xform-bs-select-setting",props:{field:r.Wi},emits:[Ot.UPDATE_FIELD],setup:function(){var e=[{value:_t.MANUAL,label:"手动指定"},{value:_t.OPTION_FIRST,label:"首选项"}],t=(0,D.D2)((function(){if(!r.value)return;var e=t.options.value,n=o.value;o.value=e.some((function(e){return e.value==n}))?n:void 0})),n=(0,D.Xu)(e),r=n.useIsManual(),l=n.useCompatType(),o=n.useCompatValue((function(e){return e.value||""}));return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({compatType:l,compatValue:o,defTypes:e,isManual:r},t)},components:ht({},ke.name,ke)}),xt={classes:{defaultValue:"deY9Z_hB27uAHEd9_O0C"}},Et=(0,M.Z)(wt,[["render",function(e,t,n,r,i,a){var u=(0,l.up)("field-setting");return(0,l.wg)(),(0,l.j4)(u,{field:e.field},{default:(0,l.w5)((function(){return[(0,l._)("section",ut,[ct,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.options,(function(t,n){return(0,l.wg)(),(0,l.iD)("div",{key:n,class:"xform-bs-setting-option"},[(0,l._)("input",{value:t.value,class:"form-control form-control-sm",placeholder:"请输入选项内容",onInput:function(n){return e.updateOption(n,t)}},null,40,st),(0,l._)("button",{type:"button",class:"btn btn-link btn-text text-danger",onClick:function(n){return e.removeOption(t)},disabled:e.field.options.length<=1},"删除",8,dt)])})),128)),(0,l._)("button",{type:"button",class:"btn btn-link btn-text btn-sm p-0",onClick:t[0]||(t[0]=function(){return e.addOption&&e.addOption.apply(e,arguments)})},"添加选项")]),(0,l._)("section",ft,[pt,(0,l._)("div",{class:(0,B.C_)(e.classes.defaultValue)},[(0,l.wy)((0,l._)("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.compatType=t})},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.defTypes,(function(e,t){return(0,l.wg)(),(0,l.iD)("option",{key:t,value:e.value},(0,B.zw)(e.label||e.value),9,mt)})),128))],512),[[o.bM,e.compatType]]),e.isManual?(0,l.wy)(((0,l.wg)(),(0,l.iD)("select",{key:0,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.compatValue=t}),class:"form-select form-select-sm"},[vt,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.options,(function(e,t){return(0,l.wg)(),(0,l.iD)("option",{key:t,value:e.value},(0,B.zw)(e.label||e.value),9,bt)})),128))],512)),[[o.bM,e.compatValue]]):(0,l.kq)("",!0)],2)])]})),_:1},8,["field"])}],["__cssModules",xt]]),Pt=r.gN.create({icon:nt.Z,type:"select",title:"下拉选择",setting:Et,build:at,validator:function(e,t){return e.required&&(0,r.xb)(t)?Promise.reject("必填"):Promise.resolve()},onCreate:function(e,t,n){var r=Array.isArray(t.options)?t.options:[];n&&r.push({value:"选项1"}),e.options=r},logic:[S]});var Wt=n(3684),kt={class:"xform-bs-radio"},Tt=["id","name","value","disabled"],St=["for"];const Rt=(0,l.aZ)({name:"xform-bs-radio",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){return{value:(0,D.Hg)(),radioClassName:(0,l.Fl)((function(){var t=["form-check"];return"inline"==e.field.attributes.layout&&t.push("form-check-inline"),t}))}}}),At=(0,M.Z)(Rt,[["render",function(e,t,n,r,i,a){return(0,l.wg)(),(0,l.iD)("div",kt,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.field.options,(function(n,r){return(0,l.wg)(),(0,l.iD)("div",{key:r,class:(0,B.C_)(e.radioClassName)},[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.value=t}),id:e.field.uid+"_"+r,name:e.field.name,value:n.value,type:"radio",class:"form-check-input",disabled:e.disabled||e.field.disabled},null,8,Tt),[[o.G2,e.value]]),(0,l._)("label",{class:"form-check-label",for:e.field.uid+"_"+r},(0,B.zw)(n.value),9,St)],2)})),128))])}]]);var Ct={class:"xform-bs-field-setting-prop"},Vt=(0,l._)("header",null,"布局：",-1),Dt={class:"btn-group",role:"group"},It={class:"xform-bs-field-setting-prop"},Ut=(0,l._)("header",null,"选项：",-1),jt=["value","onInput"],Nt=["onClick","disabled"],Lt={class:"xform-bs-field-setting-prop"},Ft=(0,l._)("header",null,"默认值：",-1),Zt=["value"],Mt=(0,l._)("option",{value:""},"-- 请选择--",-1),qt=["value"];function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bt=(0,r.hS)(),Gt=Bt.BuiltInDefaultValueType,Qt=Bt.EVENTS;const Kt=(0,l.aZ)({name:"xform-bs-radio-setting",props:{field:r.Wi},emits:[Qt.UPDATE_FIELD],setup:function(){var e=[{value:Gt.MANUAL,label:"手动指定"},{value:Gt.OPTION_FIRST,label:"首选项"}],t=(0,D.D2)((function(){if(!r.value)return;var e=t.options.value,n=o.value;o.value=e.some((function(e){return e.value==n}))?n:void 0})),n=(0,D.Xu)(e),r=n.useIsManual(),l=n.useCompatType(),o=n.useCompatValue((function(e){return e.value||""}));return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){Ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({compatType:l,compatValue:o,defTypes:e,isManual:r},t)},components:Ht({},ke.name,ke)}),zt={classes:{defaultValue:"ySdLSG3unM25YHrKsbYt"}},Xt=(0,M.Z)(Kt,[["render",function(e,t,n,r,i,a){var u=(0,l.up)("field-setting");return(0,l.wg)(),(0,l.j4)(u,{field:e.field,placeholder:!1},{default:(0,l.w5)((function(){return[(0,l._)("section",Ct,[Vt,(0,l._)("div",Dt,[(0,l._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"inline"==e.field.attributes.layout}]),onClick:t[0]||(t[0]=function(t){return e.update("layout","inline","attributes")})}," 行内 ",2),(0,l._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"block"==e.field.attributes.layout}]),onClick:t[1]||(t[1]=function(t){return e.update("layout","block","attributes")})}," 换行 ",2)])]),(0,l._)("section",It,[Ut,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.options,(function(t,n){return(0,l.wg)(),(0,l.iD)("div",{key:n,class:"xform-bs-setting-option"},[(0,l._)("input",{value:t.value,class:"form-control form-control-sm",placeholder:"请输入选项内容",onInput:function(n){return e.updateOption(n,t)}},null,40,jt),(0,l._)("button",{type:"button",class:"btn btn-link btn-text text-danger",onClick:function(n){return e.removeOption(t)},disabled:e.options.length<=1},"删除",8,Nt)])})),128)),(0,l._)("button",{type:"button",class:"btn btn-sm btn-link btn-text p-0",onClick:t[2]||(t[2]=function(){return e.addOption&&e.addOption.apply(e,arguments)})},"添加选项")]),(0,l._)("section",Lt,[Ft,(0,l._)("div",{class:(0,B.C_)(e.classes.defaultValue)},[(0,l.wy)((0,l._)("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.compatType=t})},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.defTypes,(function(e,t){return(0,l.wg)(),(0,l.iD)("option",{key:t,value:e.value},(0,B.zw)(e.label||e.value),9,Zt)})),128))],512),[[o.bM,e.compatType]]),e.isManual?(0,l.wy)(((0,l.wg)(),(0,l.iD)("select",{key:0,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.compatValue=t}),class:"form-select form-select-sm"},[Mt,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.options,(function(e,t){return(0,l.wg)(),(0,l.iD)("option",{key:t,value:e.value},(0,B.zw)(e.label||e.value),9,qt)})),128))],512)),[[o.bM,e.compatValue]]):(0,l.kq)("",!0)],2)])]})),_:1},8,["field"])}],["__cssModules",zt]]),$t=r.gN.create({icon:Wt.Z,type:"radio",title:"单选",setting:Xt,build:At,validator:function(e,t){return e.required&&(0,r.xb)(t)?Promise.reject("必填"):Promise.resolve()},onCreate:function(e,t,n){var r=Array.isArray(t.options)?t.options:[];n&&(r.push({value:"选项1"}),e.attributes.layout="inline"),e.options=r},logic:[S]});var Jt=n(1683),en={class:"xform-bs-checkbox"},tn=["id","name","value","disabled"],nn=["for"];const rn=(0,l.aZ)({name:"xform-bs-checkbox",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){return{value:(0,D.Hg)([]),className:(0,l.Fl)((function(){var t=["form-check"];return"inline"==e.field.attributes.layout&&t.push("form-check-inline"),t}))}}}),ln=(0,M.Z)(rn,[["render",function(e,t,n,r,i,a){return(0,l.wg)(),(0,l.iD)("div",en,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.field.options,(function(n,r){return(0,l.wg)(),(0,l.iD)("div",{key:r,class:(0,B.C_)(e.className)},[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.value=t}),id:e.field.uid+"_"+r,name:e.field.name,value:n.value,type:"checkbox",class:"form-check-input",disabled:e.disabled||e.field.disabled},null,8,tn),[[o.e8,e.value]]),(0,l._)("label",{class:"form-check-label",for:e.field.uid+"_"+r},(0,B.zw)(n.value),9,nn)],2)})),128))])}]]);var on={class:"xform-bs-field-setting-prop"},an=(0,l._)("header",null,"布局：",-1),un={class:"btn-group",role:"group"},cn={class:"xform-bs-field-setting-prop"},sn=(0,l._)("header",null,"选项：",-1),dn=["value","onInput"],fn=["onClick","disabled"],pn={class:"xform-bs-field-setting-prop"},mn=(0,l._)("header",null,"默认值：",-1),vn=["value"],bn=["value"];function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gn=(0,r.hS)(),_n=gn.BuiltInDefaultValueType,On=gn.EVENTS;const wn=(0,l.aZ)({name:"xform-bs-checkbox-setting",props:{field:r.Wi},emits:[On.UPDATE_FIELD],setup:function(){var e=[{value:_n.MANUAL,label:"手动指定"},{value:_n.OPTION_ALL,label:"全部选项"}],t=(0,D.D2)((function(){if(!r.value)return;var e=t.options.value,n=o.value;o.value=n.filter((function(t){return e.some((function(e){return e.value==t}))}))})),n=(0,D.Xu)(e),r=n.useIsManual(),l=n.useCompatType(),o=n.useCompatValue((function(e){var t=e.value;return Array.isArray(t)?t:[]}));return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({compatType:l,compatValue:o,defTypes:e,isManual:r},t)},components:hn({},ke.name,ke)}),xn={classes:{defaultValue:"vWbaOSSoRLt4TBhSTiME"}},En=(0,M.Z)(wn,[["render",function(e,t,n,r,i,a){var u=(0,l.up)("field-setting");return(0,l.wg)(),(0,l.j4)(u,{field:e.field,placeholder:!1},{default:(0,l.w5)((function(){return[(0,l._)("section",on,[an,(0,l._)("div",un,[(0,l._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"inline"==e.field.attributes.layout}]),onClick:t[0]||(t[0]=function(t){return e.update("layout","inline","attributes")})}," 行内 ",2),(0,l._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"block"==e.field.attributes.layout}]),onClick:t[1]||(t[1]=function(t){return e.update("layout","block","attributes")})}," 换行 ",2)])]),(0,l._)("section",cn,[sn,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.options,(function(t,n){return(0,l.wg)(),(0,l.iD)("div",{key:n,class:"xform-bs-setting-option"},[(0,l._)("input",{value:t.value,class:"form-control form-control-sm",placeholder:"请输入选项内容",onInput:function(n){return e.updateOption(n,t)}},null,40,dn),(0,l._)("button",{type:"button",class:"btn btn-link btn-text text-danger",onClick:function(n){return e.removeOption(t)},disabled:e.field.options.length<=1},"删除",8,fn)])})),128)),(0,l._)("button",{type:"button",class:"btn btn-link btn-text btn-sm p-0",onClick:t[2]||(t[2]=function(){return e.addOption&&e.addOption.apply(e,arguments)})},"添加选项")]),(0,l._)("section",pn,[mn,(0,l._)("div",{class:(0,B.C_)(e.classes.defaultValue)},[(0,l.wy)((0,l._)("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.compatType=t})},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.defTypes,(function(e,t){return(0,l.wg)(),(0,l.iD)("option",{key:t,value:e.value},(0,B.zw)(e.label||e.value),9,vn)})),128))],512),[[o.bM,e.compatType]]),e.isManual?(0,l.wy)(((0,l.wg)(),(0,l.iD)("select",{key:0,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.compatValue=t}),class:"form-select form-select-sm",multiple:""},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.options,(function(e,t){return(0,l.wg)(),(0,l.iD)("option",{key:t,value:e.value},(0,B.zw)(e.label||e.value),9,bn)})),128))],512)),[[o.bM,e.compatValue]]):(0,l.kq)("",!0)],2)])]})),_:1},8,["field"])}],["__cssModules",xn]]),Pn=r.gN.create({icon:Jt.Z,type:"checkbox",title:"多选",setting:En,build:ln,validator:function(e,t){return e.required&&(0,r.xb)(t)?Promise.reject("必填"):Promise.resolve()},onCreate:function(e,t,n){var r=Array.isArray(t.options)?t.options:[];n&&(r.push({value:"选项1"}),e.attributes.layout="inline"),e.options=r},logic:[R]});var Wn=n(6113),kn=["id","name","placeholder","disabled"];const Tn=(0,l.aZ)({name:"xform-bs-date",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(){return{value:(0,D.Hg)()}}}),Sn=(0,M.Z)(Tn,[["render",function(e,t,n,r,i,a){return(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{id:e.field.uid,name:e.field.name,type:"date","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.value=t}),class:"form-control form-control-sm",placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled},null,8,kn)),[[o.nr,e.value]])}]]);var Rn={class:"xform-bs-field-setting-prop"},An=(0,l._)("header",null,[(0,l._)("label",{class:"xform-bs-label",title:"如果字段没有填写，默认为设定的值"},"默认值：")],-1),Cn=["value"];var Vn=(0,r.hS)(),Dn=Vn.BuiltInDefaultValueType,In=Vn.EVENTS;const Un=(0,l.aZ)({name:"xform-bs-date-setting",props:{field:r.Wi},emits:[In.UPDATE_FIELD],setup:function(){var e=[{value:Dn.MANUAL,label:"手动指定"},{value:Dn.DATE_NOW,label:"当前时间"}],t=(0,D.Xu)(e);return{isManual:t.useIsManual(),compatType:t.useCompatType(),compatValue:t.useCompatValue(),defTypes:e}},components:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},ke.name,ke)}),jn={classes:{defaultValue:"u7Tcivau3QkBOwAATtHv"}},Nn=(0,M.Z)(Un,[["render",function(e,t,n,r,i,a){var u=(0,l.up)("field-setting");return(0,l.wg)(),(0,l.j4)(u,{field:e.field,placeholder:!1},{default:(0,l.w5)((function(){return[(0,l._)("section",Rn,[An,(0,l._)("div",{class:(0,B.C_)(e.classes.defaultValue)},[(0,l.wy)((0,l._)("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.compatType=t})},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.defTypes,(function(e,t){return(0,l.wg)(),(0,l.iD)("option",{key:t,value:e.value},(0,B.zw)(e.label||e.value),9,Cn)})),128))],512),[[o.bM,e.compatType]]),e.isManual?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,type:"date","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.compatValue=t}),class:"form-control form-control-sm",placeholder:"请选择默认时间"},null,512)),[[o.nr,e.compatValue]]):(0,l.kq)("",!0)],2)])]})),_:1},8,["field"])}],["__cssModules",jn]]),Ln=r.gN.create({icon:Wn.Z,type:"date",title:"日期",setting:Nn,build:Sn,validator:function(e,t){return e.required&&(0,r.xb)(t)?Promise.reject("必填"):Promise.resolve()},logic:[p]});var Fn=n(2209);var Zn=n(898);const Mn=(0,l.aZ)({name:"xform-bs-divider",inheritAttrs:!1,props:{field:{type:r.Wi,required:!0}},components:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},Zn.Z.name,Zn.Z)}),qn=(0,M.Z)(Mn,[["render",function(e,t,n,r,o,i){var a=(0,l.up)("xform-divider");return(0,l.wg)(),(0,l.j4)(a,{class:"xform-item",title:e.field.title,layout:e.field.attributes.layout,type:e.field.attributes.type,top:e.field.attributes.top,bottom:e.field.attributes.bottom},null,8,["title","layout","type","top","bottom"])}]]);var Yn={class:"xform-bs-field-setting-prop xform-divider-types"},Hn=(0,l._)("header",null,"样式：",-1),Bn=["id","value","checked","onChange"],Gn=["for"],Qn={class:"xform-bs-field-setting-prop"},Kn=(0,l._)("header",null,"间距：",-1),zn={class:"xform-bs-divider-range"},Xn=(0,l._)("label",null,"上间距：",-1),$n=["value"],Jn={class:"xform-bs-divider-range"},er=(0,l._)("label",null,"下间距：",-1),tr=["value"];var nr;n(1058);function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lr=(0,r.hS)().EVENTS;const or=(0,l.aZ)({name:"xform-bs-divider-setting",props:{field:r.Wi},emits:[lr.UPDATE_FIELD],setup:function(e,t){var n=t.emit;function r(e,t,r){n(lr.UPDATE_FIELD,{prop:e,value:t,scope:r})}return{types:["solid","dashed","double","solid-dashed","dashed-solid"],update:r,updateField:function(e,t,n){var l=e.target;r(t,parseInt(l.value),n)}}},components:(nr={},rr(nr,Zn.Z.name,Zn.Z),rr(nr,ke.name,ke),nr)}),ir=(0,M.Z)(or,[["render",function(e,t,n,r,o,i){var a=(0,l.up)("xform-divider"),u=(0,l.up)("field-setting");return(0,l.wg)(),(0,l.j4)(u,{field:e.field,placeholder:!1,attributes:!1},{default:(0,l.w5)((function(){return[(0,l._)("section",Yn,[Hn,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.types,(function(t){return(0,l.wg)(),(0,l.iD)("div",{key:t,class:"form-check"},[(0,l._)("input",{id:"divider-".concat(t),name:"setting-divider-type",type:"radio",value:t,class:"form-check-input",checked:e.field.attributes.type==t,onChange:function(n){return e.update("type",t,"attributes")}},null,40,Bn),(0,l._)("label",{class:"form-check-label",for:"divider-".concat(t)},[(0,l.Wm)(a,{type:t},null,8,["type"])],8,Gn)])})),128))]),(0,l._)("section",Qn,[Kn,(0,l._)("div",zn,[Xn,(0,l._)("input",{value:e.field.attributes.top,type:"range",class:"form-range",min:"0",max:"100",step:"5",onInput:t[0]||(t[0]=function(t){return e.updateField(t,"top","attributes")})},null,40,$n)]),(0,l._)("div",Jn,[er,(0,l._)("input",{value:e.field.attributes.bottom,type:"range",class:"form-range",min:"0",max:"100",step:"5",onInput:t[1]||(t[1]=function(t){return e.updateField(t,"bottom","attributes")})},null,40,tr)])])]})),_:1},8,["field"])}]]),ar=r.gN.create({icon:Fn.Z,type:"divider",title:"分割线",custom:!0,setting:ir,build:qn,view:qn,onCreate:function(e,t,n){n&&(e.attributes.type="solid",e.attributes.top=0,e.attributes.bottom=0)}});n(5827),n(4819),n(3593),n(7314);var ur=n(7736),cr=n(1993),sr={class:"form-check form-check-inline",title:"勾选则支持展开/收起分组"},dr=["id","name","checked"],fr=["for"];var pr=(0,r.hS)().EVENTS;const mr=(0,l.aZ)({name:"xform-bs-group-setting",props:{field:r.Wi},emits:[pr.UPDATE_FIELD],setup:function(e,t){var n=t.emit;return{updateField:F.bind(null,n)}},components:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},ke.name,ke)}),vr=(0,M.Z)(mr,[["render",function(e,t,n,r,o,i){var a=(0,l.up)("field-setting");return(0,l.wg)(),(0,l.j4)(a,{field:e.field,placeholder:!1,required:!1},{attributes:(0,l.w5)((function(){return[(0,l._)("div",sr,[(0,l._)("input",{id:"".concat(e.field.name,"-collapsable"),name:"".concat(e.field.name,"-collapsable"),checked:e.field.attributes.collapsable,type:"checkbox",class:"form-check-input",onInput:t[0]||(t[0]=function(t){return e.updateField(t,"collapsable","attributes")})},null,40,dr),(0,l._)("label",{class:"form-check-label",for:"".concat(e.field.name,"-collapsable")},"允许收起",8,fr)])]})),_:1},8,["field"])}]]);function br(e){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},br(e)}function yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hr=(0,r.hS)(),gr=hr.SELECTOR,_r=hr.CLASS,Or=hr.EnumRenderType,wr=hr.PROPS,xr=hr.EnumValidateMode,Er=hr.EnumValidityState,Pr="xform-bs-group-list",Wr=".".concat(Pr);function kr(){var e=(0,m.iH)(!1);function t(){e.value=!e.value}return{collasped:e,renderHeader:function(n){if(null==n.title)return null;var r=!0===n.attributes.collapsable?(0,l.Wm)("button",{type:"button",title:e.value?"展开":"收起",class:"btn btn-link btn-text xform-bs-group-toggle",onClick:t},[e.value?"展开":"收起"]):null;return(0,l.Wm)("h6",{class:"card-header"},[(0,l.Wm)("span",null,[n.title]),r])}}}var Tr=(0,l.aZ)({name:"xform-bs-group",props:{field:{type:r.Wi,required:!0},behavior:{type:String,default:null},disabled:{type:Boolean,default:!1}},setup:function(e){var t=kr(),n=t.collasped,o=t.renderHeader,i=(0,r.j9)();return function(){var t,r=e.field.value,a=e.field.fields,u=e.behavior==Or.DESIGNER||i.type==Or.DESIGNER,c=e.field.validation.message,s=e.disabled,d=yr({"xform-item":!0,"xform-bs-group":!0,"xform-is-collasped":n.value},_r.IS_ERROR,e.field.validation.valid==Er.ERROR),f=u&&0==a.length?(0,l.Wm)("p",{class:[_r.IS_EMPTY_TIP,"xform-bs-empty-tip"]},[(0,l.Uk)("请将左侧控件拖动到此处")]):null,p=yr({class:(t={"card-body":!0},yr(t,Pr,!0),yr(t,_r.DROPPABLE,u),yr(t,_r.SCOPE,u),t)},"."+wr.FIELD,u?e.field:void 0),m=a.map((function(e){return i.renderField(u?e:r[e.name],{parentProps:{disabled:s}})}));return(0,l.Wm)("div",{class:d},[(0,l.Wm)("div",{class:"card"},[o(e.field),(0,l.Wm)("div",p,[f,m])]),c&&(0,l.Wm)("p",{class:"xform-item-message"},[c])])}}}),Sr=(0,l.aZ)({name:"xform-bs-group-view",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){var t=(0,r.j9)().renderField,n=kr(),o=n.collasped,i=n.renderHeader;return function(){var n=e.field.value,r=e.field.fields,a={"xform-item":!0,"xform-bs-group":!0,"xform-is-collasped":o.value};return(0,l.Wm)("div",{class:a},[(0,l.Wm)("div",{class:"card"},[i(e.field),(0,l.Wm)("div",{class:["card-body",Pr]},[r.map((function(r){return t(n[r.name],{parentProps:{disabled:e.disabled}})}))])])])}}});const Rr=r.gN.create({icon:cr.Z,type:"group",title:"分组",buttons:[ur.n,r.gN.BUTTON_COPY,r.gN.BUTTON_REMOVE],custom:!0,preview:Tr,setting:vr,build:Tr,view:Sr,onDragOver:function(e){var t=e.currentTarget;if(t.matches(Wr)){e.stopPropagation(),e.preventDefault();var n=e.context,r=n.directionY,l=n.moveMarkEl,o=e.dragElement.contains(t);l(r,o?e.dragElement:e.target,o?e.dragElement.parentElement.closest(gr.DROPPABLE):t)}},onDrop:function(e){e.currentTarget.matches(gr.SCOPE)&&e.stopPropagation()},onValueInit:function(e,t){var n=null==t||"object"!=br(t)?{}:t;return e.fields.reduce((function(t,r){var l=r.clone(!0);return l.setValue(n[r.name]),l.setParent(e),t[r.name]=l,t}),{})},onValueSubmit:function(e){var t=e.value;if(null!=t&&"object"==br(t)&&0!=Object.keys(t).length)return e.fields.map((function(e){return e.name})).reduce((function(e,n){var r=Reflect.get(t,n,t);if(null!=r){var l=r.conf,o="function"==typeof(null==l?void 0:l.onValueSubmit)?l.onValueSubmit(r):r.value;Reflect.set(e,n,o,e)}return e}),{})},validator:function(e,t,n){var r=e.value,l=Object.keys(r).map((function(e){var t=r[e];return n.mode==xr.RECURSIVE?t.validate({mode:xr.RECURSIVE}):t.invalid?Promise.reject():Promise.resolve()}));return Promise.allSettled(l).then((function(e){return e.some((function(e){return"rejected"===e.status}))?Promise.reject("请补全必填内容"):Promise.resolve()}))}});n(6541),n(2479),n(9600);var Ar=n(3720);function Cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vr=(0,r.hS)(),Dr=Vr.SELECTOR,Ir=Vr.CLASS,Ur=Vr.PROPS,jr=Vr.EnumValidateMode,Nr=Vr.EnumRenderType;const Lr=r.gN.create({type:"tabs.pane",title:"标签面板",custom:!0,build:(0,l.aZ)({name:"xform-bs-tabs-pane",props:{field:{type:r.Wi,required:!0},behavior:{type:String,default:null},disabled:{type:Boolean,default:!1}},setup:function(e){return function(){var t,n,o=(0,r.j9)(),i=e.field.fields,a=null!==(t=e.field.value)&&void 0!==t?t:{},u=e.behavior==Nr.DESIGNER||o.type==Nr.DESIGNER,c=u&&0==i.length?(0,l.Wm)("p",{class:[Ir.IS_EMPTY_TIP,"xform-bs-empty-tip"]},[(0,l.Uk)("请将左侧控件拖动到此处")]):i.map((function(t){return o.renderField(u?t:a[t.name],{parentProps:{disabled:e.disabled}})})),s=Cr({class:(n={"tab-pane":!0},Cr(n,Ir.DROPPABLE,u),Cr(n,Ir.SCOPE,u),n)},"."+Ur.FIELD,u?e.field:void 0);return(0,l.Wm)("div",s,[c])}}}),view:(0,l.aZ)({name:"xform-bs-tabs-pane-view",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){var t,n=(0,r.j9)(),o=null!==(t=e.field.value)&&void 0!==t?t:{};return function(){var t=e.field.fields;return(0,l.Wm)("div",{class:"tab-pane"},[t.map((function(t){return n.renderField(o[t.name],{parentProps:{disabled:e.disabled}})}))])}}}),onDragOver:function(e){var t=e.currentTarget;e.stopPropagation(),e.preventDefault();var n=e.context,r=n.directionY,l=n.moveMarkEl,o=e.dragElement.contains(t);l(r,o?e.dragElement:e.target,o?e.dragElement.parentElement.closest(Dr.DROPPABLE):t)},onDrop:function(e){e.stopPropagation()},onValueInit:function(e,t){var n=null!=t?t:{};return e.fields.reduce((function(t,r){var l=r.name,o=r.clone(!0);return o.setValue(n[l]),o.setParent(e),t[l]=o,t}),{})},onValueSubmit:function(e){var t,n=null!==(t=e.value)&&void 0!==t?t:{};return e.fields.map((function(e){return e.name})).reduce((function(e,t){var r,l=n[t],o=null===(r=l.conf)||void 0===r?void 0:r.onValueSubmit;return e[t]="function"==typeof o?o(l):l.value,e}),{})},validator:function(e,t,n){var r=Object.values(null!=t?t:{}).map((function(e){return n.mode==jr.RECURSIVE?e.validate({mode:jr.RECURSIVE}):e.invalid?Promise.reject():Promise.resolve()}));return Promise.allSettled(r).then((function(t){return t.some((function(e){return"rejected"===e.status}))?Promise.reject("请补全标签页[".concat(e.title,"]必填内容")):Promise.resolve()}))}});function Fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zr=(0,r.hS)(),Mr=Zr.CLASS,qr=Zr.EnumValidityState,Yr=Zr.EVENTS,Hr=Zr.EnumRenderType,Br=(0,l.aZ)({name:"xform-bs-tabs-setting",props:{field:{type:r.Wi,required:!0}},emits:[Yr.UPDATE_FIELD],setup:function(e){var t=(0,D.Et)("hideTitle","attributes");function n(){var t=e.field,n=new r.Wi(Lr);n.title="标签".concat(e.field.fields.length+1),t.fields.push(n)}function i(t){var n=e.field.fields;if(!(n.length<=1)){var r=n.indexOf(t);r>=0&&n.splice(r,1)}}function a(e,t){e.title=t.target.value}function u(t){var n=e.field.fields,r=n.splice(t,1)[0];n.splice(t-1,0,r)}function c(t){var n=e.field.fields,r=n.splice(t+1,1)[0];n.splice(t,0,r)}return function(){var r=e.field,s=r.fields.map((function(e,t){var n=r.fields.length;return(0,l.Wm)("div",{class:"xform-bs-setting-option"},[(0,l.Wm)("input",{type:"text",class:"form-control form-control-sm",placeholder:"请输入标签名称",value:e.title,onInput:a.bind(null,e)},null),(0,l.Wm)("button",{type:"button",class:"btn btn-link btn-text",onClick:u.bind(null,t),disabled:0==t},[(0,l.Uk)("上移")]),(0,l.Wm)("button",{type:"button",class:"btn btn-link btn-text",onClick:c.bind(null,t),disabled:t==n-1},[(0,l.Uk)("下移")]),(0,l.Wm)("button",{type:"button",class:"btn btn-link btn-text text-danger",onClick:i.bind(null,e),disabled:n<=1},[(0,l.Uk)("删除")])])})),d={default:function(){return(0,l.Wm)("div",{class:"xform-bs-field-setting-prop"},[(0,l.Wm)("header",null,[(0,l.Uk)("标签：")]),s,(0,l.Wm)("button",{type:"button",class:"btn btn-link btn-sm btn-text p-0",onClick:n},[(0,l.Uk)("添加标签")])])},attributes:function(){return(0,l.Wm)("div",{class:"form-check form-check-inline"},[(0,l.wy)((0,l.Wm)("input",{type:"checkbox",class:"form-check-input",id:"".concat(r.name,"-hide-title"),name:"".concat(r.name,"-hide-title"),"onUpdate:modelValue":function(e){return t.value=e}},null),[[o.e8,t.value]]),(0,l.Wm)("label",{class:"form-check-label",for:"".concat(r.name,"-hide-title"),title:"勾选则不显示标题"},[(0,l.Uk)("隐藏标题")])])}};return(0,l.Wm)((0,l.up)("field-setting"),{field:r,placeholder:!1,required:!1},d)}},components:Fr({},ke.name,ke)});function Gr(e){return e.validation.valid!==qr.ERROR?null:(0,l.Wm)("p",{class:"xform-item-message"},[e.validation.message])}var Qr=(0,l.aZ)({name:"xform-bs-tabs",props:{field:{type:r.Wi,required:!0},behavior:{type:String,default:null},disabled:{type:Boolean,default:!1}},setup:function(e){var t=(0,m.iH)(e.field.fields[0].name),n=(0,l.FN)(),o=(0,r.j9)();function i(e,n){n.preventDefault(),t.value=e.name}function a(e){var t=(0,r.am)(n.refs,"scroll"),l=(0,r.am)(n.refs,"list");if(!(l.offsetWidth<=t.offsetWidth)){e.preventDefault();var o=function(e,t,n){var l=(0,r.fN)(e).pixelY+(t.__offset__||0);return l<0?0:l>t.offsetWidth-n.offsetWidth?t.offsetWidth-n.offsetWidth:l}(e,l,t);l.__offset__=o,l.style.transform="translateX(".concat(-o,"px)")}}var u=(0,l.YP)(e.field.fields,(function(e){e.every((function(e){return e.name!=t.value}))&&(t.value=e[e.length-1].name)}));return(0,l.Jd)(u),function(){var n,u=e.field,c=null!==(n=u.value)&&void 0!==n?n:{},s=!0===u.attributes.hideTitle?null:(0,l.Wm)("strong",{class:"nav-tabs-title"},[u.title]),d=e.disabled,f=e.behavior==Hr.DESIGNER||o.type==Hr.DESIGNER,p=u.fields.map((function(e){var n={"nav-link":!0,active:t.value==e.name};return(0,l.Wm)("a",{class:n,href:"javascript:;",onClick:i.bind(null,e)},[e.title])})),m=u.fields.map((function(e){return o.renderField(f?e:c[e.name],{parentProps:{disabled:d},renderContent:function(n,o){return o.class=(0,r.C_)(o.class,{active:t.value==e.name}),(0,l.h)(n,o)},renderPreivew:function(e,t,n,r){return r()}})})),v=Fr({"xform-item":!0,"xform-bs-tabs":!0},Mr.IS_ERROR,u.invalid);return(0,l.Wm)("div",{class:v},[(0,l.Wm)("div",{class:"nav nav-tabs"},[s,(0,l.Wm)("div",{class:"xform-bs-tabs-scroll",onWheel:a,ref:"scroll"},[(0,l.Wm)("div",{class:"xform-bs-tab-list",ref:"list"},[p])])]),(0,l.Wm)("div",{class:"tab-content"},[m]),Gr(u)])}}});const Kr=r.gN.create({type:"tabs",title:"标签页",icon:Ar.Z,custom:!0,setting:Br,build:Qr,view:Qr,dependencies:[Lr],onCreate:function(e,t,n){if(n){var l=new r.Wi(Lr);l.title="标签".concat(e.fields.length+1),e.push(l)}},onValueInit:function(e,t){var n=null!=t?t:{};return e.fields.reduce((function(t,r){var l=r.name,o=r.clone(!0);return o.setValue(n[l]),o.setParent(e),t[l]=o,t}),{})},onValueSubmit:function(e){var t,n=null!==(t=e.value)&&void 0!==t?t:{};return e.fields.map((function(e){return e.name})).reduce((function(e,t){var r,l=n[t],o=null===(r=l.conf)||void 0===r?void 0:r.onValueSubmit;return e[t]="function"==typeof o?o(l):l.value,e}),{})},validator:function(e,t,n){var r=Object.values(null!=t?t:{}).map((function(e){return e.validate({mode:n.mode})}));return Promise.allSettled(r).then((function(e){var t=e.map((function(e){return"rejected"==e.status?e.reason:null})).filter((function(e){return e}));return t.length>0?Promise.reject(t.join("\n")):Promise.resolve()}))}});n(2222);var zr=150,Xr="xform-bs-datatable-columns";function $r(e,t){var n=(0,m.iH)(!1),o=(0,l.FN)(),i=(0,r.I_)(),a=(0,m.iH)(null),u=(0,r.j9)(),c=null;function s(e){c=e,p()}function d(){c=null,p()}function f(e){n.value=e}function p(){var t=function(e,t){return null==t?{}:e.reduce((function(e,n){var r,l=t[n.name],o=null===(r=l.conf)||void 0===r?void 0:r.onValueSubmit;return e[n.name]="function"==typeof o?o(l):l.value,e}),{})}(e.field.fields,c),r=e.field.fields.map((function(e){return e.clone(!0)}));a.value=i.value.genSchema({fields:r},t),n.value=!0}function v(){n.value=!1}function b(){var n=o.refs.form;if(null==n)return v();n.validate().then((function(n){var r,l,o;n.valid&&(null==c?(r=n.model,l=e.field.fields.reduce((function(t,n){var l=n.clone(!0);return l.setValue(r[n.name]),l.setParent(e.field),t[n.name]=l,t}),{}),(o=t.value).push(l),t.value=o):function(t){e.field.fields.forEach((function(e){var n=e.name;c[n].value=t[n]})),c=null}(n.model),v())}))}function y(e){var n=t.value,r=n.indexOf(e);r>=0&&(n.splice(r,1),t.value=n)}function h(e,t,n){return e>0?null:t?(0,l.Wm)("div",{class:"xform-bs-datatable-tip",style:"width: ".concat(n,"px")},[(0,l.Uk)("暂无数据")]):(0,l.Wm)("div",{class:"xform-bs-datatable-tip",style:"width: ".concat(n,"px")},[(0,l.Wm)("span",null,[(0,l.Uk)("点击")]),(0,l.Wm)("button",{type:"button",class:"btn btn-link btn-text btn-sm shadow-none",onClick:d},[(0,l.Uk)("+ 添加")]),(0,l.Wm)("span",null,[(0,l.Uk)("按钮插入数据")])])}return(0,l.Jd)((function(){a.value=null,c=null})),function(){var r,o=e.field.fields.filter((function(e){return!0!==e.hidden}));if(0==o.length)return(0,l.Wm)("div",{class:"xform-is-unknown"},[(0,l.Uk)("请放入至少一个字段")]);var p=e.disabled||e.field.disabled,m=null!==(r=e.field.attributes.colWidths)&&void 0!==r?r:{},v=o.reduce((function(e,t){var n,r=null!==(n=m[t.name])&&void 0!==n?n:zr;return e.total+=r,e.cols.push((0,l.Wm)("col",{style:{width:"".concat(r,"px")}},null)),e}),{cols:[],total:60}),g=v.cols,_=v.total,O=t.value.map((function(e,t){var n=o.map((function(t){var n=e[t.name],r=u.renderField(n,{parentProps:{disabled:p},renderItem:function(e,t){return t.custom=!0,(0,l.h)(e,t,(function(){var e;return null!==(e=n.value)&&void 0!==e?e:i.value.viewerPlaceholder}))}});return(0,l.Wm)("td",null,[r])})),r=p?null:(0,l.Wm)("td",{class:"xform-bs-datatable-operate"},[(0,l.Wm)("button",{type:"button",class:"btn btn-link btn-text shadow-none",onClick:s.bind(null,e)},[(0,l.Uk)("编辑")]),(0,l.Wm)("button",{type:"button",class:"btn btn-link btn-text text-danger shadow-none",onClick:y.bind(null,e)},[(0,l.Uk)("删除")])]);return(0,l.Wm)("tr",{class:"xform-bs-datatable-row"},[(0,l.Wm)("td",{class:"xform-bs-datatable-index"},[t+1]),n,r])})),w=_+(p?0:100),x=p?"#":(0,l.Wm)("button",{type:"button",class:"btn btn-sm btn-link btn-text shadow-none",onClick:d},[(0,l.Uk)("添加")]),E=(0,l.Wm)("table",{class:"table table-hover",style:"width: ".concat(w,"px")},[(0,l.Wm)("colgroup",null,[(0,l.Wm)("col",{style:"width: ".concat(60,"px")},null),g,p?null:(0,l.Wm)("col",{style:"width: ".concat(100,"px")},null)]),(0,l.Wm)("thead",null,[(0,l.Wm)("th",{class:"xform-bs-datatable-index"},[x]),o.map((function(e){var t={"xform-bs-datatable-cell":!0,"xform-is-required":!p&&!e.disabled&&e.required};return(0,l.Wm)("th",{class:t},[(0,l.Wm)("span",null,[e.title])])})),p?null:(0,l.Wm)("th",{class:"xform-bs-datatable-operate"},[(0,l.Uk)("操作")])]),(0,l.Wm)("tbody",null,[O])]);return(0,l.Wm)("div",{class:"xform-bs-datatable","data-layout":"modal"},[(0,l.Wm)("div",{class:"table-responsive"},[E,h(O.length,p,w)]),(0,l.Wm)((0,l.up)("modal"),(0,l.dG)({title:"".concat(null==c?"添加":"编辑","数据"),class:"xform-bs-datatable-modal-layout",onConfirm:b},{visible:n.value,"onUpdate:visible":f}),{default:function(){return[(0,l.Wm)((0,l.up)("xform-builder"),{schema:a.value,ref:"form",onSubmit:b},{default:function(){return[(0,l.Wm)("button",{class:"xform-is-hidden",type:"submit"},null)]}})]}})])}}var Jr={class:"form-check form-check-inline"},el=["id","name"],tl=["for"],nl={class:"form-check form-check-inline"},rl=["id","name"],ll=["for"],ol={class:"xform-bs-field-setting-prop"},il=(0,l._)("header",null,"表单布局：",-1),al={class:"btn-group",role:"group"},ul={class:"xform-bs-field-setting-prop"},cl=(0,l._)("header",null,"列宽：",-1),sl=["placeholder","value","onInput"],dl={key:0,class:"text-secondary"};var fl=(0,r.hS)(),pl=fl.EVENTS,ml=fl.LabelPosition,vl="attributes";const bl=(0,l.aZ)({name:"xform-bs-datatable-setting",props:{field:{type:r.Wi,required:!0}},emits:[pl.UPDATE_FIELD],setup:function(e,t){var n=t.emit;return{DEF_COLUMN_WIDTH:zr,updateColWidth:function(t,r){var l=t.target,o=parseFloat(l.value),i=e.field.attributes.colWidths;i[r]=isNaN(o)?null:o,n(pl.UPDATE_FIELD,{prop:"colWidths",value:i,scope:vl})},getColumnWidth:function(t){return e.field.attributes.colWidths[t]},hideTitle:(0,D.Et)("hideTitle",vl),layout:(0,D.Et)("layout",vl),labelPosition:(0,l.Fl)({get:function(){var t;return(null===(t=e.field.attributes)||void 0===t?void 0:t.labelPosition)==ml.TOP},set:function(e){var t=!0===e?ml.TOP:void 0;n(pl.UPDATE_FIELD,{prop:"labelPosition",scope:vl,value:t})}})}},components:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},ke.name,ke)}),yl={classes:{columnBg:"D2xFwxXoIfj0ESDBQYqx",titleProps:"tx1MA84ThNWpBbZ1ULgu"}},hl=(0,M.Z)(bl,[["render",function(e,t,n,r,i,a){var u=(0,l.up)("field-setting");return(0,l.wg)(),(0,l.j4)(u,{field:e.field,placeholder:!1},{title:(0,l.w5)((function(){return[(0,l._)("div",{class:(0,B.C_)(e.classes.titleProps)},[(0,l._)("div",Jr,[(0,l.wy)((0,l._)("input",{id:"".concat(e.field.name,"-hide-title"),name:"".concat(e.field.name,"-hide-title"),type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.hideTitle=t})},null,8,el),[[o.e8,e.hideTitle]]),(0,l._)("label",{class:"form-check-label",for:"".concat(e.field.name,"-hide-title"),title:"勾选则不显示标题"},"隐藏标题",8,tl)]),(0,l._)("div",nl,[(0,l.wy)((0,l._)("input",{id:"".concat(e.field.name,"-label-position"),name:"".concat(e.field.name,"-label-position"),type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.labelPosition=t})},null,8,rl),[[o.e8,e.labelPosition]]),(0,l._)("label",{class:"form-check-label",for:"".concat(e.field.name,"-label-position"),title:"勾选则标题位于顶部"},"顶部对齐",8,ll)])],2)]})),default:(0,l.w5)((function(){return[(0,l._)("section",ol,[il,(0,l._)("div",al,[(0,l._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"modal"==e.layout}]),onClick:t[2]||(t[2]=function(t){return e.layout="modal"}),title:"选中则表单在弹出模态框中编辑"},"窗口",2),(0,l._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"inline"==e.layout}]),onClick:t[3]||(t[3]=function(t){return e.layout="inline"}),title:"选中则表单在表格中直接编辑"},"行内",2)])]),(0,l._)("section",ul,[cl,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.field.fields,(function(t){var n;return(0,l.wg)(),(0,l.iD)("div",{class:"xform-bs-datatable-column",key:t.uid},[(0,l._)("div",{class:(0,B.C_)(e.classes.columnBg),style:(0,B.j5)({width:"".concat(null!==(n=e.getColumnWidth(t.name))&&void 0!==n?n:e.DEF_COLUMN_WIDTH,"px")})},null,6),(0,l._)("label",null,(0,B.zw)(t.title),1),(0,l._)("input",{type:"number",min:"0",placeholder:"默认宽度".concat(e.DEF_COLUMN_WIDTH),class:"form-control form-control-sm",value:e.getColumnWidth(t.name),onInput:function(n){return e.updateColWidth(n,t.name)}},null,40,sl)])})),128)),0==e.field.fields.length?((0,l.wg)(),(0,l.iD)("div",dl,"请至少放入一个字段")):(0,l.kq)("",!0)])]})),_:1},8,["field"])}],["__cssModules",yl]]);var gl=n(9704);function _l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ol=(0,r.hS)(),wl=Ol.CLASS,xl=Ol.PROPS,El=Ol.EVENTS,Pl=Ol.EnumValidateMode,Wl=(0,l.aZ)({name:"xform-bs-datatable-preview",props:{field:{type:r.Wi,required:!0}},setup:function(e){var t=(0,r.j9)();return function(){var n,r=e.field,o=r.fields,i=null!==(n=r.attributes.colWidths)&&void 0!==n?n:{},a=0==o.length?(0,l.Wm)("p",{class:"".concat(wl.IS_EMPTY_TIP," xform-bs-empty-tip")},[(0,l.Uk)("请将左侧控件拖动到此处")]):o.map((function(e){return t.renderField(e,{renderItem:function(){var t,n={"xform-bs-datatable-cell":!0,"xform-is-required":e.required},r={width:"".concat(null!==(t=i[e.name])&&void 0!==t?t:zr,"px")};return(0,l.Wm)("div",{class:n,style:r},[(0,l.Wm)("span",null,[e.title])])}})})),u=_l({class:"".concat(Xr," ").concat(wl.DROPPABLE," ").concat(wl.SCOPE)},"."+xl.FIELD,e.field);return(0,l.Wm)("div",{class:"xform-bs-datatable ".concat(wl.IS_SCROLL," ").concat(wl.IS_HORIZONTAL_SCROLL)},[(0,l.Wm)("div",u,[a])])}}}),kl=(0,l.aZ)({name:"xform-bs-datatable",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},emits:[El.UPDATE_VALUE],setup:function(e){var t=(0,D.Hg)(),n=$r(e,t),o=function(e,t){var n=(0,r.j9)();function o(){var n=e.field.fields.reduce((function(t,n){var r=n.clone(!0);return r.setParent(e.field),t[n.name]=r,t}),{}),r=t.value;r.push(n),t.value=r}function i(e){var n=t.value,r=n.indexOf(e);r>=0&&(n.splice(r,1),t.value=n)}function a(e,t,n){return e>0?null:t?(0,l.Wm)("div",{class:"xform-bs-datatable-tip",style:"width: ".concat(n,"px")},[(0,l.Uk)("暂无数据")]):(0,l.Wm)("div",{class:"xform-bs-datatable-tip",style:"width: ".concat(n,"px")},[(0,l.Wm)("span",null,[(0,l.Uk)("点击")]),(0,l.Wm)("button",{type:"button",class:"btn btn-link btn-text btn-sm shadow-none",onClick:o},[(0,l.Uk)("+ 添加")]),(0,l.Wm)("span",null,[(0,l.Uk)("按钮插入数据")])])}return function(){var r,u=e.field.fields.filter((function(e){return!0!==e.hidden}));if(0==u.length)return(0,l.Wm)("div",{class:"xform-is-unknown"},[(0,l.Uk)("请放入至少一个字段")]);var c=e.disabled||e.field.disabled,s=null!==(r=e.field.attributes.colWidths)&&void 0!==r?r:{},d=u.reduce((function(e,t){var n,r=null!==(n=s[t.name])&&void 0!==n?n:zr;return e.total+=r,e.cols.push((0,l.Wm)("col",{style:{width:"".concat(r,"px")}},null)),e}),{cols:[],total:60}),f=d.cols,p=d.total,m=t.value.map((function(e,t){var r=u.map((function(t){var r=n.renderField(e[t.name],{parentProps:{disabled:c},renderItem:function(e,t,n){return t.label=!1,(0,l.h)(e,t,n)}});return(0,l.Wm)("td",null,[r])}));return(0,l.Wm)("tr",{class:"xform-bs-datatable-row"},[(0,l.Wm)("td",{class:"xform-bs-datatable-index"},[(0,l.Wm)("strong",null,[t+1]),c?null:(0,l.Wm)("button",{type:"button",class:"btn btn-link btn-text text-danger",onClick:i.bind(null,e)},[(0,l.Uk)("删除")])]),r])})),v=c?"#":(0,l.Wm)("button",{type:"button",class:"btn btn-link btn-text btn-sm shadow-none",onClick:o},[(0,l.Uk)("添加")]);return(0,l.Wm)("div",{class:"xform-bs-datatable","data-layout":"inline"},[(0,l.Wm)("div",{class:"table-responsive"},[(0,l.Wm)("table",{class:"table table-hover",style:{width:p+"px"}},[(0,l.Wm)("colgroup",null,[(0,l.Wm)("col",{style:"width: ".concat(60,"px")},null),f]),(0,l.Wm)("thead",null,[(0,l.Wm)("th",{class:"xform-bs-datatable-index"},[v]),u.map((function(e){var t={"xform-bs-datatable-cell":!0,"xform-is-required":!c&&!e.disabled&&e.required};return(0,l.Wm)("th",{class:t},[(0,l.Wm)("span",null,[e.title])])}))]),(0,l.Wm)("tbody",null,[m])]),a(m.length,c,p)])])}}(e,t);return function(){return"inline"==e.field.attributes.layout?o():n()}},components:_l({},we.name,we)}),Tl=(0,l.aZ)({name:"xform-bs-datatable-view",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){var t=(0,D.Hg)(),n=(0,r.j9)(),o=(0,r.I_)();return function(){var r,i=e.field.fields;if(!Array.isArray(t.value)||0==t.value.length||0==i.length)return(0,l.Wm)("span",{class:"xform-viewer-value"},[o.value.viewerPlaceholder]);var a=null!==(r=e.field.attributes.colWidths)&&void 0!==r?r:{},u=i.reduce((function(e,t){var n,r=null!==(n=a[t.name])&&void 0!==n?n:zr;return e.total+=r,e.cols.push((0,l.Wm)("col",{style:"width: ".concat(r,"px")},null)),e}),{cols:[],total:60}),c=u.cols,s=u.total,d=t.value.map((function(t,r){var o=i.map((function(r){return(0,l.Wm)("td",null,[n.renderField(t[r.name],{parentProps:{disabled:e.disabled},renderItem:function(e,t,n){return n()}})])})),a=(0,l.Wm)("td",{class:"xform-bs-datatable-index"},[(0,l.Wm)("strong",null,[r+1])]);return(0,l.Wm)("tr",null,[a,o])}));return(0,l.Wm)("div",{class:"xform-bs-datatable xform-bs-datatable-view"},[(0,l.Wm)("div",{class:"table-responsive"},[(0,l.Wm)("table",{class:"table table-hover",style:{width:s+"px"}},[(0,l.Wm)("colgroup",null,[(0,l.Wm)("col",{style:"width: ".concat(60,"px")},null),c]),(0,l.Wm)("thead",null,[(0,l.Wm)("th",{class:"xform-bs-datatable-index"},[(0,l.Uk)("#")]),i.map((function(t){var n={"xform-bs-datatable-cell":!0,"xform-is-required":!e.disabled&&!t.disabled&&t.required};return(0,l.Wm)("th",{class:n},[(0,l.Wm)("span",null,[t.title])])}))]),(0,l.Wm)("tbody",null,[d])])])])}}});const Sl=r.gN.create({type:"datatable",title:"数据表格",icon:gl.Z,buttons:[ur.n,r.gN.BUTTON_COPY,r.gN.BUTTON_REMOVE],accept:["text","textarea","number","select","radio","checkbox","date"],setting:hl,preview:Wl,build:kl,view:Tl,onDragOver:function(e){var t=e.currentTarget;if(t.matches("."+Xr)){e.stopPropagation(),e.preventDefault();var n=e.context,r=n.directionX,l=n.moveMarkEl,o=n.getRootScopeEl,i=e.dragElement.contains(t);l(r,i?e.dragElement:e.target,i?o():t)}},onDrop:function(e){e.stopPropagation()},onCreate:function(e,t,n){n&&(e.attributes.colWidths={},e.attributes.layout="modal")},onSubmit:function(e){var t,n,r=null!==(t=null===(n=e.attributes)||void 0===n?void 0:n.colWidths)&&void 0!==t?t:{},l=e.fields.map((function(e){return e.name}));for(var o in r)l.indexOf(o)<0&&delete r[o];return e},onValueInit:function(e,t){if(!Array.isArray(t))return[];var n=e.fields;return t.map((function(t){return n.reduce((function(n,r){var l=r.clone(!0);return l.setValue(t[r.name]),l.setParent(e),n[r.name]=l,n}),{})}))},onValueSubmit:function(e){if(Array.isArray(e.value)){var t=e.fields;return e.value.map((function(e){return t.map((function(e){return e.name})).reduce((function(t,n){var r,l=e[n],o=null===(r=l.conf)||void 0===r?void 0:r.onValueSubmit;return t[l.name]="function"==typeof o?o(l):l.value,t}),{})}))}},validator:function(e,t,n){if(e.required&&(0,r.xb)(t))return Promise.reject("必填");var l=t.reduce((function(e,t){return e.concat(Object.values(t))}),[]).map((function(e){return n.mode==Pl.RECURSIVE?e.validate({mode:Pl.RECURSIVE}):e.invalid?Promise.reject():Promise.resolve()}));return Promise.allSettled(l).then((function(e){return e.some((function(e){return"rejected"===e.status}))?Promise.reject("请补全必填内容"):Promise.resolve()}))},onValidate:function(e){return(0,r.xb)(e.title)?Promise.reject("标题为空"):0==e.fields.length?Promise.reject("至少需要一个字段"):Promise.resolve()}});var Rl=[Pn,Sl,Ln,ar,Rr,tt,$t,Pt,Kr,De,Ye];const Al={use:function(){(0,r.sZ)(Rl)},remove:function(){Rl.forEach(r.QZ)}};var Cl={class:"xform-setting"},Vl=(0,l._)("header",null,"标题后缀：",-1),Dl=["value"],Il={class:"xform-setting"},Ul=(0,l._)("header",null,"空值显示为：",-1),jl=["value"],Nl={class:"xform-setting"},Ll=(0,l._)("header",null,"标题位置：",-1),Fl={class:"btn-group",role:"group"};var Zl=(0,r.hS)(),Ml=Zl.EVENTS,ql=Zl.LabelPosition,Yl=Object.values(ql);const Hl=(0,l.aZ)({name:"form-setting",props:{schema:{type:Object,required:!0}},emits:[Ml.UPDATE_PROP],setup:function(e,t){var n=t.emit;return{updateProp:function(e,t){n(Ml.UPDATE_PROP,{prop:e,value:t})},labelPosition:(0,l.Fl)((function(){var t=e.schema.labelPosition;return Yl.includes(t)?t:"left"}))}}}),Bl=(0,M.Z)(Hl,[["render",function(e,t,n,r,o,i){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("section",Cl,[Vl,(0,l._)("input",{value:e.schema.labelSuffix,type:"text",class:"form-control form-control-sm",placeholder:"请输入标题后缀...",onInput:t[0]||(t[0]=function(t){return e.updateProp("labelSuffix",t.target.value)})},null,40,Dl)]),(0,l._)("section",Il,[Ul,(0,l._)("input",{value:e.schema.viewerPlaceholder,type:"text",class:"form-control form-control-sm",placeholder:"查看表单时如果值为空，则显示输入值",onInput:t[1]||(t[1]=function(t){return e.updateProp("viewerPlaceholder",t.target.value)})},null,40,jl)]),(0,l._)("section",Nl,[Ll,(0,l._)("div",Fl,[(0,l._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"left"==e.labelPosition}]),onClick:t[2]||(t[2]=function(t){return e.updateProp("labelPosition","left")})},"左对齐",2),(0,l._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"top"==e.labelPosition}]),onClick:t[3]||(t[3]=function(t){return e.updateProp("labelPosition","top")})},"顶部对齐",2),(0,l._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"right"==e.labelPosition}]),onClick:t[4]||(t[4]=function(t){return e.updateProp("labelPosition","right")})},"右对齐",2)])])],64)}]]);const Gl={name:"bootstrap",version:"0.8.1",install:function(){return(0,r.QL)("setting_form",Bl),Al.use(),A.use(),function(){(0,r.ac)("setting_form"),Al.remove(),A.remove()}}}},3009:(e,t,n)=>{var r=n(7854),l=n(7293),o=n(1702),i=n(1340),a=n(3111).trim,u=n(1361),c=r.parseInt,s=r.Symbol,d=s&&s.iterator,f=/^[+-]?0x/i,p=o(f.exec),m=8!==c(u+"08")||22!==c(u+"0x16")||d&&!l((function(){c(Object(d))}));e.exports=m?function(e,t){var n=a(i(e));return c(n,t>>>0||(p(f,n)?16:10))}:c},1058:(e,t,n)=>{var r=n(2109),l=n(3009);r({global:!0,forced:parseInt!=l},{parseInt:l})}}]);