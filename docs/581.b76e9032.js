"use strict";(self.webpackChunkxform=self.webpackChunkxform||[]).push([[581],{5581:(e,t,l)=>{l.r(t),l.d(t,{default:()=>lo});var n=l(6252),o=l(3577);const i={class:"xform-setting"},M=(0,n._)("header",null,"标题后缀：",-1),a=["value"],u={class:"xform-setting"},s=(0,n._)("header",null,"空值显示为：",-1),r=["value"],c={class:"xform-setting"},d=(0,n._)("header",null,"标题位置：",-1),N={class:"btn-group",role:"group"};l(2023);var z=l(2262),D=l(4719);const{EVENTS:m,LabelPosition:j}=D.a9,g=Object.values(j),p=(0,n.aZ)({name:"xform-bs-setting",props:{schema:{type:Object,required:!0}},emits:[m.UPDATE_PROP],setup(e,t){let{emit:l}=t;return{updateProp(e,t){l(m.UPDATE_PROP,{prop:e,value:t})},labelPosition:(0,z.Fl)((()=>{const t=e.schema.labelPosition;return g.includes(t)?t:"left"}))}}});p.render=function(e,t,l,z,D,m){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("section",i,[M,(0,n._)("input",{value:e.schema.labelSuffix,type:"text",class:"form-control form-control-sm",placeholder:"请输入标题后缀...",onInput:t[0]||(t[0]=t=>e.updateProp("labelSuffix",t.target.value))},null,40,a)]),(0,n._)("section",u,[s,(0,n._)("input",{value:e.schema.viewerPlaceholder,type:"text",class:"form-control form-control-sm",placeholder:"查看表单时如果值为空，则显示输入值",onInput:t[1]||(t[1]=t=>e.updateProp("viewerPlaceholder",t.target.value))},null,40,r)]),(0,n._)("section",c,[d,(0,n._)("div",N,[(0,n._)("button",{type:"button",class:(0,o.C_)(["btn btn-sm btn-primary",{active:"left"==e.labelPosition}]),onClick:t[2]||(t[2]=t=>e.updateProp("labelPosition","left"))},"左对齐",2),(0,n._)("button",{type:"button",class:(0,o.C_)(["btn btn-sm btn-primary",{active:"top"==e.labelPosition}]),onClick:t[3]||(t[3]=t=>e.updateProp("labelPosition","top"))},"顶部对齐",2),(0,n._)("button",{type:"button",class:(0,o.C_)(["btn btn-sm btn-primary",{active:"right"==e.labelPosition}]),onClick:t[4]||(t[4]=t=>e.updateProp("labelPosition","right"))},"右对齐",2)])])],64)};const T=p;l(8674);var y=l(9963);const I=["id","name","placeholder","disabled"];const f=(0,n.aZ)({name:"xform-bs-text",props:{field:{type:D.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:e=>({value:(0,D.Hg)(e)})});f.render=function(e,t,l,o,i,M){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),id:e.field.uid,name:e.field.name,type:"text",class:"form-control form-control-sm",placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled},null,8,I)),[[y.nr,e.value]])};const b=f,A={class:"xform-bs-field-setting-prop"},x=(0,n._)("header",null,"默认值：",-1);const{BuiltInDefaultValueType:O,EVENTS:v}=D.a9;function w(e){return"_value"in e?e._value:e.value}function L(e){const t=e.checked,l=t?"_trueValue":"_falseValue";return l in e?e[l]:t}function E(e){return null==w(e)?e.checked:e.value}function C(e){const t=e.selectedIndex;return t<0?null:w(e.options[t])}function k(e,t,l,n){const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"build";const l=e.value,n=e.type;if("number"==n){const e=parseFloat(l);return isNaN(e)?l:e}if("select"==n)return C(e);if("checkbox"==n){const l='input[type="checkbox"][name="'.concat(e.name,'"]'),n=Array.from(document.querySelectorAll(l));return"setting"===t&&1==n.length?L(n[0]):n.filter((e=>e.checked)).map(E)}return e.value}(t.target,"setting");e(v.UPDATE_FIELD,{prop:l,value:o,scope:n})}function U(e,t,l){const o=(0,n.FN)();return(0,z.Fl)({get(){var n;const i=o.props.field,M=t?null==i||null===(n=i[t])||void 0===n?void 0:n[e]:null==i?void 0:i[e];return null!=M?M:l},set(l){const n=""==l?void 0:l;o.emit(v.UPDATE_FIELD,{prop:e,value:n,scope:t})}})}function Y(e){const t=U("defaultValue");return{useCompatType:function(){return(0,z.Fl)({get(){const l=t.value.type;return e.some((e=>e.value==l))?l:O.MANUAL},set(e){t.value.type=e,e!=O.MANUAL&&(t.value.value=void 0)}})},useCompatValue:function(e){return(0,z.Fl)({get:function(){return"function"==typeof e?e(t.value):t.value.value},set(e){t.value.value=""==e?void 0:e}})},useIsManual:function(){return(0,z.Fl)((()=>t.value.type==O.MANUAL))}}}function S(e){const t=(0,n.FN)(),l=(0,z.Fl)((()=>t.props.field.options));function o(l,n,o){t.emit(v.UPDATE_FIELD,{prop:l,value:n,scope:o}),"function"==typeof e&&e()}return{options:l,addOption:function(){const e=l.value;e.push({value:"选项".concat(e.length+1)}),o("options",e)},updateOption:function(e,t){const n=e.target.value;t.value=n,o("options",l.value)},removeOption:function(e){const t=l.value;if(t.length<=1)return;const n=t.indexOf(e);n>=0&&t.splice(n,1),o("options",t)},update:o}}const h={class:"xform-bs-field-setting-head"},Q={class:"xform-bs-field-setting-prop"},W=(0,n._)("header",null,"标题：",-1),P={key:0,class:"xform-bs-field-setting-prop"},_=(0,n._)("header",null,"提示：",-1),V={key:1,class:"xform-bs-field-setting-prop"},G=(0,n._)("header",null,"属性：",-1),Z={key:0,class:"custom-control custom-checkbox custom-control-inline"},H=["id","name"],R=["for"],B={class:"custom-control custom-checkbox custom-control-inline"},F=["id","name"],q=["for"],J={class:"custom-control custom-checkbox custom-control-inline"},K=["id"],X=["for"];l(6992),l(3948);const $={class:"xform-bs-field-setting-prop"},ee=(0,n._)("span",{title:"如果满足配置的条件则显示字段，否则隐藏字段"},"逻辑：",-1),te={class:"xform-bs-logic-main"},le={class:"xform-bs-logic-panel xform-is-scroll"},ne={class:"xform-bs-logic-common-rule"},oe=(0,n._)("h5",null,"通用规则",-1),ie={key:0,class:"text-secondary"},Me=["onClick"],ae={class:"xform-bs-logic-field-rule"},ue=(0,n._)("strong",null,"字段规则",-1),se={key:0},re=["onClick"],ce={key:0,class:"xform-bs-logic-field-rule-tip"},de={key:1},Ne={key:0,class:"text-secondary"},ze=["onClick"],De={class:"xform-bs-logic-graph xform-is-scroll"},me={key:0,class:"bg-danger text-white xform-bs-logic-errors"};l(1817);const je=["id"],ge={class:"modal-content"},pe={class:"modal-header"},Te={key:0,class:"modal-title"},ye=[(0,n._)("span",null,"×",-1)],Ie={class:"modal-body"},fe={class:"modal-footer"},be={key:0,class:"modal-footer-left"};function Ae(){return window.jQuery}const xe=(0,n.aZ)({name:"modal",inheritAttrs:!1,props:{title:{type:String,default:null},visible:{type:Boolean,default:!1},width:{type:String,default:"640px"}},emits:["update:visible","confirm","closed"],setup(e,t){let{emit:l}=t;const o="xform-bs-modal-".concat((0,D.jL)()),i=(0,z.iH)(!1);return(0,n.YP)((()=>e.visible),(()=>{var t;e.visible?(i.value=!0,(0,n.Y3)((()=>{Ae()("#"+o).modal("show")}))):Ae()("#"+o).modal("hide").one("hidden.bs.modal",(function(){i.value=!1,"function"==typeof t&&t(),l("closed")}))})),(0,n.Jd)((()=>{Ae()("#"+o).removeClass("fade").modal("hide").modal("dispose"),i.value=!1})),{id:o,close:function(){l("update:visible",!1)},confirm:function(){l("confirm")},rendered:i}}});xe.render=function(e,t,l,i,M,a){return(0,n.wg)(),(0,n.j4)(n.lR,{to:"body"},[e.rendered?((0,n.wg)(),(0,n.iD)("div",(0,n.dG)({key:0,id:e.id,class:"modal fade xform-bs-modal"},e.$attrs,{"data-backdrop":"static","data-keyboard":"false"}),[(0,n._)("div",{class:"modal-dialog modal-dialog-centered",style:(0,o.j5)({width:e.width})},[(0,n._)("div",ge,[(0,n._)("div",pe,[(0,n.WI)(e.$slots,"header",{},(()=>[e.title?((0,n.wg)(),(0,n.iD)("h5",Te,(0,o.zw)(e.title),1)):(0,n.kq)("",!0)])),(0,n._)("button",{type:"button",class:"close",onClick:t[0]||(t[0]=function(){return e.close&&e.close(...arguments)})},ye)]),(0,n._)("div",Ie,[(0,n.WI)(e.$slots,"default")]),(0,n._)("div",fe,[e.$slots["footer-left"]?((0,n.wg)(),(0,n.iD)("div",be,[(0,n.WI)(e.$slots,"footer-left")])):(0,n.kq)("",!0),(0,n._)("button",{type:"button",class:"btn btn-sm btn-link",onClick:t[1]||(t[1]=function(){return e.close&&e.close(...arguments)})},"关闭"),(0,n._)("button",{type:"button",class:"btn btn-sm btn-primary",onClick:t[2]||(t[2]=function(){return e.confirm&&e.confirm(...arguments)})},"保存")])])],4)],16,je)):(0,n.kq)("",!0)])};const Oe=xe,{LogicOperator:ve}=D.a9,we=[ve.AND,ve.OR,ve.NOT];function Le(e){const t=(0,D.jQ)(e);return null!=t&&!0===t.hasCondition}function Ee(e){var t;const l=(0,D.jQ)(e);return null==l?"N/A":null!==(t=l.description)&&void 0!==t?t:l.label}function Ce(e){return Le(e)?(0,n.Wm)("header",null,[(0,n.Uk)("如果"),(0,n.Wm)("strong",null,[Ee(e)]),(0,n.Uk)("条件被满足：")]):null}function ke(e,t){if(!Array.isArray(e.condition)||0==e.condition.length)return null;for(const l of e.condition){if(l==t)return e;const n=ke(l,t);if(null!=n)return n}return null}function Ue(e){if(null==e)return null;const t=e.condition;if(Array.isArray(t)){if(0==t.length)return!1;for(const e of t){const t=Ue(e);if(t)return t}}return!!e.name&&!(e.operator!=ve.EMPTY&&!e.value)}const Ye=(0,n.aZ)({name:"logic-rule-preview",props:{rule:{type:Object,default:null},field:{type:D.Wi,required:!0}},emits:["choose"],setup(e){const t=(0,D.j9)();function l(e,l){l.stopPropagation(),null!=e&&t.chooseField(e)}function o(t){var o,i;if(Le(t.operator))return null;const M=null===(o=e.field.parent)||void 0===o?void 0:o.find(t.name),a=null!=M?(0,n.Wm)("a",{href:"javascript:;",onClick:l.bind(null,M)},[M.title]):(0,n.Wm)("strong",null,[(0,n.Uk)("N/A")]);return(0,n.Wm)("div",{class:"xform-bs-logic-preview-content"},[(0,n.Wm)("span",null,[(0,n.Uk)("如果")]),a,(0,n.Wm)("span",null,[(0,n.Uk)("的值")]),(0,n.Wm)("strong",null,[Ee(t.operator)]),t.operator==ve.EMPTY?null:(0,n.Wm)("strong",null,[null!==(i=t.value)&&void 0!==i?i:"N/A"])])}return function(){const t=e.rule;if(null==t)return(0,n.Wm)("span",{class:"xform-bs-logic-rule-preview text-secondary"},[(0,n.Uk)("该字段尚未配置逻辑，请先添加一条规则")]);const l=Le(t.operator),i={"xform-bs-logic-rule-preview":!0,"has-condition":l},M=l?Array.isArray(t.condition)&&t.condition.length>0?t.condition.map((t=>(0,n.Wm)((0,n.up)("logic-rule-preview"),{rule:t,field:e.field},null))):(0,n.Wm)("div",{class:"xform-bs-logic-rule-preview text-secondary"},[(0,n.Uk)("请先添加一条子规则")]):null;return(0,n.Wm)("div",{class:i},[Ce(t.operator),o(t),M])}}}),Se=(0,n.aZ)({name:"logic-rule",props:{rule:{type:Object,default:null},selected:{type:Object,default:null},first:{type:String,default:null},last:{type:String,default:null},parent:{type:Object,default:null},field:{type:D.Wi,required:!0}},emits:["select","remove"],setup(e,t){let{emit:l}=t;function o(e){l("select",e)}function i(e){l("remove",e)}function M(t){t.stopPropagation(),o(e.rule)}function a(t){t.stopPropagation(),i(e.rule)}function u(t){t.stopPropagation();const l=e.parent;if(null==l)return;const n=e.rule,o=l.condition,i=o.indexOf(n),M=o.splice(i,1)[0];o.splice(i-1,0,M)}function s(t){t.stopPropagation();const l=e.parent;if(null==l)return;const n=e.rule,o=l.condition,i=o.indexOf(n),M=o.splice(i+1,1)[0];o.splice(i,0,M)}function r(t){return t?(0,n.Wm)("div",{class:"xform-bs-logic-rule-buttons"},["N"===e.first&&(0,n.Wm)("a",{href:"javascript:;",onClick:u,class:"text-primary"},[(0,n.Uk)("上移")]),"N"===e.last&&(0,n.Wm)("a",{href:"javascript:;",onClick:s,class:"text-primary"},[(0,n.Uk)("下移")]),(0,n.Wm)("a",{href:"javascript:;",onClick:a,class:"text-danger"},[(0,n.Uk)("删除")])]):null}return function(){const t=e.rule;if(null==t)return(0,n.Wm)("div",{class:"xform-bs-logic-empty"},[(0,n.Uk)("请先添加一条规则")]);const l=e.selected==e.rule,a=Le(t.operator),u={"xform-bs-logic-rule":!0,"has-condition":a,"is-selected":l},s=a?Array.isArray(t.condition)&&t.condition.length>0?t.condition.map(((l,M)=>(0,n.Wm)((0,n.up)("logic-rule"),{rule:l,field:e.field,selected:e.selected,onSelect:o,onRemove:i,first:0==M?"Y":"N",last:M==t.condition.length-1?"Y":"N",parent:t},null))):(0,n.Wm)("div",{class:"xform-bs-logic-tips"},[(0,n.Uk)("请先添加一条子规则")]):null,c=Ce(t.operator),d=function(e,t){if(Le(e.operator))return null;const l=e.operator==ve.EMPTY?null:(0,n.wy)((0,n.Wm)("input",{type:"text",class:"form-control",placeholder:"目标值","onUpdate:modelValue":t=>e.value=t},null),[[y.nr,e.value]]),o=t.previous().find((t=>t.name==e.name)),i=(0,D.jQ)(e.operator);return(0,n.Wm)("div",{class:"xform-bs-logic-rule-content"},[(0,n.Wm)("span",null,[(0,n.Uk)("如果")]),(0,n.Wm)("strong",null,[o?o.title:"N/A"]),(0,n.Wm)("span",null,[(0,n.Uk)("的值")]),(0,n.Wm)("strong",null,[i.label]),l])}(t,e.field);return(0,n.Wm)("div",{class:u,onClick:M},[c,d,r(l),s])}}}),he=(0,n.aZ)({name:"field-logic",props:{field:{type:D.Wi,required:!0}},setup(e){const t=(0,D.j9)(),l=(0,z.iH)(!1),o=(0,z.iH)(null),i=(0,z.iH)(null),M=(0,z.iH)(null),a=(0,z.iH)(null),u=(0,z.iH)(!1),s=(0,z.Fl)((()=>null==i.value&&null!=o.value||null!=i.value&&!Le(i.value.operator)));const r=(0,z.Fl)((()=>e.field.previous().filter((e=>{var t;const l=null===(t=e.conf)||void 0===t?void 0:t.operators;return!(!1===l||Array.isArray(l)&&0==l.length)})))),c=(0,z.Fl)((()=>{var e;if(null==M.value)return[];const t=null===(e=M.value.conf)||void 0===e?void 0:e.operators;return(0,D.vU)(Array.isArray(t)?t:null).filter((e=>we.indexOf(e.value)<0))}));return{commonOperators:(0,z.Fl)((()=>(0,D.vU)(we))),disabled:s,errorMessage:a,logic:o,fieldOperators:c,previousFields:r,selectedField:M,selectedRule:i,showErrorMessage:u,visible:l,add:function(e){const t=M.value;M.value=null;const l=function(e,t){return Le(e)?{operator:e,condition:[]}:{operator:e,name:t.name,value:null}}(e,t);if(null==o.value)return o.value=l,void(i.value=l);Le(i.value.operator)?i.value.condition.push(l):i.value=l},remove:function(){const e=i.value;if(o.value==e)o.value=null;else{const t=ke(o.value,e),l=t.condition.indexOf(e);l>=0&&t.condition.splice(l,1)}i.value=null},save:function(){if(!Ue(o.value)){let e=!1;if(t.emit("message",{type:"logic.validate",valid:!1,title:"字段逻辑验证失败",content:(0,n.Wm)("div",{class:"xform-bs-logic-error-content"},[(0,n.Wm)("h5",null,[(0,n.Uk)("如果存在以下未填写字段，请先补全：")]),(0,n.Wm)("p",null,[(0,n.Uk)("-"),(0,n.Wm)("strong",null,[(0,n.Uk)("目标字段")])]),(0,n.Wm)("p",null,[(0,n.Uk)("-"),(0,n.Wm)("strong",null,[(0,n.Uk)("目标值")])]),(0,n.Wm)("p",null,[(0,n.Uk)("-"),(0,n.Wm)("strong",null,[(0,n.Uk)("子规则")])])]),message:"如果存在以下未填写字段，请先补全：\n - 目标字段\n - 目标值\n - 子规则",preventDefault:()=>e=!0}),e)return;return a.value="字段逻辑验证失败，请补全以下内容：目标字段、目标值、子规则",u.value=!0,setTimeout((()=>{u.value=!1}),3500)}t.updateField(e.field,{prop:"logic",value:o.value}),l.value=!1},selectField:function(e){s.value||(M.value=e)},selectRule:function(e){i.value=e,M.value=null},showModal:function(){var t;const n=JSON.parse(JSON.stringify(null!==(t=e.field.logic)&&void 0!==t?t:null));o.value=n,i.value=n,M.value=null,l.value=!0}}},components:{[Oe.name]:Oe,[Se.name]:Se,[Ye.name]:Ye}});he.render=function(e,t,l,i,M,a){const u=(0,n.up)("logic-rule-preview"),s=(0,n.up)("logic-rule"),r=(0,n.up)("modal");return(0,n.wg)(),(0,n.iD)("section",$,[(0,n._)("header",null,[ee,(0,n._)("button",{type:"button",class:"btn btn-link is-logic-btn",onClick:t[0]||(t[0]=function(){return e.showModal&&e.showModal(...arguments)})},"配置")]),(0,n.Wm)(u,{rule:e.field.logic,field:e.field},null,8,["rule","field"]),(0,n.Wm)(r,{title:"配置逻辑",width:"840px",class:"xform-bs-logic-modal",visible:e.visible,"onUpdate:visible":t[2]||(t[2]=t=>e.visible=t),onConfirm:e.save},{"footer-left":(0,n.w5)((()=>[e.showErrorMessage?((0,n.wg)(),(0,n.iD)("div",me,(0,o.zw)(e.errorMessage),1)):(0,n.kq)("",!0)])),default:(0,n.w5)((()=>[(0,n._)("div",te,[(0,n._)("div",le,[(0,n._)("div",ne,[oe,(0,n._)("div",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.commonOperators,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.value,class:(0,o.C_)(["xform-bs-logic-operator",{"xform-is-disabled":e.disabled}])},[(0,n._)("strong",null,(0,o.zw)(t.label),1),t.code?((0,n.wg)(),(0,n.iD)("small",ie,(0,o.zw)(t.code),1)):(0,n.kq)("",!0),(0,n._)("button",{type:"button",class:"btn btn-link btn-sm",onClick:l=>e.add(t.value)},"添加",8,Me)],2)))),128))])]),(0,n._)("div",ae,[(0,n._)("h5",null,[ue,null!=e.selectedField?((0,n.wg)(),(0,n.iD)("button",{key:0,type:"button",class:"btn btn-link",onClick:t[1]||(t[1]=t=>e.selectedField=null)},"返回")):(0,n.kq)("",!0)]),null==e.selectedField?((0,n.wg)(),(0,n.iD)("div",se,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.previousFields,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.name,class:(0,o.C_)(["xform-bs-logic-field",{"xform-is-selected":t==e.selectedField,"xform-is-disabled":e.disabled}]),onClick:l=>e.selectField(t)},[(0,n._)("strong",null,(0,o.zw)(t.title),1)],10,re)))),128)),0==e.previousFields.length?((0,n.wg)(),(0,n.iD)("div",ce,"暂无可用的字段规则")):(0,n.kq)("",!0)])):(0,n.kq)("",!0),e.fieldOperators.length>0?((0,n.wg)(),(0,n.iD)("div",de,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.fieldOperators,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.value,class:(0,o.C_)(["xform-bs-logic-operator",{"xform-is-disabled":e.disabled}])},[(0,n._)("strong",null,(0,o.zw)(t.label),1),t.code?((0,n.wg)(),(0,n.iD)("small",Ne,(0,o.zw)(t.code),1)):(0,n.kq)("",!0),(0,n._)("button",{type:"button",class:"btn btn-link btn-sm",onClick:l=>e.add(t.value)},"添加",8,ze)],2)))),128))])):(0,n.kq)("",!0)])]),(0,n._)("div",De,[(0,n.Wm)(s,{rule:e.logic,field:e.field,selected:e.selectedRule,onSelect:e.selectRule,onRemove:e.remove},null,8,["rule","field","selected","onSelect","onRemove"])])])])),_:1},8,["visible","onConfirm"])])};const Qe=he,We=(0,n.aZ)({name:"field-setting",props:{field:{type:D.Wi,required:!0},placeholder:{type:Boolean,default:!0},required:{type:Boolean,default:!0},logic:{type:Boolean,default:!0},attributes:{type:Boolean,default:!0}},setup:e=>({fieldRef:(0,z.Vh)(e,"field"),allowLogic:(0,z.Fl)((()=>!0===(0,D.iE)().logic))}),components:{[Qe.name]:Qe}});We.render=function(e,t,l,i,M,a){const u=(0,n.up)("field-logic");return(0,n.wg)(),(0,n.iD)("div",{class:(0,o.C_)("xform-bs-field-setting xform-bs-".concat(e.fieldRef.type,"-setting"))},[(0,n._)("h3",h,(0,o.zw)(e.field.conf.title),1),(0,n._)("section",Q,[W,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control form-control-sm",placeholder:"[必填] 请输入标题...","onUpdate:modelValue":t[0]||(t[0]=t=>e.fieldRef.title=t)},null,512),[[y.nr,e.fieldRef.title]])]),e.placeholder?((0,n.wg)(),(0,n.iD)("section",P,[_,(0,n.wy)((0,n._)("textarea",{class:"form-control form-control-sm",placeholder:"[可选] 请输入提示信息...",rows:"3","onUpdate:modelValue":t[1]||(t[1]=t=>e.fieldRef.placeholder=t)},null,512),[[y.nr,e.fieldRef.placeholder]])])):(0,n.kq)("",!0),e.attributes?((0,n.wg)(),(0,n.iD)("section",V,[G,e.required?((0,n.wg)(),(0,n.iD)("div",Z,[(0,n.wy)((0,n._)("input",{id:"".concat(e.field.name,"-required"),name:"".concat(e.field.name,"-required"),type:"checkbox",class:"custom-control-input","onUpdate:modelValue":t[2]||(t[2]=t=>e.fieldRef.required=t)},null,8,H),[[y.e8,e.fieldRef.required]]),(0,n._)("label",{class:"custom-control-label",for:"".concat(e.field.name,"-required"),title:"勾选则该字段在表单提交时必须填写"},"必填",8,R)])):(0,n.kq)("",!0),(0,n._)("div",B,[(0,n.wy)((0,n._)("input",{id:"".concat(e.field.name,"-disabled"),name:"".concat(e.field.name,"-disabled"),type:"checkbox",class:"custom-control-input","onUpdate:modelValue":t[3]||(t[3]=t=>e.fieldRef.disabled=t)},null,8,F),[[y.e8,e.fieldRef.disabled]]),(0,n._)("label",{class:"custom-control-label",for:"".concat(e.field.name,"-disabled"),title:"勾选则该字段在表单中无法编辑, 也不参与表单验证"},"禁用",8,q)]),(0,n._)("div",J,[(0,n.wy)((0,n._)("input",{id:"".concat(e.field.name,"-hidden"),name:"`${field.name}-hidden`",type:"checkbox",class:"custom-control-input","onUpdate:modelValue":t[4]||(t[4]=t=>e.fieldRef.hidden=t)},null,8,K),[[y.e8,e.fieldRef.hidden]]),(0,n._)("label",{class:"custom-control-label",for:"".concat(e.field.name,"-hidden"),title:"勾选则该字段将不会再表单中显示"},"隐藏",8,X)]),(0,n.WI)(e.$slots,"attributes")])):(0,n.kq)("",!0),(0,n.WI)(e.$slots,"default"),e.allowLogic?((0,n.wg)(),(0,n.j4)(u,{key:2,field:e.fieldRef,"onUpdate:field":t[5]||(t[5]=t=>e.fieldRef=t)},null,8,["field"])):(0,n.kq)("",!0)],2)};const Pe=We,{EVENTS:_e}=(0,D.hS)(),Ve=(0,n.aZ)({name:"xform-bs-text-setting",props:{field:D.Wi},emits:[_e.UPDATE_FIELD],setup:()=>({compatValue:Y([]).useCompatValue()}),components:{[Pe.name]:Pe}});Ve.render=function(e,t,l,o,i,M){const a=(0,n.up)("field-setting");return(0,n.wg)(),(0,n.j4)(a,{field:e.field},{default:(0,n.w5)((()=>[(0,n._)("section",A,[x,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=t=>e.compatValue=t),placeholder:"[可选] 如果字段没有填写，默认为设定的值"},null,512),[[y.nr,e.compatValue]])])])),_:1},8,["field"])};const Ge=Ve,{LogicOperator:Ze}=D.a9,He=D.w1.create({icon:"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgPgogIDxwYXRoIGZpbGw9IiMzMzMiIGQ9Ik05Mi41Njk2IDc0MS4zNzZoODMwLjEyMjY2NjY3VjI4Mi42MjRoLTgzMC4xMjI2NjY2N3Y0NTguNzUyek00OC44Nzg5MzMzMyAyMzguOTMzMzMzMzNoOTE3LjUwNHY1NDYuMTMzMzMzMzRINDguODc4OTMzMzNWMjM4LjkzMzMzMzMzek0xNzMuMzk3MzMzMzMgNDAyLjc3MzMzMzMzdjIxOC40NTMzMzMzNGMwIDEzLjEwNzIgOC43MzgxMzMzMyAyMS44NDUzMzMzMyAyMS44NDUzMzMzNCAyMS44NDUzMzMzM3MyMS44NDUzMzMzMy04LjczODEzMzMzIDIxLjg0NTMzMzMzLTIxLjg0NTMzMzMzVjQwMi43NzMzMzMzM2MwLTEzLjEwNzItOC43MzgxMzMzMy0yMS44NDUzMzMzMy0yMS44NDUzMzMzMy0yMS44NDUzMzMzM3MtMjEuODQ1MzMzMzMgOC43MzgxMzMzMy0yMS44NDUzMzMzNCAyMS44NDUzMzMzM3oiPjwvcGF0aD4KPC9zdmc+",type:"text",title:"单行文本",setting:Ge,build:b,validator:(e,t)=>e.required&&(0,D.xb)(t)?Promise.reject("必填"):Promise.resolve(),operators:[Ze.EQ,Ze.NE,Ze.EMPTY,Ze.CONTAINS]}),Re=["id","name","placeholder","disabled"];const Be=(0,n.aZ)({name:"xform-bs-textarea",props:{field:{type:D.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:e=>({value:(0,D.Hg)(e)})});Be.render=function(e,t,l,o,i,M){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),id:e.field.uid,rows:"3",name:e.field.name,class:"form-control form-control-sm",placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled},null,8,Re)),[[y.nr,e.value]])};const Fe=Be,qe={class:"xform-bs-field-setting-prop"},Je=(0,n._)("header",null,"默认值：",-1);const{EVENTS:Ke}=(0,D.hS)(),Xe=(0,n.aZ)({name:"xform-bs-textarea-setting",props:{field:D.Wi},emits:[Ke.UPDATE_FIELD],setup:()=>({compatValue:Y([]).useCompatValue()}),components:{[Pe.name]:Pe}});Xe.render=function(e,t,l,o,i,M){const a=(0,n.up)("field-setting");return(0,n.wg)(),(0,n.j4)(a,{field:e.field},{default:(0,n.w5)((()=>[(0,n._)("section",qe,[Je,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=t=>e.compatValue=t),placeholder:"[可选] 如果字段没有填写，默认为设定的值"},null,512),[[y.nr,e.compatValue]])])])),_:1},8,["field"])};const $e=Xe,{LogicOperator:et}=D.a9,tt=D.w1.create({icon:"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgPHBhdGggZmlsbD0iIzMzMyIgZD0iTTkyNi43MiA1NzQuMzEwNEw3MzEuMzQwOCA3NTcuNzZoNjkuMjIyNGwxMjYuMTU2OC0xMjEuNjUxMnYtNjEuNzk4NHpNNjY4LjcyMzIgNzU3Ljc2bDI1OC4wNDgtMjQ0LjIyNFYyNTAuODhIOTcuMjh2NTA2Ljg4aDU3MS40NDMyeiBtMjU4LjA0OC01NS4yOTZsLTU3LjI5MjggNTUuMjk2SDkyNi43MnYtNTUuMjk2ek0xODkuNDQgMzQzLjA0aDQ2LjA4djI3Ni40OGgtNDYuMDhWMzQzLjA0ek01MS4yIDIwNC44aDkyMS42djU5OS4wNEg1MS4yVjIwNC44eiI+PC9wYXRoPgo8L3N2Zz4=",type:"textarea",title:"多行文本",setting:$e,build:Fe,validator:(e,t)=>e.required&&(0,D.xb)(t)?Promise.reject("必填"):Promise.resolve(),operators:[et.EQ,et.NE,et.EMPTY,et.CONTAINS]}),lt={class:"xform-bs-field-setting-prop"},nt=(0,n._)("header",null,"默认值：",-1),ot={class:"custom-control custom-checkbox custom-control-inline"},it=["id","name"],Mt=["for"];const{EVENTS:at}=(0,D.hS)(),ut=(0,n.aZ)({name:"xform-bs-number-setting",props:{field:D.Wi},emits:[at.UPDATE_FIELD],setup(){const e=Y([]);return{integer:U("integer","attributes"),compatValue:e.useCompatValue()}},components:{[Pe.name]:Pe}});ut.render=function(e,t,l,o,i,M){const a=(0,n.up)("field-setting");return(0,n.wg)(),(0,n.j4)(a,{field:e.field},{attributes:(0,n.w5)((()=>[(0,n._)("div",ot,[(0,n.wy)((0,n._)("input",{id:"".concat(e.field.name,"-integer"),name:"".concat(e.field.name,"-integer"),type:"checkbox",class:"custom-control-input","onUpdate:modelValue":t[1]||(t[1]=t=>e.integer=t)},null,8,it),[[y.e8,e.integer]]),(0,n._)("label",{class:"custom-control-label",for:"".concat(e.field.name,"-integer"),title:"勾选则只允许输入整数"},"整数",8,Mt)])])),default:(0,n.w5)((()=>[(0,n._)("section",lt,[nt,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=t=>e.compatValue=t),placeholder:"[可选] 如果字段没有填写，默认为设定的值"},null,512),[[y.nr,e.compatValue,void 0,{number:!0}]])])])),_:1},8,["field"])};const st=ut,{LogicOperator:rt}=D.a9,ct=(0,n.aZ)({name:"xform-bs-number",props:{field:{type:D.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup(e){const t=(0,D.Hg)(e);return function(){return(0,n.wy)((0,n.Wm)("input",{id:e.field.uid,name:e.field.name,type:"number","onUpdate:modelValue":e=>t.value=e,class:"form-control form-control-sm",placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled},null),[[y.nr,t.value,void 0,{number:!0}]])}}}),dt=D.w1.create({icon:"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgPHBhdGggZmlsbD0iIzMzMyIgZD0iTTg5NiAyMjRIMTI4Yy0zNS4yIDAtNjQgMjguOC02NCA2NHY0NDhjMCAzNS4yIDI4LjggNjQgNjQgNjRoNzY4YzM1LjIgMCA2NC0yOC44IDY0LTY0VjI4OGMwLTM1LjItMjguOC02NC02NC02NHogbTAgNDgwYzAgMTkuMi0xMi44IDMyLTMyIDMySDE2MGMtMTkuMiAwLTMyLTEyLjgtMzItMzJWMzIwYzAtMTkuMiAxMi44LTMyIDMyLTMyaDcwNGMxOS4yIDAgMzIgMTIuOCAzMiAzMnYzODR6Ij48L3BhdGg+CiAgPHBhdGggZmlsbD0iIzMzMyIgZD0iTTI5MS4yIDQxMi44Yy0xMi44IDYuNC0yMi40IDEyLjgtMzUuMiAxNnY0MS42YzIyLjQtNi40IDQxLjYtMTYgNTQuNC0yOC44VjY0MGgzOC40VjM5My42SDMyMGMtNi40IDMuMi0xOS4yIDEyLjgtMjguOCAxOS4yek00ODkuNiA1NjBjMjIuNC0xNiA0MS42LTI4LjggNDgtMzguNCAxNi0xNiAyMi40LTM4LjQgMjIuNC01Ny42IDAtMjIuNC02LjQtMzguNC0yMi40LTU0LjQtMTYtMTIuOC0zNS4yLTE5LjItNTcuNi0xOS4yLTI1LjYgMC00OCA5LjYtNjAuOCAyNS42LTE2IDE2LTIyLjQgMzguNC0yMi40IDY3LjJoMzguNGMwLTE5LjIgMy4yLTM1LjIgMTIuOC00NC44IDYuNC05LjYgMTkuMi0xNiAzMi0xNnMyNS42IDMuMiAzMiA5LjZjNi40IDYuNCA5LjYgMTYgOS42IDI4LjhzLTYuNCAyNS42LTE2IDM4LjRjLTYuNCA2LjQtMTYgMTYtMzIgMjguOC0yOC44IDE5LjItNDQuOCAzNS4yLTU0LjQgNDQuOC0xNiAxOS4yLTIyLjQgNDEuNi0yMi40IDY0aDE2Ni40di0zNS4ySDQ0NC44YzYuNC0xMi44IDIyLjQtMjUuNiA0NC44LTQxLjZ6IG0yMzMuNi01NC40YzI1LjYtOS42IDM4LjQtMjUuNiAzOC40LTU0LjQgMC0yMi40LTYuNC0zOC40LTIyLjQtNTEuMi0xNi0xMi44LTM1LjItMTkuMi01Ny42LTE5LjJTNjQwIDM4Ny4yIDYyNCA0MDBjLTE2IDEyLjgtMjUuNiAzMi0yNS42IDU3LjZoMzguNGMwLTE2IDYuNC0yNS42IDEyLjgtMzIgNi40LTYuNCAxOS4yLTkuNiAzMi05LjZzMjUuNiAzLjIgMzIgOS42YzYuNCA2LjQgOS42IDE2IDkuNiAyOC44cy0zLjIgMjIuNC05LjYgMjguOGMtNi40IDYuNC0xOS4yIDkuNi0zMiA5LjZoLTE2djI4LjhoMTZjMTYgMCAyNS42IDMuMiAzNS4yIDkuNiA5LjYgNi40IDEyLjggMTYgMTIuOCAzMiAwIDEyLjgtMy4yIDIyLjQtMTIuOCAyOC44LTkuNiA5LjYtMTkuMiAxMi44LTM1LjIgMTIuOC0xMi44IDAtMjUuNi0zLjItMzItMTIuOC05LjYtOS42LTEyLjgtMjIuNC0xNi0zOC40aC0zOC40YzMuMiAyOC44IDEyLjggNDggMjguOCA2NCAxNiAxMi44IDM1LjIgMTkuMiA2MC44IDE5LjIgMjUuNiAwIDQ4LTYuNCA2NC0yMi40IDE2LTE2IDIyLjQtMzIgMjIuNC01NC40IDAtMTYtMy4yLTI1LjYtMTIuOC0zNS4yLTkuNi02LjQtMjIuNC0xNi0zNS4yLTE5LjJ6Ij48L3BhdGg+Cjwvc3ZnPg==",type:"number",title:"数字",setting:st,build:ct,validator:(e,t)=>e.required&&(0,D.xb)(t)?Promise.reject("必填"):e.attributes.integer&&!/^[-+]?[1-9]\d*$/.test(t+"")?Promise.reject("请输入整数"):Promise.resolve(),operators:[rt.LT,rt.LTE,rt.GT,rt.GTE,rt.EQ,rt.NE,rt.EMPTY]}),Nt=["id","name","disabled"],zt={class:"xform-bs-is-placeholer",value:""},Dt=["value"];const mt=(0,n.aZ)({name:"xform-bs-select",props:{field:{type:D.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup(e){const t=(0,D.Hg)(e,"");return{value:t,className:(0,z.Fl)((()=>({"custom-select":!0,"custom-select-sm":!0,"xform-bs-select":!0,"xform-bs-is-empty":null==t||"string"==typeof t.value&&0==t.value.length})))}}});mt.render=function(e,t,l,i,M,a){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),id:e.field.uid,name:e.field.name,class:(0,o.C_)(e.className),disabled:e.disabled||e.field.disabled},[(0,n._)("option",zt,"---- "+(0,o.zw)(e.field.placeholder||"请选择")+" ----",1),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.field.options,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e.value,value:e.value},(0,o.zw)(e.value),9,Dt)))),128))],10,Nt)),[[y.bM,e.value]])};const jt=mt,gt={class:"xform-bs-field-setting-prop"},pt=(0,n._)("header",null,"选项：",-1),Tt=["value","onInput"],yt=["onClick","disabled"],It={class:"xform-bs-field-setting-prop"},ft=(0,n._)("header",null,"默认值：",-1),bt=["value"],At=(0,n._)("option",{value:""},"-- 请选择--",-1),xt=["value"];l(4747);function Ot(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function vt(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}const{BuiltInDefaultValueType:wt,EVENTS:Lt}=(0,D.hS)(),Et=(0,n.aZ)({name:"xform-bs-select-setting",props:{field:D.Wi},emits:[Lt.UPDATE_FIELD],setup(){const e=[{value:wt.MANUAL,label:"手动指定"},{value:wt.OPTION_FIRST,label:"首选项"}],t=S((function(){if(!n.value)return;const e=t.options.value,l=i.value;i.value=e.some((e=>e.value==l))?l:void 0})),l=Y(e),n=l.useIsManual(),o=l.useCompatType(),i=l.useCompatValue((function(e){return e.value||""}));return function(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(l),!0).forEach((function(t){vt(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):Ot(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}({compatType:o,compatValue:i,defTypes:e,isManual:n},t)},components:{[Pe.name]:Pe}});(Et.__cssModules={}).classes={defaultValue:"WeQO5w9X_UHvraLFvkzS"},Et.render=function(e,t,l,i,M,a){const u=(0,n.up)("field-setting");return(0,n.wg)(),(0,n.j4)(u,{field:e.field},{default:(0,n.w5)((()=>[(0,n._)("section",gt,[pt,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.options,((t,l)=>((0,n.wg)(),(0,n.iD)("div",{key:l,class:"xform-bs-setting-option"},[(0,n._)("input",{value:t.value,class:"form-control form-control-sm",placeholder:"请输入选项内容",onInput:l=>e.updateOption(l,t)},null,40,Tt),(0,n._)("button",{type:"button",class:"btn btn-link text-danger",onClick:l=>e.removeOption(t),disabled:e.field.options.length<=1},"删除",8,yt)])))),128)),(0,n._)("button",{type:"text",class:"btn btn-link btn-sm bs-btn-text",onClick:t[0]||(t[0]=function(){return e.addOption&&e.addOption(...arguments)})},"添加选项")]),(0,n._)("section",It,[ft,(0,n._)("div",{class:(0,o.C_)(e.classes.defaultValue)},[(0,n.wy)((0,n._)("select",{class:"form-control form-control-sm","onUpdate:modelValue":t[1]||(t[1]=t=>e.compatType=t)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.defTypes,((e,t)=>((0,n.wg)(),(0,n.iD)("option",{key:t,value:e.value},(0,o.zw)(e.label||e.value),9,bt)))),128))],512),[[y.bM,e.compatType]]),e.isManual?(0,n.wy)(((0,n.wg)(),(0,n.iD)("select",{key:0,"onUpdate:modelValue":t[2]||(t[2]=t=>e.compatValue=t),class:"form-control form-control-sm"},[At,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.options,((e,t)=>((0,n.wg)(),(0,n.iD)("option",{key:t,value:e.value},(0,o.zw)(e.label||e.value),9,xt)))),128))],512)),[[y.bM,e.compatValue]]):(0,n.kq)("",!0)],2)])])),_:1},8,["field"])};const Ct=Et,{LogicOperator:kt}=D.a9,Ut=D.w1.create({icon:"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgPgogIDxwYXRoIGZpbGw9IiMzMzMiIGQ9Ik05MC4xMjUgMzcxLjM3NXYyODEuMjVoODQzLjc1VjM3MS4zNzVIOTAuMTI1eiBtLTI4LjEyNS0yOC4xMjVoOTAwdjMzNy41SDYyVjM0My4yNXoiPjwvcGF0aD4KICA8cGF0aCBmaWxsPSIjMzMzIiBkPSJNODc3LjYyNSA1NDAuMTI1bC00Mi4xODc1IDQyLjE4NzVMNzkzLjI1IDU0MC4xMjV6TTg3Ny42MjUgNDgzLjg3NWwtNDIuMTg3NS00Mi4xODc1TDc5My4yNSA0ODMuODc1ek0xNzQuNSA0ODMuODc1aDUzNC4zNzV2NTYuMjVIMTc0LjV6Ij48L3BhdGg+Cjwvc3ZnPg==",type:"select",title:"下拉选择",setting:Ct,build:jt,validator:(e,t)=>e.required&&(0,D.xb)(t)?Promise.reject("必填"):Promise.resolve(),onCreate(e,t,l){const n=Array.isArray(t.options)?t.options:[];l&&n.push({value:"选项1"}),e.options=n},operators:[kt.EQ,kt.NE,kt.EMPTY,kt.CONTAINS]}),Yt={class:"xform-bs-radio"},St=["id","name","value","disabled"],ht=["for"];const Qt=(0,n.aZ)({name:"xform-bs-radio",props:{field:{type:D.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:e=>({value:(0,D.Hg)(e),radioClassName:(0,z.Fl)((()=>{const t=["custom-control","custom-radio"];return"inline"==e.field.attributes.layout&&t.push("custom-control-inline"),t}))})});Qt.render=function(e,t,l,i,M,a){return(0,n.wg)(),(0,n.iD)("div",Yt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.field.options,((l,i)=>((0,n.wg)(),(0,n.iD)("div",{key:i,class:(0,o.C_)(e.radioClassName)},[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),id:e.field.uid+"_"+i,name:e.field.name,value:l.value,type:"radio",class:"custom-control-input",disabled:e.disabled||e.field.disabled},null,8,St),[[y.G2,e.value]]),(0,n._)("label",{class:"custom-control-label",for:e.field.uid+"_"+i},(0,o.zw)(l.value),9,ht)],2)))),128))])};const Wt=Qt,Pt={class:"xform-bs-field-setting-prop"},_t=(0,n._)("header",null,"布局：",-1),Vt={class:"btn-group",role:"group"},Gt={class:"xform-bs-field-setting-prop"},Zt=(0,n._)("header",null,"选项：",-1),Ht=["value","onInput"],Rt=["onClick","disabled"],Bt={class:"xform-bs-field-setting-prop"},Ft=(0,n._)("header",null,"默认值：",-1),qt=["value"],Jt=(0,n._)("option",{value:""},"-- 请选择--",-1),Kt=["value"];function Xt(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function $t(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}const{BuiltInDefaultValueType:el,EVENTS:tl}=(0,D.hS)(),ll=(0,n.aZ)({name:"xform-bs-radio-setting",props:{field:D.Wi},emits:[tl.UPDATE_FIELD],setup(){const e=[{value:el.MANUAL,label:"手动指定"},{value:el.OPTION_FIRST,label:"首选项"}],t=S((function(){if(!n.value)return;const e=t.options.value,l=i.value;i.value=e.some((e=>e.value==l))?l:void 0})),l=Y(e),n=l.useIsManual(),o=l.useCompatType(),i=l.useCompatValue((function(e){return e.value||""}));return function(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(l),!0).forEach((function(t){$t(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):Xt(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}({compatType:o,compatValue:i,defTypes:e,isManual:n},t)},components:{[Pe.name]:Pe}});(ll.__cssModules={}).classes={defaultValue:"bG5LBQCB28cgHGcSMTqP"},ll.render=function(e,t,l,i,M,a){const u=(0,n.up)("field-setting");return(0,n.wg)(),(0,n.j4)(u,{field:e.field,placeholder:!1},{default:(0,n.w5)((()=>[(0,n._)("section",Pt,[_t,(0,n._)("div",Vt,[(0,n._)("button",{type:"button",class:(0,o.C_)(["btn btn-sm btn-primary",{active:"inline"==e.field.attributes.layout}]),onClick:t[0]||(t[0]=t=>e.update("layout","inline","attributes"))}," 行内 ",2),(0,n._)("button",{type:"button",class:(0,o.C_)(["btn btn-sm btn-primary",{active:"block"==e.field.attributes.layout}]),onClick:t[1]||(t[1]=t=>e.update("layout","block","attributes"))}," 换行 ",2)])]),(0,n._)("section",Gt,[Zt,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.options,((t,l)=>((0,n.wg)(),(0,n.iD)("div",{key:l,class:"xform-bs-setting-option"},[(0,n._)("input",{value:t.value,class:"form-control form-control-sm",placeholder:"请输入选项内容",onInput:l=>e.updateOption(l,t)},null,40,Ht),(0,n._)("button",{type:"button",class:"btn btn-link text-danger",onClick:l=>e.removeOption(t),disabled:e.options.length<=1},"删除",8,Rt)])))),128)),(0,n._)("button",{type:"text",class:"btn btn-sm btn-link bs-btn-text",onClick:t[2]||(t[2]=function(){return e.addOption&&e.addOption(...arguments)})},"添加选项")]),(0,n._)("section",Bt,[Ft,(0,n._)("div",{class:(0,o.C_)(e.classes.defaultValue)},[(0,n.wy)((0,n._)("select",{class:"form-control form-control-sm","onUpdate:modelValue":t[3]||(t[3]=t=>e.compatType=t)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.defTypes,((e,t)=>((0,n.wg)(),(0,n.iD)("option",{key:t,value:e.value},(0,o.zw)(e.label||e.value),9,qt)))),128))],512),[[y.bM,e.compatType]]),e.isManual?(0,n.wy)(((0,n.wg)(),(0,n.iD)("select",{key:0,"onUpdate:modelValue":t[4]||(t[4]=t=>e.compatValue=t),class:"form-control form-control-sm"},[Jt,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.options,((e,t)=>((0,n.wg)(),(0,n.iD)("option",{key:t,value:e.value},(0,o.zw)(e.label||e.value),9,Kt)))),128))],512)),[[y.bM,e.compatValue]]):(0,n.kq)("",!0)],2)])])),_:1},8,["field"])};const nl=ll,{LogicOperator:ol}=D.a9,il=D.w1.create({icon:"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgPHBhdGggZmlsbD0iIzMzMyIgZD0iTTUwOC4yMTk4MjQyMiA3Ni43MzU3NDIxOWMtMjM4LjIxMjU5NzY2IDAtNDMyIDE5My43ODc0MDIzNC00MzIgNDMyczE5My43ODc0MDIzNCA0MzIgNDMyIDQzMiA0MzItMTkzLjc4NzQwMjM0IDQzMi00MzItMTkzLjc4NzQwMjM0LTQzMi00MzItNDMyek01MDguMjE5ODI0MjIgOTA0LjczNTc0MjE5Yy0yMTguMzUxOTUzMTIgMC0zOTYtMTc3LjY0ODA0Njg4LTM5Ni0zOTZzMTc3LjY0ODA0Njg4LTM5NiAzOTYtMzk2IDM5NiAxNzcuNjQ4MDQ2ODggMzk2IDM5Ni0xNzcuNjQ4MDQ2ODggMzk2LTM5NiAzOTZ6Ij48L3BhdGg+CiAgPHBhdGggZmlsbD0iIzMzMyIgZD0iTTM1My4yMTU5MTc5NyA1MDguNzM1NzQyMTljMCA4NS42MDYzNDc2NiA2OS4zOTc1NTg1OSAxNTUuMDA0Nzg1MTYgMTU1LjAwNDc4NTE2IDE1NS4wMDQ3ODUxNSA4NS42MDYzNDc2NiAwIDE1NS4wMDQ3ODUxNi02OS4zOTc1NTg1OSAxNTUuMDA0Nzg1MTUtMTU1LjAwNDc4NTE1IDAtODUuNjA2MzQ3NjYtNjkuMzk3NTU4NTktMTU1LjAwNDc4NTE2LTE1NS4wMDQ3ODUxNi0xNTUuMDA0Nzg1MTYtODUuNjA2MzQ3NjYgMC0xNTUuMDA0Nzg1MTYgNjkuMzk3NTU4NTktMTU1LjAwNDc4NTE1IDE1NS4wMDQ3ODUxNnoiPjwvcGF0aD4KPC9zdmc+",type:"radio",title:"单选",setting:nl,build:Wt,validator:(e,t)=>e.required&&(0,D.xb)(t)?Promise.reject("必填"):Promise.resolve(),onCreate(e,t,l){const n=Array.isArray(t.options)?t.options:[];l&&(n.push({value:"选项1"}),e.attributes.layout="inline"),e.options=n},operators:[ol.EQ,ol.NE,ol.EMPTY,ol.CONTAINS]}),Ml={class:"xform-bs-checkbox"},al=["id","name","value","disabled"],ul=["for"];const sl=(0,n.aZ)({name:"xform-bs-checkbox",props:{field:{type:D.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:e=>({value:(0,D.Hg)(e,[]),radioClassName:(0,z.Fl)((()=>{const t=["custom-control","custom-checkbox"];return"inline"==e.field.attributes.layout&&t.push("custom-control-inline"),t}))})});sl.render=function(e,t,l,i,M,a){return(0,n.wg)(),(0,n.iD)("div",Ml,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.field.options,((l,i)=>((0,n.wg)(),(0,n.iD)("div",{key:i,class:(0,o.C_)(e.radioClassName)},[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),id:e.field.uid+"_"+i,name:e.field.name,value:l.value,type:"checkbox",class:"custom-control-input",disabled:e.disabled||e.field.disabled},null,8,al),[[y.e8,e.value]]),(0,n._)("label",{class:"custom-control-label",for:e.field.uid+"_"+i},(0,o.zw)(l.value),9,ul)],2)))),128))])};const rl=sl,cl={class:"xform-bs-field-setting-prop"},dl=(0,n._)("header",null,"布局：",-1),Nl={class:"btn-group",role:"group"},zl={class:"xform-bs-field-setting-prop"},Dl=(0,n._)("header",null,"选项：",-1),ml=["value","onInput"],jl=["onClick","disabled"],gl={class:"xform-bs-field-setting-prop"},pl=(0,n._)("header",null,"默认值：",-1),Tl=["value"],yl=["value"];function Il(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function fl(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}const{BuiltInDefaultValueType:bl,EVENTS:Al}=(0,D.hS)(),xl=(0,n.aZ)({name:"xform-bs-checkbox-setting",props:{field:D.Wi},emits:[Al.UPDATE_FIELD],setup(){const e=[{value:bl.MANUAL,label:"手动指定"},{value:bl.OPTION_ALL,label:"全部选项"}],t=S((function(){if(!n.value)return;const e=t.options.value,l=i.value;i.value=l.filter((t=>e.some((e=>e.value==t))))})),l=Y(e),n=l.useIsManual(),o=l.useCompatType(),i=l.useCompatValue((function(e){const t=e.value;return Array.isArray(t)?t:[]}));return function(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?Il(Object(l),!0).forEach((function(t){fl(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):Il(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}({compatType:o,compatValue:i,defTypes:e,isManual:n},t)},components:{[Pe.name]:Pe}});(xl.__cssModules={}).classes={defaultValue:"XR5iaE8EOEXvmGbJjVXa"},xl.render=function(e,t,l,i,M,a){const u=(0,n.up)("field-setting");return(0,n.wg)(),(0,n.j4)(u,{field:e.field,placeholder:!1},{default:(0,n.w5)((()=>[(0,n._)("section",cl,[dl,(0,n._)("div",Nl,[(0,n._)("button",{type:"button",class:(0,o.C_)(["btn btn-sm btn-primary",{active:"inline"==e.field.attributes.layout}]),onClick:t[0]||(t[0]=t=>e.update("layout","inline","attributes"))}," 行内 ",2),(0,n._)("button",{type:"button",class:(0,o.C_)(["btn btn-sm btn-primary",{active:"block"==e.field.attributes.layout}]),onClick:t[1]||(t[1]=t=>e.update("layout","block","attributes"))}," 换行 ",2)])]),(0,n._)("section",zl,[Dl,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.options,((t,l)=>((0,n.wg)(),(0,n.iD)("div",{key:l,class:"xform-bs-setting-option"},[(0,n._)("input",{value:t.value,class:"form-control form-control-sm",placeholder:"请输入选项内容",onInput:l=>e.updateOption(l,t)},null,40,ml),(0,n._)("button",{type:"button",class:"btn btn-link text-danger",onClick:l=>e.removeOption(t),disabled:e.field.options.length<=1},"删除",8,jl)])))),128)),(0,n._)("button",{type:"text",class:"btn btn-link btn-sm bs-btn-text",onClick:t[2]||(t[2]=function(){return e.addOption&&e.addOption(...arguments)})},"添加选项")]),(0,n._)("section",gl,[pl,(0,n._)("div",{class:(0,o.C_)(e.classes.defaultValue)},[(0,n.wy)((0,n._)("select",{class:"form-control form-control-sm","onUpdate:modelValue":t[3]||(t[3]=t=>e.compatType=t)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.defTypes,((e,t)=>((0,n.wg)(),(0,n.iD)("option",{key:t,value:e.value},(0,o.zw)(e.label||e.value),9,Tl)))),128))],512),[[y.bM,e.compatType]]),e.isManual?(0,n.wy)(((0,n.wg)(),(0,n.iD)("select",{key:0,"onUpdate:modelValue":t[4]||(t[4]=t=>e.compatValue=t),class:"form-control form-control-sm",multiple:""},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.options,((e,t)=>((0,n.wg)(),(0,n.iD)("option",{key:t,value:e.value},(0,o.zw)(e.label||e.value),9,yl)))),128))],512)),[[y.bM,e.compatValue]]):(0,n.kq)("",!0)],2)])])),_:1},8,["field"])};const Ol=xl,{LogicOperator:vl}=D.a9,wl=D.w1.create({icon:"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgPHBhdGggZmlsbD0iIzMzMyIgZD0iTTcxMy4zMzE1NjExNSA4MDQuNzgxMjU5MDdIMTgyLjIyMzkzMTRBOTEuNTE0NzMzMzkgOTEuNTE0NzMzMzkgMCAwIDEgOTAuNzc0MjkxOTkgNzEzLjMzMTYxODg0VjE4Mi4yMjM5ODkwN0E5MS41MTQ3MzMzOSA5MS41MTQ3MzMzOSAwIDAgMSAxODIuMjIzOTMxNCA5MC43NzQzNDk2N0g2NTUuODkwNjQ3MzFhMzIuNDUyMjM3NTIgMzIuNDUyMjM3NTIgMCAwIDEgMCA2NC45MDM2NTE4OUgxODIuMjIzOTMxNGEyNi42MTAyNTgzNiAyNi42MTAyNTgzNiAwIDAgMC0yNi41NDU5ODc1MyAyNi41NDU5ODc1MXY1MzEuMDQzMzU5NzVhMjYuNjEwMjU4MzYgMjYuNjEwMjU4MzYgMCAwIDAgMjYuNTQ1OTg3NTMgMjYuNTQ1MTY0MzZoNTMxLjA0MzM1OTc0YTI2LjYxMDI1ODM2IDI2LjYxMDI1ODM2IDAgMCAwIDI2LjU0NTE2NDM2LTI2LjU0NTk4ODMzVjU1Ny4zMDI5NzM1M2EzMi40NTIyMzc1MiAzMi40NTIyMzc1MiAwIDAgMSA2NC45MDQ0NzU4NyAwdjE1NS45NjM1NTEzMWE5MS41MTQ3MzMzOSA5MS41MTQ3MzMzOSAwIDAgMS05MS4zODUzNzAyMiA5MS41MTQ3MzQyM3oiPjwvcGF0aD4KICA8cGF0aCBmaWxsPSIjMzMzIiBkPSJNOTAxLjQyMjcwNDgxIDkzMy44NzVIMzMyLjE1MTA0NTUzYTMyLjQ1MjIzNzUyIDMyLjQ1MjIzNzUyIDAgMCAxIDAtNjQuOTA0NDc1ODZoNTM2LjgxOTQyMDkzdi0zMTYuNDA2MjI3NzZhMzIuNDUyMjM3NTIgMzIuNDUyMjM3NTIgMCAwIDEgNjQuOTA0NDc1ODYgMHYzNDguODU4NDY2MUEzMi40NTIyMzc1MiAzMi40NTIyMzc1MiAwIDAgMSA5MDEuNDIyNzA0ODEgOTMzLjg3NXogbTAtODQzLjc0OTk0MjMyYTMyLjU4MTYwMTUzIDMyLjU4MTYwMTUzIDAgMCAwLTIyLjk3NTcwNjM3IDkuNDc1NzA3MThMNDY1LjM5OTI2NjQ1IDUxMi42NDkzMjA4MmEzMi40NTIyMzc1MiAzMi40NTIyMzc1MiAwIDAgMCA0NS45NTE0MTI3MiA0NS45NTE0MTI3M0w5MjQuMzk5MjM1MTQgMTQ1LjU1MzgyNTUzQTMyLjQ1MjIzNzUyIDMyLjQ1MjIzNzUyIDAgMCAwIDkwMS40MjI3MDQ4MSA5MC4xMjUwNTc2N3oiPjwvcGF0aD4KICA8cGF0aCBmaWxsPSIjMzMzIiBkPSJNMzA2LjY0NDA4OTE3IDMxOS42MjUwNDIwMmEzMi40NTIyMzc1MiAzMi40NTIyMzc1MiAwIDAgMC0yMi45NzU3MDYzNiA1NS4zNjI4NDk4OWwxODMuNTQ4NTcxNjMgMTgzLjU0ODU3MTYyYTMyLjUxNjUwNzU0IDMyLjUxNjUwNzU0IDAgMCAwIDQ1Ljk1MTQxMjcyIDAuMDY0MjcwMDIgMzIuNDUyMjM3NTIgMzIuNDUyMjM3NTIgMCAwIDAgMC00NS44ODcxNDI3TDMyOS41NTU1MjU1MiAzMjkuMTAwNzQ5MjJhMzIuMDYyNDk3NTMgMzIuMDYyNDk3NTMgMCAwIDAtMjIuOTExNDM2MzQtOS40NzU3MDcyeiI+PC9wYXRoPgo8L3N2Zz4=",type:"checkbox",title:"多选",setting:Ol,build:rl,validator:(e,t)=>e.required&&(0,D.xb)(t)?Promise.reject("必填"):Promise.resolve(),onCreate(e,t,l){const n=Array.isArray(t.options)?t.options:[];l&&(n.push({value:"选项1"}),e.attributes.layout="inline"),e.options=n},operators:[vl.EQ,vl.NE,vl.EMPTY,vl.CONTAINS]}),Ll=["id","name","placeholder","disabled"];const El=(0,n.aZ)({name:"xform-bs-date",props:{field:{type:D.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:e=>({value:(0,D.Hg)(e)})});El.render=function(e,t,l,o,i,M){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{id:e.field.uid,name:e.field.name,type:"date","onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),class:"form-control form-control-sm",placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled},null,8,Ll)),[[y.nr,e.value]])};const Cl=El,kl={class:"xform-bs-field-setting-prop"},Ul=(0,n._)("header",null,[(0,n._)("label",{class:"xform-bs-label",title:"如果字段没有填写，默认为设定的值"},"默认值：")],-1),Yl=["value"];const{BuiltInDefaultValueType:Sl,EVENTS:hl}=(0,D.hS)(),Ql=(0,n.aZ)({name:"xform-bs-date-setting",props:{field:D.Wi},emits:[hl.UPDATE_FIELD],setup(){const e=[{value:Sl.MANUAL,label:"手动指定"},{value:Sl.DATE_NOW,label:"当前时间"}],t=Y(e);return{isManual:t.useIsManual(),compatType:t.useCompatType(),compatValue:t.useCompatValue(),defTypes:e}},components:{[Pe.name]:Pe}});(Ql.__cssModules={}).classes={defaultValue:"Q0MQztNlKpm_yZqY9FQ_"},Ql.render=function(e,t,l,i,M,a){const u=(0,n.up)("field-setting");return(0,n.wg)(),(0,n.j4)(u,{field:e.field,placeholder:!1},{default:(0,n.w5)((()=>[(0,n._)("section",kl,[Ul,(0,n._)("div",{class:(0,o.C_)(e.classes.defaultValue)},[(0,n.wy)((0,n._)("select",{class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=t=>e.compatType=t)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.defTypes,((e,t)=>((0,n.wg)(),(0,n.iD)("option",{key:t,value:e.value},(0,o.zw)(e.label||e.value),9,Yl)))),128))],512),[[y.bM,e.compatType]]),e.isManual?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:0,type:"date","onUpdate:modelValue":t[1]||(t[1]=t=>e.compatValue=t),class:"form-control form-control-sm",placeholder:"请选择默认时间"},null,512)),[[y.nr,e.compatValue]]):(0,n.kq)("",!0)],2)])])),_:1},8,["field"])};const Wl=Ql,{LogicOperator:Pl}=D.a9,_l=D.w1.create({icon:"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgPgogIDxwYXRoIGZpbGw9IiMzMzMiIGQ9Ik0zODguNjIzNSAxMzAuMDk0bDI0MS4xMjM1IDAgMCAyOC45NzFMMzg4LjYyMzUgMTU5LjA2NSAzODguNjIzNSAxMzAuMDk0IDM4OC42MjM1IDEzMC4wOTQgMzg4LjYyMzUgMTMwLjA5NE05MzAuNSAxNTkuMDY1bDAtMjguOTcxLTE4MS4zMDk1IDAgMCAyOC45NzEgMTUyLjMzODUgMCAwIDEzOS44MTVMMTE1LjcyMSAyOTguODggMTE1LjcyMSAxNTkuMDY1bDE1Mi4zMzg1IDAgMC0yOC45NzFMODYuNzUgMTMwLjA5NGwwIDI4Ljk3MSAwIDAgMCA3NDQuMzA5IDAgMCAwIDI4Ljk3MUw5MzAuNSA5MzIuMzQ1bDAtMjguOTcxIDAgMEw5MzAuNSAxNTkuMDY1IDkzMC41IDE1OS4wNjUgOTMwLjUgMTU5LjA2NSA5MzAuNSAxNTkuMDY1TTExNS43MjEgOTAzLjM3ODVMMTE1LjcyMSAzMjcuNjcxbDc4NS44MDggMCAwIDU3NS43MDc1TDExNS43MjEgOTAzLjM3ODUgMTE1LjcyMSA5MDMuMzc4NSAxMTUuNzIxIDkwMy4zNzg1TTMxMy40NzggODBsMjguOTc1NSAwIDAgMTQ4LjQxNDUtMjguOTc1NSAwTDMxMy40NzggODAgMzEzLjQ3OCA4MCAzMTMuNDc4IDgwTTY3NS45MjE1IDgwbDI4Ljk3MSAwIDAgMTQ4LjQxNDUtMjguOTcxIDBMNjc1LjkyMTUgODAgNjc1LjkyMTUgODAgNjc1LjkyMTUgODBNMzEzLjEwOSA1MzIuMzQ0NWwwIDMyLjUyMTVjMjIuODAxNS0xMy42NDQgNDEuNDk0NS0yNy44NDYgNTYuNDQ4LTQyLjgwNGwwIDIzNS44OSAzNC4yMDkgMEw0MDMuNzY2IDQ2My45MzFsLTIwLjU2MDUgMEMzNjUuMDcwNSA0OTAuMjg3NSAzNDEuNzA2NSA1MTMuMDkzNSAzMTMuMTA5IDUzMi4zNDQ1TDMxMy4xMDkgNTMyLjM0NDUgMzEzLjEwOSA1MzIuMzQ0NU02ODMuMzkxNSA2MzAuNjYwNWMtMi43OTktMTAuODQwNS03LjQ3LTIxLjY4MS0xMy42Mzk1LTMyLjUyNi02LjM1ODUtMTAuODQwNS0xNi4yNTg1LTE5LjQzNTUtMjkuOTA3LTI1LjYwNS0xMy42NDQtNi4xNjUtMjcuODUwNS05LjcyLTQyLjgwODUtMTAuMjc4LTE0Ljc2NDUtMC41NjI1LTMwLjgzODUgMy4xNzctNDcuODQ4NSAxMS4wMjUgNS42MDctMTguMTI2IDExLjM5ODUtNDIuODA0IDE3LjAxLTczLjQ1OGwxMDkuMzQxIDAgMC0zMC44NDMtMTM1LjEzNSAwYy0xOS40MzU1IDkxLjIxOTUtMzAuMjgwNSAxNDAuMTg4NS0zMi41MjYgMTQ3LjEwNWwyOC45NzEgMy4zNjE1YzkuMTU3NS0xMi41MjM1IDIwLjc0NS0yMC41NjA1IDM1LjE0MDUtMjMuOTIyIDE0LjIwNjUtMy4zNjYgMjcuMTAzNS0zLjM2NiAzOC41MDY1IDAgMTEuNDAzIDMuMzYxNSAyMC43NDUgMTAuMjc4IDI4LjIyNCAyMC41NjA1IDcuNDc0NSAxMC4yNzggMTEuNDAzIDIyLjgwMTUgMTEuOTY1NSAzNy41NzA1IDAuNTU4IDE0Ljc2OS0xLjY4NzUgMjguMjE5NS02LjkyMSA0MC4xODk1LTUuMDQ0NSAxMS45NjEtMTMuNjQ0IDIxLjY4MS0yNS42MDUgMjkuMTU1NS0xMS45NjEgNy40NzktMjcuNjYxNSA5LjM0NjUtNDcuMTA2IDUuOTgwNS0xOS40MzU1LTMuMzYxNS0zMy4wODQtMjAuNTU2LTQxLjEyMS01MS40MDM1bC0zMC44NDMgOC41OTk1YzUuNjAyNSAyNy4yODggMTYuMjU4NSA0Ni43MzI1IDMxLjU5IDU4LjEzMSAxNS4zMjcgMTEuNDAzIDMxLjU5NDUgMTcuNzU3IDQ4Ljc4NDUgMTguODc3NSAxNy4wMSAxLjEyMDUgMzIuMTU3LTAuOTM2IDQ1LjIzODUtNS45ODA1czI0LjI5NTUtMTEuOTYxIDMzLjI3My0yMC41NjA1YzkuMTU3NS04LjU5NSAxNS44ODk1LTE5LjQzNTUgMjAuNTYwNS0zMi41MjYgNC40ODY1LTEzLjA4MTUgNy4xMDEtMjUuOTc4NSA3LjY1OS0zOC41MDY1QzY4Ny4zMiA2NTMuMjc3NSA2ODYuMTk1IDY0MS41MDU1IDY4My4zOTE1IDYzMC42NjA1TDY4My4zOTE1IDYzMC42NjA1IDY4My4zOTE1IDYzMC42NjA1TTY4My4zOTE1IDYzMC42NjA1TDY4My4zOTE1IDYzMC42NjA1eiI+PC9wYXRoPgo8L3N2Zz4=",type:"date",title:"日期",setting:Wl,build:Cl,validator:(e,t)=>e.required&&(0,D.xb)(t)?Promise.reject("必填"):Promise.resolve(),operators:[Pl.LT,Pl.LTE,Pl.GT,Pl.GTE,Pl.EQ,Pl.NE,Pl.EMPTY]});const Vl={key:0,class:"xform-divider-title"};const Gl=(0,n.aZ)({name:"xform-divider",props:{title:{type:String,default:null},layout:{type:String,default:"center"},type:{type:String,default:"solid"},top:{type:Number,default:0},bottom:{type:Number,default:0}},computed:{style(){const e={};return this.top>0&&(e.marginTop="".concat(this.top,"px")),this.bottom>0&&(e.marginBottom="".concat(this.bottom,"px")),e}}});Gl.render=function(e,t,l,i,M,a){return(0,n.wg)(),(0,n.iD)("div",{class:(0,o.C_)(["xform-divider","xform-divider-".concat(e.layout)]),style:(0,o.j5)(e.style)},[(0,n._)("div",{class:(0,o.C_)(["xform-divider-line","xform-divider-type-".concat(e.type)])},null,2),e.title?((0,n.wg)(),(0,n.iD)("strong",Vl,(0,o.zw)(e.title),1)):(0,n.kq)("",!0)],6)};const Zl=Gl,Hl=(0,n.aZ)({name:"xform-bs-divider",inheritAttrs:!1,props:{field:{type:D.Wi,required:!0}},components:{[Zl.name]:Zl}});Hl.render=function(e,t,l,o,i,M){const a=(0,n.up)("xform-divider");return(0,n.wg)(),(0,n.j4)(a,{class:"xform-item",title:e.field.title,layout:e.field.attributes.layout,type:e.field.attributes.type,top:e.field.attributes.top,bottom:e.field.attributes.bottom},null,8,["title","layout","type","top","bottom"])};const Rl=Hl,Bl={class:"xform-bs-field-setting-prop xform-divider-types"},Fl=(0,n._)("header",null,"样式：",-1),ql=["id","value","checked","onChange"],Jl=["for"],Kl={class:"xform-bs-field-setting-prop"},Xl=(0,n._)("header",null,"间距：",-1),$l={class:"xform-bs-divider-range"},en=(0,n._)("label",null,"上间距：",-1),tn=["value"],ln={class:"xform-bs-divider-range"},nn=(0,n._)("label",null,"下间距：",-1),on=["value"];const Mn=(0,n.aZ)({name:"xform-bs-divider-setting",props:{field:D.Wi},emits:[D.a9.EVENTS.UPDATE_FIELD],setup(e,t){let{emit:l}=t;function n(e,t,n){l(D.a9.EVENTS.UPDATE_FIELD,{prop:e,value:t,scope:n})}return{types:["solid","dashed","double","solid-dashed","dashed-solid"],update:n,updateField(e,t,l){n(t,e.target.value,l)}}},components:{[Zl.name]:Zl,[Pe.name]:Pe}});Mn.render=function(e,t,l,o,i,M){const a=(0,n.up)("xform-divider"),u=(0,n.up)("field-setting");return(0,n.wg)(),(0,n.j4)(u,{field:e.field,placeholder:!1,attributes:!1},{default:(0,n.w5)((()=>[(0,n._)("section",Bl,[Fl,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.types,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"custom-control custom-radio"},[(0,n._)("input",{id:"divider-".concat(t),name:"setting-divider-type",type:"radio",value:t,class:"custom-control-input",checked:e.field.attributes.type==t,onChange:l=>e.update("type",t,"attributes")},null,40,ql),(0,n._)("label",{class:"custom-control-label",for:"divider-".concat(t)},[(0,n.Wm)(a,{type:t},null,8,["type"])],8,Jl)])))),128))]),(0,n._)("section",Kl,[Xl,(0,n._)("div",$l,[en,(0,n._)("input",{value:e.field.attributes.top,type:"range",class:"custom-range",min:"0",max:"100",step:"5",onInput:t[0]||(t[0]=t=>e.updateField(t,"top","attributes"))},null,40,tn)]),(0,n._)("div",ln,[nn,(0,n._)("input",{value:e.field.attributes.bottom,type:"range",class:"custom-range",min:"0",max:"100",step:"5",onInput:t[1]||(t[1]=t=>e.updateField(t,"bottom","attributes"))},null,40,on)])])])),_:1},8,["field"])};const an=Mn,un=D.w1.create({icon:"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZlcnNpb249IjEuMSIgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiID4KICA8cGF0aCBmaWxsPSIjMzMzIiBkPSJNODU2LjUzMDQ4ODg5IDc1Ni4yNzI5MjQ0NWwtMTAwLjI1NzU2NDQ0IDEwMC4yNTg3MDIyMmgtNTYuNjAyMTY4OWwxNTYuODYwODcxMTItMTU2Ljg2MDg3MTEydjU2LjYwMjE2ODl6IG0wIDczLjY4MDIxMzMzdjI2LjU3ODQ4ODg5aC0yNi41NzczNTExMWwyNi41Nzg0ODg4OS0yNi41Nzg0ODg4OXogbTAtMjAzLjk2MjU5NTU2TDYyNS45OTE2OCA4NTYuNTMxNjI2NjdINTY5LjM4OTUxMTExbDI0Ni4wOTMzNjg4OS0yNDYuMDk0NTA2NjdoNDEuMDQ4NzQ2Njd2MTUuNTUzNDIyMjJ6IG0tMTE0LjcyNzgyMjIyLTE1LjU1MzQyMjIyTDQ5NS43MDcwMjIyMiA4NTYuNTMxNjI2NjdoLTU2LjYwMTAzMTExbDI0Ni4wOTMzNjg4OS0yNDYuMDk0NTA2NjdoNTYuNjAyMTY4ODl6IG0tMTMwLjMzMjQ0NDQ1IDBMMzY1LjM3Nzk5MTExIDg1Ni41MzE2MjY2N2gtNTYuNjAxMDMxMTFsMjQ2LjA5MzM2ODg5LTI0Ni4wOTQ1MDY2N2g1Ni42MDIxNjg4OXogbS0xMzAuMjgxMjQ0NDQgMEwyMzUuMDk1NjA4ODkgODU2LjUzMTYyNjY3aC01Ni42MDIxNjg4OWwyNDYuMDk0NTA2NjctMjQ2LjA5NDUwNjY3aDU2LjYwMTAzMTExeiBtLTEzMC4yODIzODIyMyAwTDE2Ny40Njk1MTExMSA3OTMuODc1MzQyMjJ2LTU2LjA1OTQ0ODg5bDEyNy4zNzg3NzMzNC0xMjcuMzc4NzczMzNoNTYuMTA5NTExMXogbS0xMjkuNzQwOCAwbC01My42OTc0MjIyMiA1My42OTg1NnYtNTMuNjk4NTZoNTMuNjk4NTZ6IG02MzUuMzY1ODMxMTItMzcwLjk2MTA2NjY3TDczMS42NjI3OTExMSAzNjQuMzQzNzUxMTFoLTU2LjYwMTAzMTExbDE4MS40Njk4NjY2Ny0xODEuNDY5ODY2NjZ2NTYuNjAyMTY4ODh6IG0wIDczLjY4MDIxMzM0djUxLjE4NzQ4NDQ0aC01MS4xODg2MjIyMmw1MS4xODg2MjIyMi01MS4xODc0ODQ0NHogbS01OC4yNzU4NC0xNDUuNjg3ODkzMzRMNjAxLjM4MTU0NjY3IDM2NC4zNDM3NTExMUg1NDQuNzc5Mzc3NzhsMTk2Ljg3NTM3Nzc3LTE5Ni44NzUzNzc3OGg1Ni42MDEwMzExMnogbS0xMzAuMjgxMjQ0NDUgMEw0NzEuMDk5MTY0NDUgMzY0LjM0Mzc1MTExaC01Ni42MDEwMzExMmwxOTYuODc0MjQtMTk2Ljg3NTM3Nzc4aDU2LjYwMjE2ODg5eiBtLTEzMC4zODAyMzExMSAwTDM0MC43MTg5MzMzMyAzNjQuMzQzNzUxMTFoLTU2LjYwMjE2ODg4bDE5Ni44NzUzNzc3Ny0xOTYuODc1Mzc3NzhoNTYuNjAyMTY4ODl6IG0tMTMwLjIzMzQ1Nzc4IDBMMjEwLjQ4NTQ3NTU1IDM2NC4zNDM3NTExMUgxNjcuNDY5NTExMTF2LTEzLjUzNTAwNDQ0bDE4My4zNDAzNzMzNC0xODMuMzQwMzczMzRoNTYuNjAxMDMxMXogbS0xMzAuMjgyMzgyMjIgMGwtMTA5LjYxMDA5Nzc4IDEwOS42MTAwOTc3OHYtNTYuMDU5NDQ4ODlsNTMuNTUwNjQ4ODktNTMuNTUwNjQ4ODloNTYuMTA5NTExMTF6TTY5LjAzMTI1MzMzIDQ2Mi43ODA4NzExMWg4ODUuOTM3NDkzMzRWNTEySDY5LjAzMTI1MzMzdi00OS4yMTkxMjg4OXoiPjwvcGF0aD4KPC9zdmc+",type:"divider",title:"分割线",custom:!0,setting:an,build:Rl,view:Rl,onCreate(e,t,l){l&&(e.attributes.type="solid",e.attributes.top=0,e.attributes.bottom=0)},operators:!1});l(5827),l(3593);const sn={class:"custom-control custom-checkbox custom-control-inline",title:"勾选则支持展开/收起分组"},rn=["id","name","checked"],cn=["for"];const dn=(0,n.aZ)({name:"xform-bs-group-setting",props:{field:D.Wi},emits:[D.a9.EVENTS.UPDATE_FIELD],setup(e,t){let{emit:l}=t;return{updateField:k.bind(null,l)}},components:{[Pe.name]:Pe}});dn.render=function(e,t,l,o,i,M){const a=(0,n.up)("field-setting");return(0,n.wg)(),(0,n.j4)(a,{field:e.field,placeholder:!1,required:!1},{attributes:(0,n.w5)((()=>[(0,n._)("div",sn,[(0,n._)("input",{id:"".concat(e.field.name,"-collapsable"),name:"".concat(e.field.name,"-collapsable"),checked:e.field.attributes.collapsable,type:"checkbox",class:"custom-control-input",onInput:t[0]||(t[0]=t=>e.updateField(t,"collapsable","attributes"))},null,40,rn),(0,n._)("label",{class:"custom-control-label",for:"".concat(e.field.name,"-collapsable")},"允许收起",8,cn)])])),_:1},8,["field"])};const Nn=dn,{SELECTOR:zn,CLASS:Dn,EnumBehavior:mn,PROPS:jn,EnumValidateMode:gn,EnumValidityState:pn}=D.a9,Tn="xform-bs-group-list",yn=".".concat(Tn);function In(){const e=(0,z.iH)(!1);function t(){e.value=!e.value}return{collasped:e,renderHeader:function(l){if(null==l.title)return null;const o=!0===l.attributes.collapsable?(0,n.Wm)("button",{type:"button",title:e.value?"展开":"收起",class:"btn btn-link xform-bs-group-toggle",onClick:t},[e.value?"展开":"收起"]):null;return(0,n.Wm)("h6",{class:"card-header"},[(0,n.Wm)("span",null,[l.title]),o])}}}const fn=(0,n.aZ)({name:"xform-bs-group",props:{field:{type:D.Wi,required:!0},behavior:{type:String,default:null},disabled:{type:Boolean,default:!1}},setup(e){const{collasped:t,renderHeader:l}=In(),{renderField:o}=(0,D.j9)();return function(){const i=e.field.value,M=e.field.fields,a=e.behavior==mn.DESIGNER,u=e.field.validation.message,s=e.disabled,r={"xform-item":!0,"xform-bs-group":!0,"xform-is-collasped":t.value,[Dn.IS_ERROR]:e.field.validation.valid==pn.ERROR},c=a&&0==M.length?(0,n.Wm)("p",{class:[Dn.IS_EMPTY_TIP,"xform-bs-empty-tip"]},[(0,n.Uk)("请将左侧控件拖动到此处")]):null,d={class:{"card-body":!0,[Tn]:!0,[Dn.DROPPABLE]:a,[Dn.SCOPE]:!0},[jn.FIELD]:a?e.field:void 0,[jn.SCOPE]:e.field},N=M.map((e=>o(a?e:i[e.name],{parentProps:{disabled:s}})));return(0,n.Wm)("div",{class:r},[(0,n.Wm)("div",{class:"card"},[l(e.field),(0,n.Wm)("div",d,[c,N])]),u&&(0,n.Wm)("p",{class:"xform-item-message"},[u])])}}}),bn=(0,n.aZ)({name:"xform-bs-group-view",props:{field:{type:D.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup(e){const{renderField:t}=(0,D.j9)(),{collasped:l,renderHeader:o}=In();return function(){const i=e.field.value,M=e.field.fields,a={"xform-item":!0,"xform-bs-group":!0,"xform-is-collasped":l.value};return(0,n.Wm)("div",{class:a},[(0,n.Wm)("div",{class:"card"},[o(e.field),(0,n.Wm)("div",{class:["card-body",Tn]},[M.map((l=>t(i[l.name],{parentProps:{disabled:e.disabled}})))])])])}}}),An=D.w1.create({icon:"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+CiAgPHBhdGggZD0iTTg2NC4xMTQ0MDk0NyA5MjYuMjUyMjQ2NTFoLTcwNC4yMjg4MTg5NEE2Mi4xMzc4MzcwMyA2Mi4xMzc4MzcwMyAwIDAgMSA5Ny43NDc3NTM0OSA4NjQuMTE0NDA5NDd2LTY2Mi44MDM1OTQ2NUE2Mi4xMzc4MzcwMyA2Mi4xMzc4MzcwMyAwIDAgMSAxNTkuODg1NTkwNTMgMTM5LjE3Mjk3Nzc4aDcwNC4yMjg4MTg5NEE2Mi4xMzc4MzcwMyA2Mi4xMzc4MzcwMyAwIDAgMSA5MjYuMjUyMjQ2NTEgMjAxLjMxMDgxNDgydjY2Mi44MDM1OTQ2NWE2Mi4xMzc4MzcwMyA2Mi4xMzc4MzcwMyAwIDAgMS02Mi4xMzc4MzcwNCA2Mi4xMzc4MzcwNHpNMTU5Ljg4NTU5MDUzIDE4MC41OTgyMDIwNmEyMC43MTI2MTI3NSAyMC43MTI2MTI3NSAwIDAgMC0yMC43MTI2MTI3NSAyMC43MTI2MTI3NnY2NjIuODAzNTk0NjVhMjAuNzEyNjEyNzUgMjAuNzEyNjEyNzUgMCAwIDAgMjAuNzEyNjEyNzUgMjAuNzEyNjEyNzVoNzA0LjIyODgxODk0YTIwLjcxMjYxMjc1IDIwLjcxMjYxMjc1IDAgMCAwIDIwLjcxMjYxMjc1LTIwLjcxMjYxMjc1di02NjIuODAzNTk0NjVhMjAuNzEyNjEyNzUgMjAuNzEyNjEyNzUgMCAwIDAtMjAuNzEyNjEyNzUtMjAuNzEyNjEyNzZ6IiBmaWxsPSIjMzMzIj48L3BhdGg+CiAgPHBhdGggZD0iTTkyNi4yNTIyNDY1MSA0MjkuMTQ5NTUwMjJIOTcuNzQ3NzUzNDlWMjAxLjMxMDgxNDgyQTYyLjEzNzgzNzAzIDYyLjEzNzgzNzAzIDAgMCAxIDE1OS44ODU1OTA1MyAxMzkuMTcyOTc3NzhoNzA0LjIyODgxODk0QTYyLjEzNzgzNzAzIDYyLjEzNzgzNzAzIDAgMCAxIDkyNi4yNTIyNDY1MSAyMDEuMzEwODE0ODJ6TTEzOS4xNzI5Nzc3OCAzODcuNzI0MzI1OTJoNzQ1LjY1NDA0NDQ0VjIwMS4zMTA4MTQ4MmEyMC43MTI2MTI3NSAyMC43MTI2MTI3NSAwIDAgMC0yMC43MTI2MTI3NS0yMC43MTI2MTI3NmgtNzA0LjIyODgxODk0YTIwLjcxMjYxMjc1IDIwLjcxMjYxMjc1IDAgMCAwLTIwLjcxMjYxMjc1IDIwLjcxMjYxMjc2eiIgZmlsbD0iIzMzMyI+PC9wYXRoPgogIDxwYXRoIGQ9Ik03MjMuNDczNDI4OTkgMjI5Ljc2NjE0MTkzYTIzLjU2NjM1MDUxIDIzLjU2NjM1MDUxIDAgMCAxIDE2LjY4NDk3NTgzIDYuODgxMzczMjhsMS4xNzgzMTcwNiAxLjI3MjU4MjkxIDY1LjQyMDE4ODE4IDY1LjQyMDE4ODE5YTIzLjU2NjM1MDUxIDIzLjU2NjM1MDUxIDAgMCAxIDAgMzMuMzY5OTUxNjYgMjMuNTY2MzUwNTEgMjMuNTY2MzUwNTEgMCAwIDEtMzMuMzY5OTUxNjcgMWUtOEw3MjMuNDczNDI4OTkgMjg2LjY1NTMxMDQ4bC01MC4wMDc3OTUyNSA1MC4wNTQ5Mjc1YTIzLjU2NjM1MDUxIDIzLjU2NjM1MDUxIDAgMCAxLTMzLjM2OTk1MTY3IDAgMjMuNTY2MzUwNTEgMjMuNTY2MzUwNTEgMCAwIDEgMC0zMy4zNjk5NTE2N2w2Ni43Mzk5MDMzMy02Ni42OTI3NzExYTIzLjU2NjM1MDUxIDIzLjU2NjM1MDUxIDAgMCAxIDE2LjYzNzg0MzU5LTYuODgxMzczMjh6IiBmaWxsPSIjMzMzIj48L3BhdGg+Cjwvc3ZnPg==",type:"group",title:"分组",custom:!0,preview:fn,setting:Nn,build:fn,view:bn,onDragOver(e){const t=e.currentTarget;if(!t.matches(yn))return;e.stopPropagation(),e.preventDefault();const{directionY:l,moveMarkEl:n}=e.context,o=e.dragElement.contains(t);n(l,o?e.dragElement:e.target,o?e.dragElement.parentElement.closest(zn.DROPPABLE):t)},onDrop(e){e.currentTarget.matches(zn.SCOPE)&&e.stopPropagation()},onValueInit(e,t){const l=null==t||"object"!=typeof t?{}:t;return e.fields.reduce(((t,n)=>{var o;const i=n.clone(!0);return i.setValue(null!==(o=l[n.name])&&void 0!==o?o:null),i.setParent(e),t[n.name]=i,t}),{})},onValueSubmit(e){const t=e.value;return null==t||"object"!=typeof t||0==Object.keys(t).length?null:e.fields.map((e=>e.name)).reduce(((e,l)=>{const n=Reflect.get(t,l,t);if(null!=n){const t=n.conf,o="function"==typeof(null==t?void 0:t.onValueSubmit)?t.onValueSubmit(n):n.value;Reflect.set(e,l,o,e)}return e}),{})},validator(e,t,l){const n=e.value,o=Object.keys(n).map((e=>{const t=n[e];return l.mode==gn.RECURSIVE?t.validate({mode:gn.RECURSIVE}):t.invalid?Promise.reject():Promise.resolve()}));return Promise.allSettled(o).then((e=>e.some((e=>"rejected"===e.status))?Promise.reject("请补全必填内容"):Promise.resolve()))},operators:!1}),{SELECTOR:xn,CLASS:On,PROPS:vn,EnumValidateMode:wn}=D.a9,Ln=D.w1.create({type:"tabs.pane",title:"标签面板",custom:!0,scoped:!0,build:(0,n.aZ)({name:"tabs-pane",props:{field:{type:D.Wi,required:!0},behavior:{type:String,default:null},disabled:{type:Boolean,default:!1}},setup:e=>function(){var t;const l=(0,D.j9)(),o=e.field.fields,i=null!==(t=e.field.value)&&void 0!==t?t:{},M="designer"==e.behavior,a="designer"==e.behavior&&0==o.length?(0,n.Wm)("p",{class:[On.IS_EMPTY_TIP,"xform-bs-empty-tip"]},[(0,n.Uk)("请将左侧控件拖动到此处")]):o.map((t=>l.renderField(M?t:i[t.name],{parentProps:{disabled:e.disabled}}))),u={class:{"tab-pane":!0,[On.DROPPABLE]:!0,[On.SCOPE]:!0},[vn.FIELD]:e.field,[vn.SCOPE]:e.field};return(0,n.Wm)("div",u,[a])}}),view:(0,n.aZ)({name:"tabs-pane-view",props:{field:{type:D.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup(e){var t;const l=(0,D.j9)(),o=null!==(t=e.field.value)&&void 0!==t?t:{};return function(){const t=e.field.fields;return(0,n.Wm)("div",{class:"tab-pane"},[t.map((t=>l.renderField(o[t.name],{parentProps:{disabled:e.disabled}})))])}}}),onDragOver(e){const t=e.currentTarget;e.stopPropagation(),e.preventDefault();const{directionY:l,moveMarkEl:n}=e.context,o=e.dragElement.contains(t);n(l,o?e.dragElement:e.target,o?e.dragElement.parentElement.closest(xn.DROPPABLE):t)},onDrop(e){e.stopPropagation()},onValueInit(e,t){const l=null!=t?t:{};return e.fields.reduce(((t,n)=>{var o;const i=n.name,M=n.clone(!0);return M.setValue(null!==(o=l[i])&&void 0!==o?o:null),M.setParent(e),t[i]=M,t}),{})},onValueSubmit(e){var t;const l=null!==(t=e.value)&&void 0!==t?t:{};return e.fields.map((e=>e.name)).reduce(((e,t)=>{var n;const o=l[t],i=null===(n=o.conf)||void 0===n?void 0:n.onValueSubmit;return e[t]="function"==typeof i?i(o):o.value,e}),{})},validator(e,t,l){const n=Object.values(null!=t?t:{}).map((e=>l.mode==wn.RECURSIVE?e.validate({mode:wn.RECURSIVE}):e.invalid?Promise.reject():Promise.resolve()));return Promise.allSettled(n).then((t=>t.some((e=>"rejected"===e.status))?Promise.reject("请补全标签页[".concat(e.title,"]必填内容")):Promise.resolve()))}}),{CLASS:En,EnumValidityState:Cn}=D.a9,kn=(0,n.aZ)({name:"xform-bs-tabs-setting",props:{field:{type:D.Wi,required:!0}},emits:[D.a9.EVENTS.UPDATE_FIELD],setup(e,t){let{emit:l}=t;function o(){const t=e.field,l=new D.Wi(Ln);l.title="标签".concat(e.field.fields.length+1),t.fields.push(l)}function i(t){const l=e.field.fields;if(l.length<=1)return;const n=l.indexOf(t);n>=0&&l.splice(n,1)}function M(e,t){e.title=t.target.value}function a(t){const l=e.field.fields,n=l.splice(t,1)[0];l.splice(t-1,0,n)}function u(t){const l=e.field.fields,n=l.splice(t+1,1)[0];l.splice(t,0,n)}return function(){const t=e.field,s=t.fields.map(((e,l)=>{const o=t.fields.length;return(0,n.Wm)("div",{class:"xform-bs-setting-option"},[(0,n.Wm)("input",{type:"text",class:"form-control form-control-sm",placeholder:"请输入标签名称",value:e.title,onInput:M.bind(null,e)},null),(0,n.Wm)("button",{type:"button",class:"btn btn-link",onClick:a.bind(null,l),disabled:0==l},[(0,n.Uk)("上移")]),(0,n.Wm)("button",{type:"button",class:"btn btn-link",onClick:u.bind(null,l),disabled:l==o-1},[(0,n.Uk)("下移")]),(0,n.Wm)("button",{type:"button",class:"btn btn-link text-danger",onClick:i.bind(null,e),disabled:o<=1},[(0,n.Uk)("删除")])])})),r={default:()=>(0,n.Wm)("div",{class:"xform-bs-field-setting-prop"},[(0,n.Wm)("header",null,[(0,n.Uk)("标签：")]),s,(0,n.Wm)("button",{type:"button",class:"btn btn-link btn-sm bs-btn-text",onClick:o},[(0,n.Uk)("添加标签")])]),attributes:()=>(0,n.Wm)("div",{class:"custom-control custom-checkbox custom-control-inline"},[(0,n.Wm)("input",{type:"checkbox",class:"custom-control-input",id:"".concat(t.name,"-show-title"),name:"".concat(t.name,"-show-title"),checked:t.attributes.showTitle,onInput:e=>k(l,e,"showTitle","attributes")},null),(0,n.Wm)("label",{class:"custom-control-label",for:"".concat(t.name,"-show-title")},[(0,n.Uk)("显示标题")])])};return(0,n.Wm)((0,n.up)("field-setting"),{field:t,placeholder:!1,required:!1},r)}},components:{[Pe.name]:Pe}});function Un(e){return e.validation.valid!==Cn.ERROR?null:(0,n.Wm)("p",{class:"xform-item-message"},[e.validation.message])}const Yn=(0,n.aZ)({name:"tabs",props:{field:{type:D.Wi,required:!0},behavior:{type:String,default:null},disabled:{type:Boolean,default:!1}},setup(e){const t=(0,z.iH)(e.field.fields[0].name),l=(0,n.FN)();function o(e,l){l.preventDefault(),t.value=e.name}function i(e){const t=(0,D.am)(l.refs,"scroll"),n=(0,D.am)(l.refs,"list");if(n.offsetWidth<=t.offsetWidth)return;e.preventDefault();const o=function(e,t,l){const n=(0,D.fN)(e).pixelY+(t.__offset__||0);return n<0?0:n>t.offsetWidth-l.offsetWidth?t.offsetWidth-l.offsetWidth:n}(e,n,t);n.__offset__=o,n.style.transform="translateX(".concat(-o,"px)")}const M=(0,n.YP)(e.field.fields,(e=>{e.every((e=>e.name!=t.value))&&(t.value=e[e.length-1].name)}));return(0,n.Jd)(M),function(){var l;const M=(0,D.j9)(),a=e.field,u=null!==(l=a.value)&&void 0!==l?l:{},s=!0===a.attributes.showTitle?(0,n.Wm)("strong",{class:"nav-tabs-title"},[a.title]):null,r=e.disabled,c=a.fields.map((e=>{const l={"nav-link":!0,active:t.value==e.name};return(0,n.Wm)("a",{class:l,href:"javascript:;",onClick:o.bind(null,e)},[e.title])})),d=a.fields.map((l=>M.renderField("designer"==e.behavior?l:u[l.name],{parentProps:{disabled:r},renderContent:(e,o)=>(o.class=(0,D.C_)(o.class,{active:t.value==l.name}),(0,n.h)(e,o)),renderPreivew:(e,t,l,n)=>n()}))),N={"xform-item":!0,"xform-bs-tabs":!0,[En.IS_ERROR]:a.invalid};return(0,n.Wm)("div",{class:N},[(0,n.Wm)("div",{class:"nav nav-tabs"},[s,(0,n.Wm)("div",{class:"xform-bs-tabs-scroll",onWheel:i,ref:"scroll"},[(0,n.Wm)("div",{class:"xform-bs-tab-list",ref:"list"},[c])])]),(0,n.Wm)("div",{class:"tab-content"},[d]),Un(a)])}}}),Sn=D.w1.create({type:"tabs",title:"标签页",icon:"data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogIDxwYXRoIGZpbGw9IiMzMzMiIGQ9Ik03MC4xMzA5MzY2MyAyNDYuODc4NTYxOTd2NjYyLjgwMzU5NTA2aDg4My43MzgxMjY3NFYyNDYuODc4NTYxOTdINzAuMTMwOTM2NjN6IG04MzkuNTUxMjIwNCA2MTguNjE2Njg4NzNIMTE0LjMxNzg0Mjk3VjI5MS4wNjU0NjgzaDc5NS4zNjQzMTQwNnY1NzQuNDI5NzgyNHoiPjwvcGF0aD4KICA8cGF0aCBmaWxsPSIjMzMzIiBkPSJNNDMyLjQ2MzU2ODU5IDU2MC42MDU1OTY5OGMxNy42NzQ3NjI1My0xMy4yNTYwNzE5IDM5Ljc2ODIxNTctMjIuMDkzNDUzMTcgNjEuODYxNjY4ODgtMjIuMDkzNDUzMTcgMjYuNTEyMTQzODEgMCAzOS43NjgyMTU3IDE3LjY3NDc2MjUzIDM5Ljc2ODIxNTcgNDguNjA1NTk2OTZsLTU3LjQ0Mjk3ODI0IDguODM3MzgxMjdjLTQ0LjE4NjkwNjM0IDQuNDE4NjkwNjMtNjEuODYxNjY4ODcgMjYuNTEyMTQzODEtNjEuODYxNjY4ODYgNjEuODYxNjY4ODcgMCAxNy42NzQ3NjI1MyA0LjQxODY5MDYzIDMwLjkzMDgzNDQzIDE3LjY3NDc2MjUyIDM5Ljc2ODIxNTcgOC44MzczODEyNyA4LjgzNzM4MTI3IDI2LjUxMjE0MzgxIDEzLjI1NjA3MTkgNDQuMTg2OTA2MzQgMTMuMjU2MDcxOTEgMjYuNTEyMTQzODEgMCA0NC4xODY5MDYzNC0xMy4yNTYwNzE5IDU3LjQ0Mjk3ODI0LTM1LjM0OTUyNTA3djMwLjkzMDgzNDQzaDM1LjM0OTUyNTA3di0xMjMuNzIzMzM3NzVjMC00OC42MDU1OTY5OC0yMi4wOTM0NTMxNy03MC42OTkwNTAxMy03MC42OTkwNTAxNC03MC42OTkwNTAxMy0yNi41MTIxNDM4MSAwLTQ4LjYwNTU5Njk4IDQuNDE4NjkwNjMtNjYuMjgwMzU5NTEgMTcuNjc0NzYyNTN2MzAuOTMwODM0NDV6IG0xMDEuNjI5ODg0NTggNjYuMjgwMzU5NDljMCAxNy42NzQ3NjI1My00LjQxODY5MDYzIDI2LjUxMjE0MzgxLTEzLjI1NjA3MTkgMzkuNzY4MjE1NzEtOC44MzczODEyNyA4LjgzNzM4MTI3LTIyLjA5MzQ1MzE3IDE3LjY3NDc2MjUzLTM1LjM0OTUyNTA4IDE3LjY3NDc2MjU0LTguODM3MzgxMjcgMC0xNy42NzQ3NjI1My00LjQxODY5MDYzLTI2LjUxMjE0MzgtOC44MzczODEyNy00LjQxODY5MDYzLTQuNDE4NjkwNjMtOC44MzczODEyNy0xMy4yNTYwNzE5LTguODM3MzgxMjYtMjIuMDkzNDUzMTZzNC40MTg2OTA2My0xNy42NzQ3NjI1MyA4LjgzNzM4MTI2LTIyLjA5MzQ1MzE4YzQuNDE4NjkwNjMtNC40MTg2OTA2MyAxNy42NzQ3NjI1My04LjgzNzM4MTI3IDMwLjkzMDgzNDQ0LTEzLjI1NjA3MTkxbDQ0LjE4NjkwNjM0LTQuNDE4NjkwNjF2MTMuMjU2MDcxODh6TTMyMS45OTYzMDI3NSA3MDYuNDIyMzg3ODhoMzUuMzQ5NTI1MDdWNDY3LjgxMzA5MzY2aDc5LjUzNjQzMTQxdi0zMC45MzA4MzQ0M0gyNDYuODc4NTYxOTd2MzAuOTMwODM0NDNoNzUuMTE3NzQwNzh6TTY1Ny44MTY3OTA5MSA2NzkuOTEwMjQ0MDljMTMuMjU2MDcxOSAyMi4wOTM0NTMxNyAzMC45MzA4MzQ0MyAzMC45MzA4MzQ0MyA1Ny40NDI5NzgyNCAzMC45MzA4MzQ0MyAyNi41MTIxNDM4MSAwIDQ4LjYwNTU5Njk4LTguODM3MzgxMjcgNjEuODYxNjY4ODgtMjYuNTEyMTQzOHMyMi4wOTM0NTMxNy00NC4xODY5MDYzNCAyMi4wOTM0NTMxNy03NS4xMTc3NDA3OS04LjgzNzM4MTI3LTUzLjAyNDI4NzYxLTIyLjA5MzQ1MzE3LTcwLjY5OTA1MDEyLTMwLjkzMDgzNDQzLTI2LjUxMjE0MzgxLTUzLjAyNDI4NzYxLTI2LjUxMjE0MzgxYy0zMC45MzA4MzQ0MyAwLTQ4LjYwNTU5Njk4IDEzLjI1NjA3MTktNjYuMjgwMzU5NTEgMzUuMzQ5NTI1MDdWNDIzLjYyNjE4NzMyaC0zNS4zNDk1MjUwNnYyODIuNzk2MjAwNTZoMzUuMzQ5NTI1MDZ2LTI2LjUxMjE0Mzc5eiBtMC03OS41MzY0MzE0MWMwLTE3LjY3NDc2MjUzIDQuNDE4NjkwNjMtMzUuMzQ5NTI1MDcgMTcuNjc0NzYyNTQtNDQuMTg2OTA2MzQgOC44MzczODEyNy0xMy4yNTYwNzE5IDI2LjUxMjE0MzgxLTE3LjY3NDc2MjUzIDM5Ljc2ODIxNTctMTcuNjc0NzYyNTMgMTcuNjc0NzYyNTMgMCAzMC45MzA4MzQ0MyA0LjQxODY5MDYzIDM5Ljc2ODIxNTcxIDE3LjY3NDc2MjUzIDguODM3MzgxMjcgMTMuMjU2MDcxOSAxMy4yNTYwNzE5IDI2LjUxMjE0MzgxIDEzLjI1NjA3MTg5IDQ4LjYwNTU5Njk3IDAgMjYuNTEyMTQzODEtNC40MTg2OTA2MyA0NC4xODY5MDYzNC0xMy4yNTYwNzE4OSA1Ny40NDI5NzgyNC04LjgzNzM4MTI3IDEzLjI1NjA3MTktMjIuMDkzNDUzMTcgMjIuMDkzNDUzMTctNDQuMTg2OTA2MzQgMjIuMDkzNDUzMTctMTMuMjU2MDcxOSAwLTI2LjUxMjE0MzgxLTQuNDE4NjkwNjMtMzkuNzY4MjE1Ny0xNy42NzQ3NjI1NHMtMTMuMjU2MDcxOS0yMi4wOTM0NTMxNy0xMy4yNTYwNzE5MS0zOS43NjgyMTU3MVY2MDAuMzczODEyNjh6TTcwLjEzMDkzNjYzIDExNC4zMTc4NDI5N2gzMDkuMzA4MzQ0MzV2NDQuMTg2OTA2MzNINzAuMTMwOTM2NjN6Ij48L3BhdGg+Cjwvc3ZnPg==",custom:!0,setting:kn,build:Yn,view:Yn,dependencies:[Ln],onCreate(e,t,l){if(l){const t=new D.Wi(Ln);t.title="标签".concat(e.fields.length+1),e.push(t),e.attributes.showTitle=!0}},onValueInit(e,t){const l=null!=t?t:{};return e.fields.reduce(((t,n)=>{const o=n.name,i=n.clone(!0);return i.setValue(l[o]),i.setParent(e),t[o]=i,t}),{})},onValueSubmit(e){var t;const l=null!==(t=e.value)&&void 0!==t?t:{};return e.fields.map((e=>e.name)).reduce(((e,t)=>{var n;const o=l[t],i=null===(n=o.conf)||void 0===n?void 0:n.onValueSubmit;return e[t]="function"==typeof i?i(o):o.value,e}),{})},validator(e,t,l){const n=Object.values(null!=t?t:{}).map((e=>e.validate({mode:l.mode})));return Promise.allSettled(n).then((e=>{const t=e.map((e=>"rejected"==e.status?e.reason:null)).filter((e=>e));return t.length>0?Promise.reject(t.join("\n")):Promise.resolve()}))},operators:!1}),hn=150,Qn="xform-bs-subform-columns";function Wn(e,t){const l=(0,z.iH)(!1),o=(0,n.FN)(),i=(0,D.I_)(),M=(0,z.iH)(null),a=(0,D.j9)();let u=null;function s(e){u=e,d()}function r(){u=null,d()}function c(e){l.value=e}function d(){const t=function(e,t){return null==t?{}:e.reduce(((e,l)=>{var n;const o=t[l.name],i=null===(n=o.conf)||void 0===n?void 0:n.onValueSubmit;return e[l.name]="function"==typeof i?i(o):o.value,e}),{})}(e.field.fields,u),n=e.field.fields.map((e=>e.clone(!0)));M.value=i.value.genSchema({fields:n},t),l.value=!0}function N(){l.value=!1}function m(){const l=o.refs.form;if(null==l)return N();l.validate().then((l=>{var n;l.valid&&(null==u?function(l){const n=e.field.fields.reduce(((t,n)=>{const o=n.clone(!0);return o.setValue(l[n.name]),o.setParent(e.field),t[n.name]=o,t}),{}),o=t.value;o.push(n),t.value=o}(l.model):(n=l.model,e.field.fields.forEach((e=>{const t=e.name;u[t].value=n[t]})),u=null),N())}))}function j(e){const l=t.value,n=l.indexOf(e);n>=0&&(l.splice(n,1),t.value=l)}function g(e,t,l){return e>0?null:t?(0,n.Wm)("div",{class:"xform-bs-subform-tip",style:"width: ".concat(l,"px")},[(0,n.Uk)("暂无数据")]):(0,n.Wm)("div",{class:"xform-bs-subform-tip",style:"width: ".concat(l,"px")},[(0,n.Wm)("span",null,[(0,n.Uk)("点击")]),(0,n.Wm)("button",{type:"button",class:"btn btn-link btn-sm shadow-none",onClick:r},[(0,n.Uk)("+ 添加")]),(0,n.Wm)("span",null,[(0,n.Uk)("按钮插入数据")])])}return(0,n.Jd)((()=>{M.value=null,u=null})),function(){var o;const d=e.field.fields.filter((e=>!0!==e.hidden));if(0==d.length)return(0,n.Wm)("div",{class:"xform-is-unknown"},[(0,n.Uk)("请放入至少一个字段")]);const N=e.disabled||e.field.disabled,z=null!==(o=e.field.attributes.colWidths)&&void 0!==o?o:{},{cols:D,total:p}=d.reduce(((e,t)=>{var l;const o=null!==(l=z[t.name])&&void 0!==l?l:hn;return e.total+=o,e.cols.push((0,n.Wm)("col",{style:{width:"".concat(o,"px")}},null)),e}),{cols:[],total:60}),T=t.value.map(((e,t)=>{const l=d.map((t=>{const l=e[t.name],o=a.renderField(l,{parentProps:{disabled:N},renderItem:(e,t)=>(t.custom=!0,(0,n.h)(e,t,(()=>{var e;return null!==(e=l.value)&&void 0!==e?e:i.value.viewerPlaceholder})))});return(0,n.Wm)("td",null,[o])})),o=N?null:(0,n.Wm)("td",{class:"xform-bs-subform-operate"},[(0,n.Wm)("button",{type:"button",class:"btn btn-link shadow-none",onClick:s.bind(null,e)},[(0,n.Uk)("编辑")]),(0,n.Wm)("button",{type:"button",class:"btn btn-link text-danger shadow-none",onClick:j.bind(null,e)},[(0,n.Uk)("删除")])]);return(0,n.Wm)("tr",{class:"xform-bs-subform-row"},[(0,n.Wm)("td",{class:"xform-bs-subform-index"},[t+1]),l,o])})),y=p+(N?0:100),I=N?"#":(0,n.Wm)("button",{type:"button",class:"btn btn-sm btn-link shadow-none",onClick:r},[(0,n.Uk)("添加")]),f=(0,n.Wm)("table",{class:"table table-hover",style:"width: ".concat(y,"px")},[(0,n.Wm)("colgroup",null,[(0,n.Wm)("col",{style:"width: ".concat(60,"px")},null),D,N?null:(0,n.Wm)("col",{style:"width: ".concat(100,"px")},null)]),(0,n.Wm)("thead",null,[(0,n.Wm)("th",{class:"xform-bs-subform-index"},[I]),d.map((e=>{const t={"xform-bs-subform-cell":!0,"xform-is-required":!N&&!e.disabled&&e.required};return(0,n.Wm)("th",{class:t},[(0,n.Wm)("span",null,[e.title])])})),N?null:(0,n.Wm)("th",{class:"xform-bs-subform-operate"},[(0,n.Uk)("操作")])]),(0,n.Wm)("tbody",null,[T])]);return(0,n.Wm)("div",{class:"xform-bs-subform","data-layout":"modal"},[(0,n.Wm)("div",{class:"table-responsive"},[f,g(T.length,N,y)]),(0,n.Wm)((0,n.up)("modal"),(0,n.dG)({title:"".concat(null==u?"添加":"编辑","数据"),class:"xform-bs-subform-modal-layout",onConfirm:m},{visible:l.value,"onUpdate:visible":c}),{default:()=>[(0,n.Wm)((0,n.up)("xform-builder"),{schema:M.value,ref:"form",onSubmit:m},{default:()=>[(0,n.Wm)("button",{class:"xform-is-hidden",type:"submit"},null)]})]})])}}const Pn={class:"xform-bs-field-setting-prop"},_n=(0,n._)("header",null,"表单布局：",-1),Vn={class:"btn-group",role:"group"},Gn={class:"xform-bs-field-setting-prop"},Zn=(0,n._)("header",null,"列宽：",-1),Hn=["placeholder","value","onInput"],Rn={key:0,class:"text-secondary"};const Bn=(0,n.aZ)({name:"xform-bs-subform-setting",props:{field:{type:D.Wi,required:!0}},emits:[D.a9.EVENTS.UPDATE_FIELD],setup(e,t){let{emit:l}=t;return{updateColWidth:function(t,n){const o=t.target,i=parseFloat(o.value),M=e.field.attributes.colWidths;M[n]=isNaN(i)?null:i,l(D.a9.EVENTS.UPDATE_FIELD,{prop:"colWidths",value:M,scope:"attributes"})},update:function(e,t,n){l(D.a9.EVENTS.UPDATE_FIELD,{value:t,prop:e,scope:n})},DEF_COLUMN_WIDTH:hn,getColumnWidth:function(t){return e.field.attributes.colWidths[t]}}},components:{[Pe.name]:Pe}});Bn.render=function(e,t,l,i,M,a){const u=(0,n.up)("field-setting");return(0,n.wg)(),(0,n.j4)(u,{field:e.field,placeholder:!1},{default:(0,n.w5)((()=>[(0,n._)("section",Pn,[_n,(0,n._)("div",Vn,[(0,n._)("button",{type:"button",class:(0,o.C_)(["btn","btn-sm","btn-primary","modal"==e.field.attributes.layout?"active":null]),onClick:t[0]||(t[0]=t=>e.update("layout","modal","attributes")),title:"选中则表单在弹出模态框中编辑"},"窗口",2),(0,n._)("button",{type:"button",class:(0,o.C_)(["btn","btn-sm","btn-primary","inline"==e.field.attributes.layout?"active":null]),onClick:t[1]||(t[1]=t=>e.update("layout","inline","attributes")),title:"选中则表单在表格中直接编辑"},"行内",2)])]),(0,n._)("section",Gn,[Zn,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.field.fields,(t=>{var l;return(0,n.wg)(),(0,n.iD)("div",{class:"xform-bs-subform-column",key:t.uid},[(0,n._)("div",{class:"xform-bs-subform-column-bar",style:(0,o.j5)({width:"".concat(null!==(l=e.getColumnWidth(t.name))&&void 0!==l?l:e.DEF_COLUMN_WIDTH,"px")})},null,4),(0,n._)("label",null,(0,o.zw)(t.title),1),(0,n._)("input",{type:"number",min:"0",placeholder:"默认宽度".concat(e.DEF_COLUMN_WIDTH),class:"form-control form-control-sm",value:e.getColumnWidth(t.name),onInput:l=>e.updateColWidth(l,t.name)},null,40,Hn)])})),128)),0==e.field.fields.length?((0,n.wg)(),(0,n.iD)("div",Rn,"请至少放入一个字段")):(0,n.kq)("",!0)])])),_:1},8,["field"])};const Fn=Bn,{CLASS:qn,PROPS:Jn,EVENTS:Kn,EnumValidateMode:Xn}=D.a9,$n=(0,n.aZ)({name:"xform-bs-subform-preview",props:{field:{type:D.Wi,required:!0}},setup(e){const t=(0,D.j9)();return function(){var l;const o=e.field,i=o.fields,M=null!==(l=o.attributes.colWidths)&&void 0!==l?l:{},a=0==i.length?(0,n.Wm)("p",{class:"".concat(qn.IS_EMPTY_TIP," xform-bs-empty-tip")},[(0,n.Uk)("请将左侧控件拖动到此处")]):i.map((e=>t.renderField(e,{renderItem(){var t;const l={"xform-bs-subform-cell":!0,"xform-is-required":e.required},o={width:"".concat(null!==(t=M[e.name])&&void 0!==t?t:hn,"px")};return(0,n.Wm)("div",{class:l,style:o},[(0,n.Wm)("span",null,[e.title])])}}))),u={class:"".concat(Qn," ").concat(qn.DROPPABLE," ").concat(qn.SCOPE),[Jn.FIELD]:e.field,[Jn.SCOPE]:e.field};return(0,n.Wm)("div",{class:"xform-bs-subform ".concat(qn.IS_VERTICAL_MARK," ").concat(qn.IS_SCROLL)},[(0,n.Wm)("div",u,[a])])}}}),eo=(0,n.aZ)({name:"xform-bs-subform",props:{field:{type:D.Wi,required:!0},disabled:{type:Boolean,default:!1}},emits:[Kn.UPDATE_VALUE],setup(e){const t=(0,D.Hg)(e),l=Wn(e,t),o=function(e,t){const l=(0,D.j9)();function o(){const l=e.field.fields.reduce(((t,l)=>{const n=l.clone(!0);return n.setParent(e.field),t[l.name]=n,t}),{}),n=t.value;n.push(l),t.value=n}function i(e){const l=t.value,n=l.indexOf(e);n>=0&&(l.splice(n,1),t.value=l)}function M(e,t,l){return e>0?null:t?(0,n.Wm)("div",{class:"xform-bs-subform-tip",style:"width: ".concat(l,"px")},[(0,n.Uk)("暂无数据")]):(0,n.Wm)("div",{class:"xform-bs-subform-tip",style:"width: ".concat(l,"px")},[(0,n.Wm)("span",null,[(0,n.Uk)("点击")]),(0,n.Wm)("button",{type:"button",class:"btn btn-link btn-sm shadow-none",onClick:o},[(0,n.Uk)("+ 添加")]),(0,n.Wm)("span",null,[(0,n.Uk)("按钮插入数据")])])}return function(){var a;const u=e.field.fields.filter((e=>!0!==e.hidden));if(0==u.length)return(0,n.Wm)("div",{class:"xform-is-unknown"},[(0,n.Uk)("请放入至少一个字段")]);const s=e.disabled||e.field.disabled,r=null!==(a=e.field.attributes.colWidths)&&void 0!==a?a:{},{cols:c,total:d}=u.reduce(((e,t)=>{var l;const o=null!==(l=r[t.name])&&void 0!==l?l:hn;return e.total+=o,e.cols.push((0,n.Wm)("col",{style:{width:"".concat(o,"px")}},null)),e}),{cols:[],total:60}),N=t.value.map(((e,t)=>{const o=u.map((t=>{const o=l.renderField(e[t.name],{parentProps:{disabled:s},renderItem:(e,t,l)=>(t.label=!1,(0,n.h)(e,t,l))});return(0,n.Wm)("td",null,[o])}));return(0,n.Wm)("tr",{class:"xform-bs-subform-row"},[(0,n.Wm)("td",{class:"xform-bs-subform-index"},[(0,n.Wm)("strong",null,[t+1]),s?null:(0,n.Wm)("button",{type:"button",class:"btn btn-link text-danger",onClick:i.bind(null,e)},[(0,n.Uk)("删除")])]),o])})),z=s?"#":(0,n.Wm)("button",{type:"button",class:"btn btn-link btn-sm shadow-none",onClick:o},[(0,n.Uk)("添加")]);return(0,n.Wm)("div",{class:"xform-bs-subform","data-layout":"inline"},[(0,n.Wm)("div",{class:"table-responsive"},[(0,n.Wm)("table",{class:"table table-hover",style:{width:d+"px"}},[(0,n.Wm)("colgroup",null,[(0,n.Wm)("col",{style:"width: ".concat(60,"px")},null),c]),(0,n.Wm)("thead",null,[(0,n.Wm)("th",{class:"xform-bs-subform-index"},[z]),u.map((e=>{const t={"xform-bs-subform-cell":!0,"xform-is-required":!s&&!e.disabled&&e.required};return(0,n.Wm)("th",{class:t},[(0,n.Wm)("span",null,[e.title])])}))]),(0,n.Wm)("tbody",null,[N])]),M(N.length,s,d)])])}}(e,t);return function(){return"inline"==e.field.attributes.layout?o():l()}},components:{[Oe.name]:Oe}}),to=(0,n.aZ)({name:"xform-bs-subform-view",props:{field:{type:D.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup(e){const t=(0,D.Hg)(e),l=(0,D.j9)(),o=(0,D.I_)();return function(){var i;const M=e.field.fields;if(!Array.isArray(t.value)||0==t.value.length||0==M.length)return(0,n.Wm)("span",{class:"xform-viewer-value"},[o.value.viewerPlaceholder]);const a=null!==(i=e.field.attributes.colWidths)&&void 0!==i?i:{},{cols:u,total:s}=M.reduce(((e,t)=>{var l;const o=null!==(l=a[t.name])&&void 0!==l?l:hn;return e.total+=o,e.cols.push((0,n.Wm)("col",{style:"width: ".concat(o,"px")},null)),e}),{cols:[],total:60}),r=t.value.map(((t,o)=>{const i=M.map((o=>(0,n.Wm)("td",null,[l.renderField(t[o.name],{parentProps:{disabled:e.disabled},renderItem:(e,t,l)=>l()})]))),a=(0,n.Wm)("td",{class:"xform-bs-subform-operate"},[(0,n.Wm)("strong",null,[o+1])]);return(0,n.Wm)("tr",null,[a,i])}));return(0,n.Wm)("div",{class:"xform-bs-subform xform-bs-subform-view"},[(0,n.Wm)("div",{class:"table-responsive"},[(0,n.Wm)("table",{class:"table table-hover",style:{width:s+"px"}},[(0,n.Wm)("colgroup",null,[(0,n.Wm)("col",{style:"width: ".concat(60,"px")},null),u]),(0,n.Wm)("thead",null,[(0,n.Wm)("th",{class:"xform-bs-subform-operate"},[(0,n.Uk)("#")]),M.map((t=>{const l={"xform-bs-subform-cell":!0,"xform-is-required":!e.disabled&&!t.disabled&&t.required};return(0,n.Wm)("th",{class:l},[(0,n.Wm)("span",null,[t.title])])}))]),(0,n.Wm)("tbody",null,[r])])])])}}}),lo={name:"bootstrap",version:"0.6.0",slots:{setting_form:T},fieldConfs:[He,tt,dt,Ut,il,wl,_l,un,An,Sn,D.w1.create({type:"subform",title:"子表单",icon:"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+CiAgPHBhdGggZD0iTTg3My42MDcxNDI5NyA5MC4xMjVhNjAuMjY3ODU3MDIgNjAuMjY3ODU3MDIgMCAwIDEgNjAuMjY3ODU3MDMgNjAuMjY3ODU3MDJ2NzIzLjIxNDI4NTk1YTYwLjI2Nzg1NzAyIDYwLjI2Nzg1NzAyIDAgMCAxLTYwLjI2Nzg1NzAyIDYwLjI2Nzg1NzAzSDE1MC4zOTI4NTcwM2E2MC4yNjc4NTcwMiA2MC4yNjc4NTcwMiAwIDAgMS02MC4yNjc4NTcwMy02MC4yNjc4NTcwM1YxNTAuMzkyODU3MDNhNjAuMjY3ODU3MDIgNjAuMjY3ODU3MDIgMCAwIDEgNjAuMjY3ODU3MDItNjAuMjY3ODU3MDNoNzIzLjIxNDI4NTk1eiBtLTMwLjEzMzkyODkyIDYwLjI2Nzg1NzAyaC02NjIuOTQ2NDI4MTFhMzAuMTMzOTI4OTIgMzAuMTMzOTI4OTIgMCAwIDAtMjkuNjUxNzg1OTQgMjQuNzA5ODIxOUwxNTAuMzkyODU3MDMgMTgwLjUyNjc4NTk1djY2Mi45NDY0MjgxYTMwLjEzMzkyODkyIDMwLjEzMzkyODkyIDAgMCAwIDI0LjcwOTgyMTg5IDI5LjY1MTc4NTk1TDE4MC41MjY3ODU5NSA4NzMuNjA3MTQyOTdoNjYyLjk0NjQyODFhMzAuMTMzOTI4OTIgMzAuMTMzOTI4OTIgMCAwIDAgMjkuNjUxNzg1OTUtMjQuNzA5ODIxODlMODczLjYwNzE0Mjk3IDg0My40NzMyMTQwNXYtNjYyLjk0NjQyODFhMzAuMTMzOTI4OTIgMzAuMTMzOTI4OTIgMCAwIDAtMzAuMTMzOTI4OTItMzAuMTMzOTI4OTJ6IG0tNTQyLjQxMDcxNDA1IDQ4Mi4xNDI4NTcwM2EzMC4xMzM5Mjg5MiAzMC4xMzM5Mjg5MiAwIDAgMSAzMC4xMzM5Mjg5MiAzMC4xMzM5Mjg5MnYzMC4xMzM5MjgxaDMwLjEzMzkyODFhMzAuMTMzOTI4OTIgMzAuMTMzOTI4OTIgMCAwIDEgMWUtOCA2MC4yNjc4NTc4NkgzMzEuMTk2NDI4OTN2MzAuMTMzOTI4MWEzMC4xMzM5Mjg5MiAzMC4xMzM5Mjg5MiAwIDAgMS02MC4yNjc4NTc4NSAwVjc1My4wNzE0Mjg5M2gtMzAuMTMzOTI4MWEzMC4xMzM5Mjg5MiAzMC4xMzM5Mjg5MiAwIDAgMSAwLTYwLjI2Nzg1Nzg1SDI3MC45Mjg1NzEwN3YtMzAuMTMzOTI4MWEzMC4xMzM5Mjg5MiAzMC4xMzM5Mjg5MiAwIDAgMSAzMC4xMzM5Mjg5My0zMC4xMzM5Mjg5MnogbTYwLjI2Nzg1NzAyLTEyMC41MzU3MTQwNWEzMC4xMzM5Mjg5MiAzMC4xMzM5Mjg5MiAwIDAgMSAwIDYwLjI2Nzg1NzAyaC0xMjAuNTM1NzE0MDRhMzAuMTMzOTI4OTIgMzAuMTMzOTI4OTIgMCAwIDEgMC02MC4yNjc4NTcwMmgxMjAuNTM1NzE0MDV6IG00MjEuODc1MDAwMDEgMGEzMC4xMzM5Mjg5MiAzMC4xMzM5Mjg5MiAwIDAgMS0xZS04IDYwLjI2Nzg1NzAyaC0zMDEuMzM5Mjg1OTRhMzAuMTMzOTI4OTIgMzAuMTMzOTI4OTIgMCAwIDEgMC02MC4yNjc4NTcwMmgzMDEuMzM5Mjg1OTV6IG0tNDIxLjg3NTAwMDAxLTEyMC41MzU3MTQwNWEzMC4xMzM5Mjg5MiAzMC4xMzM5Mjg5MiAwIDAgMSAxZS04IDYwLjI2Nzg1NzAyaC0xMjAuNTM1NzE0MDVhMzAuMTMzOTI4OTIgMzAuMTMzOTI4OTIgMCAwIDEgMC02MC4yNjc4NTcwMmgxMjAuNTM1NzE0MDV6IG00MjEuODc1MDAwMDEgMGEzMC4xMzM5Mjg5MiAzMC4xMzM5Mjg5MiAwIDAgMS0xZS04IDYwLjI2Nzg1NzAyaC0zMDEuMzM5Mjg1OTRhMzAuMTMzOTI4OTIgMzAuMTMzOTI4OTIgMCAwIDEgMC02MC4yNjc4NTcwMmgzMDEuMzM5Mjg1OTV6IG0tNDIxLjg3NTAwMDAxLTEyMC41MzU3MTQ4OGEzMC4xMzM5Mjg5MiAzMC4xMzM5Mjg5MiAwIDAgMSAxZS04IDYwLjI2Nzg1Nzg1aC0xMjAuNTM1NzE0MDVhMzAuMTMzOTI4OTIgMzAuMTMzOTI4OTIgMCAwIDEgMC02MC4yNjc4NTc4NWgxMjAuNTM1NzE0MDV6IG00MjEuODc1MDAwMDEgMGEzMC4xMzM5Mjg5MiAzMC4xMzM5Mjg5MiAwIDAgMS0xZS04IDYwLjI2Nzg1Nzg1aC0zMDEuMzM5Mjg1OTRhMzAuMTMzOTI4OTIgMzAuMTMzOTI4OTIgMCAwIDEgMC02MC4yNjc4NTc4NWgzMDEuMzM5Mjg1OTV6Ij48L3BhdGg+Cjwvc3ZnPg==",accept:["text","textarea","number","select","radio","checkbox","date"],setting:Fn,preview:$n,build:eo,view:to,onDragOver(e){const t=e.currentTarget;if(!t.matches("."+Qn))return;e.stopPropagation(),e.preventDefault();const{directionX:l,moveMarkEl:n,getRootScopeEl:o}=e.context,i=e.dragElement.contains(t);n(l,i?e.dragElement:e.target,i?o():t)},onDrop(e){e.stopPropagation()},onCreate(e,t,l){l&&(e.attributes.colWidths={},e.attributes.layout="modal")},onSubmit(e){var t,l;const n=null!==(t=null===(l=e.attributes)||void 0===l?void 0:l.colWidths)&&void 0!==t?t:{},o=e.fields.map((e=>e.name));for(const e in n)o.indexOf(e)<0&&delete n[e];return e},onValueInit(e,t){if(!Array.isArray(t))return[];const l=e.fields;return t.map((t=>l.reduce(((l,n)=>{var o;const i=n.clone(!0);return i.setValue(null!==(o=t[n.name])&&void 0!==o?o:null),i.setParent(e),l[n.name]=i,l}),{})))},onValueSubmit(e){if(!Array.isArray(e.value))return null;const t=e.fields;return e.value.map((e=>t.map((e=>e.name)).reduce(((t,l)=>{var n;const o=e[l],i=null===(n=o.conf)||void 0===n?void 0:n.onValueSubmit;return t[o.name]="function"==typeof i?i(o):o.value,t}),{})))},validator(e,t,l){if(e.required&&(0,D.xb)(t))return Promise.reject("必填");const n=t.reduce(((e,t)=>e.concat(Object.values(t))),[]).map((e=>l.mode==Xn.RECURSIVE?e.validate({mode:Xn.RECURSIVE}):e.invalid?Promise.reject():Promise.resolve()));return Promise.allSettled(n).then((e=>e.some((e=>"rejected"===e.status))?Promise.reject("请补全必填内容"):Promise.resolve()))},onValidate:e=>(0,D.xb)(e.title)?Promise.reject("标题为空"):0==e.fields.length?Promise.reject("至少需要一个字段"):Promise.resolve(),operators:!1})]}}}]);