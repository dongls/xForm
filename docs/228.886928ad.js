"use strict";(self.webpackChunkxform=self.webpackChunkxform||[]).push([[228],{503:(e,l,t)=>{t.r(l),t.d(l,{default:()=>dr});t(9554),t(1539),t(4747);var n=t(7754),r=t(6252),a={class:"xform-setting"},u=(0,r._)("header",null,"标题后缀：",-1),o={class:"xform-setting"},i=(0,r._)("header",null,"空值显示为：",-1),d={class:"xform-setting"},s=(0,r._)("header",null,"标题位置：",-1),c=(0,r.Uk)("左对齐"),f=(0,r.Uk)("顶部对齐"),p=(0,r.Uk)("右对齐");t(2479),t(6699),t(2023);var m=t(1207),v=(0,n.hS)(),b=v.EVENTS,g=v.LabelPosition,y=Object.values(g);const h=(0,r.aZ)({name:"xform-el-setting",props:{schema:{type:n.GH,required:!0}},emits:[b.UPDATE_PROP],setup:function(){return{LabelPosition:g,labelPosition:(0,m.yj)("labelPosition",(function(e){var l=e.labelPosition;return y.includes(l)?l:g.LEFT})),labelSuffix:(0,m.yj)("labelSuffix"),viewerPlaceholder:(0,m.yj)("viewerPlaceholder")}}});var w=t(3744);const x=(0,w.Z)(h,[["render",function(e,l,t,n,m,v){var b=(0,r.up)("el-input"),g=(0,r.up)("el-radio-button"),y=(0,r.up)("el-radio-group");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("section",a,[u,(0,r.Wm)(b,{modelValue:e.labelSuffix,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.labelSuffix=l}),size:"small",placeholder:"请输入标题后缀..."},null,8,["modelValue"])]),(0,r._)("section",o,[i,(0,r.Wm)(b,{modelValue:e.viewerPlaceholder,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.viewerPlaceholder=l}),size:"small",placeholder:"查看表单时如果值为空，则显示输入值"},null,8,["modelValue"])]),(0,r._)("section",d,[s,(0,r.Wm)(y,{modelValue:e.labelPosition,"onUpdate:modelValue":l[2]||(l[2]=function(l){return e.labelPosition=l}),size:"small"},{default:(0,r.w5)((function(){return[(0,r.Wm)(g,{label:e.LabelPosition.LEFT},{default:(0,r.w5)((function(){return[c]})),_:1},8,["label"]),(0,r.Wm)(g,{label:e.LabelPosition.TOP},{default:(0,r.w5)((function(){return[f]})),_:1},8,["label"]),(0,r.Wm)(g,{label:e.LabelPosition.RIGHT},{default:(0,r.w5)((function(){return[p]})),_:1},8,["label"])]})),_:1},8,["modelValue"])])],64)}]]);t(8674),t(9753);var V=t(1683),W=(t(8309),t(3577));var k=t(2262);const _=(0,r.aZ)({name:"xform-el-checkbox",props:{field:{type:n.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){return{value:(0,m.Hg)([]),className:(0,k.Fl)((function(){var l=["xform-el-checkbox"];return"block"==e.field.attributes.layout&&l.push("xform-el-checkbox-block"),l}))}}}),P=(0,w.Z)(_,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-checkbox"),i=(0,r.up)("el-checkbox-group");return(0,r.wg)(),(0,r.j4)(i,{modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.value=l}),size:"small",disabled:e.disabled||e.field.disabled,class:(0,W.C_)(e.className)},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.field.options,(function(l,t){return(0,r.wg)(),(0,r.j4)(o,{key:t,label:l.value,name:e.field.name},null,8,["label","name"])})),128))]})),_:1},8,["modelValue","disabled","class"])}]]);var E={class:"xform-el-field-setting-prop"},O=(0,r._)("header",null,"布局：",-1),U=(0,r.Uk)("行内"),j=(0,r.Uk)("换行"),S={class:"xform-el-field-setting-prop"},T=(0,r._)("header",null,"选项：",-1),D=(0,r.Uk)("删除"),C=(0,r.Uk)("添加选项"),A={class:"xform-el-field-setting-prop"},I=(0,r._)("header",null,"默认值：",-1);t(7327),t(5212),t(9070),t(7941),t(2526),t(5003),t(9337),t(3321);var N={class:"xform-el-field-setting-head"},R={class:"xform-el-field-setting-prop"},Z=(0,r._)("header",null,"标题：",-1),L={key:0,class:"xform-el-field-setting-prop"},z=(0,r._)("header",null,"提示：",-1),q={key:1,class:"xform-el-field-setting-prop"},M=(0,r._)("header",null,"属性：",-1),F=(0,r.Uk)("必填"),H=(0,r.Uk)("禁用"),Y=(0,r.Uk)("隐藏");var B={class:"xform-el-field-setting-prop"},K=(0,r._)("span",{title:"如果满足配置的条件则显示字段，否则隐藏字段"},"逻辑：",-1),G=(0,r.Uk)("配置"),Q={class:"xform-el-logic-main"},X={class:"xform-el-logic-panel xform-is-scroll"},J={class:"xform-el-logic-common-rule"},$=(0,r._)("h5",null,"通用规则",-1),ee={key:0,class:"xform-el-logic-text-secondary"},le=(0,r.Uk)("添加"),te={class:"xform-el-logic-field-rule"},ne=(0,r._)("strong",null,"字段规则",-1),re=(0,r.Uk)("返回"),ae={key:0},ue=["onClick"],oe={key:0,class:"xform-el-logic-field-rule-tip"},ie={key:1},de={key:0,class:"xform-el-logic-text-secondary"},se=(0,r.Uk)("添加"),ce={class:"xform-el-logic-graph xform-is-scroll"},fe={key:0,class:"xform-el-logic-errors"},pe=(0,r.Uk)("取消"),me=(0,r.Uk)("确定");var ve;t(7042),t(1038),t(8783),t(4916),t(2165),t(6992),t(3948),t(1817),t(9826),t(4812),t(1249),t(2772),t(561),t(2564);function be(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}function ge(e,l){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,l){if(!e)return;if("string"==typeof e)return ye(e,l);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ye(e,l)}(e))||l&&e&&"number"==typeof e.length){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){o=!0,a=e},f:function(){try{u||null==t.return||t.return()}finally{if(o)throw a}}}}function ye(e,l){(null==l||l>e.length)&&(l=e.length);for(var t=0,n=new Array(l);t<l;t++)n[t]=e[t];return n}var he=(0,n.hS)().BuiltInLogicOperator,we=[he.AND,he.OR,he.NOT];function xe(e){var l=(0,n.jQ)(e);return null!=l&&!0===l.hasCondition}function Ve(e){var l,t=(0,n.jQ)(e);return null==t?"N/A":null!==(l=t.description)&&void 0!==l?l:t.label}function We(e){return xe(e)?(0,r.Wm)("header",null,[(0,r.Uk)("如果"),(0,r.Wm)("strong",null,[Ve(e)]),(0,r.Uk)("条件被满足：")]):null}function ke(e,l){if(!Array.isArray(e.condition)||0==e.condition.length)return null;var t,n=ge(e.condition);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r==l)return e;var a=ke(r,l);if(null!=a)return a}}catch(e){n.e(e)}finally{n.f()}return null}function _e(e){if(null==e)return null;var l=e.condition;if(Array.isArray(l)){if(0==l.length)return!1;var t,n=ge(l);try{for(n.s();!(t=n.n()).done;){var r=_e(t.value);if(r)return r}}catch(e){n.e(e)}finally{n.f()}}return!!e.name&&!(e.operator!=he.EMPTY&&!e.value)}var Pe=(0,r.aZ)({name:"logic-rule-preview",props:{rule:{type:Object,default:null},field:{type:n.Wi,required:!0}},emits:["choose"],setup:function(e){var l=(0,n.j9)();function t(e,t){t.stopPropagation(),null!=e&&l.chooseField(e)}function a(l){var n,a;if(xe(l.operator))return null;var u=null===(n=e.field.parent)||void 0===n?void 0:n.find(l.name),o=null!=u?(0,r.Wm)("a",{href:"javascript:;",onClick:t.bind(null,u)},[u.title]):(0,r.Wm)("strong",null,[(0,r.Uk)("N/A")]);return(0,r.Wm)("div",{class:"xform-el-logic-preview-content"},[(0,r.Wm)("span",null,[(0,r.Uk)("如果")]),o,(0,r.Wm)("span",null,[(0,r.Uk)("的值")]),(0,r.Wm)("strong",null,[Ve(l.operator)]),l.operator==he.EMPTY?null:(0,r.Wm)("strong",null,[null!==(a=l.value)&&void 0!==a?a:"N/A"])])}return function(){var l=e.rule;if(null==l)return(0,r.Wm)("span",{class:"xform-el-logic-rule-preview xform-el-logic-text-secondary"},[(0,r.Uk)("该字段尚未配置逻辑，请先添加一条规则")]);var t=xe(l.operator),n={"xform-el-logic-rule-preview":!0,"has-condition":t},u=t?Array.isArray(l.condition)&&l.condition.length>0?l.condition.map((function(l){return(0,r.Wm)((0,r.up)("logic-rule-preview"),{rule:l,field:e.field},null)})):(0,r.Wm)("div",{class:"xform-el-logic-rule-preview xform-el-logic-text-secondary"},[(0,r.Uk)("请先添加一条子规则")]):null;return(0,r.Wm)("div",{class:n},[We(l.operator),a(l),u])}}}),Ee=(0,r.aZ)({name:"logic-rule",props:{rule:{type:Object,default:null},selected:{type:Object,default:null},first:{type:String,default:null},last:{type:String,default:null},parent:{type:Object,default:null},field:{type:n.Wi,required:!0}},emits:["select","remove"],setup:function(e,l){var t=l.emit;function a(e){t("select",e)}function u(e){t("remove",e)}function o(l){l.stopPropagation(),a(e.rule)}function i(l){l.stopPropagation(),u(e.rule)}function d(l){l.stopPropagation();var t=e.parent;if(null!=t){var n=e.rule,r=t.condition,a=r.indexOf(n),u=r.splice(a,1)[0];r.splice(a-1,0,u)}}function s(l){l.stopPropagation();var t=e.parent;if(null!=t){var n=e.rule,r=t.condition,a=r.indexOf(n),u=r.splice(a+1,1)[0];r.splice(a,0,u)}}function c(l){return l?(0,r.Wm)("div",{class:"xform-el-logic-rule-buttons"},["N"===e.first&&(0,r.Wm)("a",{href:"javascript:;",onClick:d},[(0,r.Uk)("上移")]),"N"===e.last&&(0,r.Wm)("a",{href:"javascript:;",onClick:s},[(0,r.Uk)("下移")]),(0,r.Wm)("a",{href:"javascript:;",onClick:i,class:"xform-el-logic-is-danger"},[(0,r.Uk)("删除")])]):null}return function(){var l=e.rule;if(null==l)return(0,r.Wm)("div",{class:"xform-el-logic-empty"},[(0,r.Uk)("请先添加一条规则")]);var t=e.selected==e.rule,i=xe(l.operator),d={"xform-el-logic-rule":!0,"has-condition":i,"is-selected":t},s=i?Array.isArray(l.condition)&&l.condition.length>0?l.condition.map((function(t,n){return(0,r.Wm)((0,r.up)("logic-rule"),{rule:t,field:e.field,selected:e.selected,onSelect:a,onRemove:u,first:0==n?"Y":"N",last:n==l.condition.length-1?"Y":"N",parent:l},null)})):(0,r.Wm)("div",{class:"xform-el-logic-tips"},[(0,r.Uk)("请先添加一条子规则")]):null,f=We(l.operator),p=function(e,l){if(xe(e.operator))return null;var t=e.operator==he.EMPTY?null:(0,r.Wm)((0,r.up)("el-input"),{size:"small",placeholder:"目标值",modelValue:e.value,"onUpdate:modelValue":function(l){return e.value=l}},null),a=l.previous().find((function(l){return l.name==e.name})),u=(0,n.jQ)(e.operator);return(0,r.Wm)("div",{class:"xform-el-logic-rule-content"},[(0,r.Wm)("span",null,[(0,r.Uk)("如果")]),(0,r.Wm)("strong",null,[a?a.title:"N/A"]),(0,r.Wm)("span",null,[(0,r.Uk)("的值")]),(0,r.Wm)("strong",null,[u.label]),t])}(l,e.field);return(0,r.Wm)("div",{class:d,onClick:o},[f,p,c(t),s])}}});const Oe=(0,r.aZ)({name:"field-logic",props:{field:{type:n.Wi,required:!0}},setup:function(e){var l=(0,n.j9)(),t=(0,k.iH)(!1),a=(0,k.iH)(null),u=(0,k.iH)(null),o=(0,k.iH)(null),i=(0,k.iH)(null),d=(0,k.iH)(!1),s=(0,k.Fl)((function(){return null==u.value&&null!=a.value||null!=u.value&&!xe(u.value.operator)}));var c=(0,k.Fl)((function(){return e.field.previous().filter((function(e){var l,t=null===(l=e.conf)||void 0===l?void 0:l.operators;return!(!1===t||Array.isArray(t)&&0==t.length)}))})),f=(0,k.Fl)((function(){var e;if(null==o.value)return[];var l=null===(e=o.value.conf)||void 0===e?void 0:e.operators;return(0,n.vU)(Array.isArray(l)?l:null).filter((function(e){return we.indexOf(e.value)<0}))}));return{commonOperators:(0,k.Fl)((function(){return(0,n.vU)(we)})),disabled:s,errorMessage:i,logic:a,fieldOperators:f,previousFields:c,selectedField:o,selectedRule:u,showErrorMessage:d,visible:t,add:function(e){var l=o.value;o.value=null;var t=function(e,l){return xe(e)?{operator:e,condition:[]}:{operator:e,name:l.name,value:null}}(e,l);if(null==a.value)return a.value=t,void(u.value=t);xe(u.value.operator)?u.value.condition.push(t):u.value=t},remove:function(){var e=u.value;if(a.value==e)a.value=null;else{var l=ke(a.value,e),t=l.condition.indexOf(e);t>=0&&l.condition.splice(t,1)}u.value=null},save:function(){if(!1===_e(a.value)){var n=!1;if(l.emit("message",{type:"logic.validate",valid:!1,title:"字段逻辑验证失败",content:(0,r.Wm)("div",{class:"xform-el-logic-error-content"},[(0,r.Wm)("h5",null,[(0,r.Uk)("如果存在以下未填写字段，请先补全：")]),(0,r.Wm)("p",null,[(0,r.Uk)("-"),(0,r.Wm)("strong",null,[(0,r.Uk)("目标字段")])]),(0,r.Wm)("p",null,[(0,r.Uk)("-"),(0,r.Wm)("strong",null,[(0,r.Uk)("目标值")])]),(0,r.Wm)("p",null,[(0,r.Uk)("-"),(0,r.Wm)("strong",null,[(0,r.Uk)("子规则")])])]),message:"如果存在以下未填写字段，请先补全：\n - 目标字段\n - 目标值\n - 子规则",preventDefault:function(){return n=!0}}),n)return;return i.value="字段逻辑验证失败，请补全以下内容：目标字段、目标值、子规则",d.value=!0,setTimeout((function(){d.value=!1}),3500)}l.updateField(e.field,{prop:"logic",value:a.value}),t.value=!1},selectField:function(e){s.value||(o.value=e)},selectRule:function(e){u.value=e,o.value=null},showModal:function(){var l,n=JSON.parse(JSON.stringify(null!==(l=e.field.logic)&&void 0!==l?l:null));a.value=n,u.value=n,o.value=null,t.value=!0}}},components:(ve={},be(ve,Ee.name,Ee),be(ve,Pe.name,Pe),ve)}),Ue=(0,w.Z)(Oe,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-button"),i=(0,r.up)("logic-rule-preview"),d=(0,r.up)("logic-rule"),s=(0,r.up)("el-dialog");return(0,r.wg)(),(0,r.iD)("section",B,[(0,r._)("header",null,[K,(0,r.Wm)(o,{type:"text",onClick:e.showModal,class:"is-logic-btn","auto-insert-space":!1},{default:(0,r.w5)((function(){return[G]})),_:1},8,["onClick"])]),(0,r.Wm)(i,{rule:e.field.logic,field:e.field},null,8,["rule","field"]),(0,r.Wm)(s,{modelValue:e.visible,"onUpdate:modelValue":l[2]||(l[2]=function(l){return e.visible=l}),title:"配置逻辑",width:"840px","custom-class":"xform-el-logic-dialog","append-to-body":""},{footer:(0,r.w5)((function(){return[e.showErrorMessage?((0,r.wg)(),(0,r.iD)("div",fe,(0,W.zw)(e.errorMessage),1)):(0,r.kq)("",!0),(0,r.Wm)(o,{onClick:l[1]||(l[1]=function(l){return e.visible=!1}),size:"small"},{default:(0,r.w5)((function(){return[pe]})),_:1}),(0,r.Wm)(o,{onClick:e.save,type:"primary",size:"small"},{default:(0,r.w5)((function(){return[me]})),_:1},8,["onClick"])]})),default:(0,r.w5)((function(){return[(0,r._)("div",Q,[(0,r._)("div",X,[(0,r._)("div",J,[$,(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.commonOperators,(function(l){return(0,r.wg)(),(0,r.iD)("div",{key:l.value,class:(0,W.C_)(["xform-el-logic-operator",{"xform-is-disabled":e.disabled}])},[(0,r._)("strong",null,(0,W.zw)(l.label),1),l.code?((0,r.wg)(),(0,r.iD)("small",ee,(0,W.zw)(l.code),1)):(0,r.kq)("",!0),(0,r.Wm)(o,{type:"text",onClick:function(t){return e.add(l.value)},"auto-insert-space":!1},{default:(0,r.w5)((function(){return[le]})),_:2},1032,["onClick"])],2)})),128))])]),(0,r._)("div",te,[(0,r._)("h5",null,[ne,null!=e.selectedField?((0,r.wg)(),(0,r.j4)(o,{key:0,type:"text",onClick:l[0]||(l[0]=function(l){return e.selectedField=null}),"auto-insert-space":!1},{default:(0,r.w5)((function(){return[re]})),_:1})):(0,r.kq)("",!0)]),null==e.selectedField?((0,r.wg)(),(0,r.iD)("div",ae,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.previousFields,(function(l){return(0,r.wg)(),(0,r.iD)("div",{key:l.name,class:(0,W.C_)(["xform-el-logic-field",{"xform-is-selected":l==e.selectedField,"xform-is-disabled":e.disabled}]),onClick:function(t){return e.selectField(l)}},[(0,r._)("strong",null,(0,W.zw)(l.title),1)],10,ue)})),128)),0==e.previousFields.length?((0,r.wg)(),(0,r.iD)("div",oe,"暂无可用的字段规则")):(0,r.kq)("",!0)])):(0,r.kq)("",!0),e.fieldOperators.length>0?((0,r.wg)(),(0,r.iD)("div",ie,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.fieldOperators,(function(l){return(0,r.wg)(),(0,r.iD)("div",{key:l.value,class:(0,W.C_)(["xform-el-logic-operator",{"xform-is-disabled":e.disabled}])},[(0,r._)("strong",null,(0,W.zw)(l.label),1),l.code?((0,r.wg)(),(0,r.iD)("small",de,(0,W.zw)(l.code),1)):(0,r.kq)("",!0),(0,r.Wm)(o,{type:"text",onClick:function(t){return e.add(l.value)},"auto-insert-space":!1},{default:(0,r.w5)((function(){return[se]})),_:2},1032,["onClick"])],2)})),128))])):(0,r.kq)("",!0)])]),(0,r._)("div",ce,[(0,r.Wm)(d,{rule:e.logic,field:e.field,selected:e.selectedRule,onSelect:e.selectRule,onRemove:e.remove},null,8,["rule","field","selected","onSelect","onRemove"])])])]})),_:1},8,["modelValue"])])}]]);const je=(0,r.aZ)({name:"field-setting",props:{field:{type:n.Wi,required:!0},placeholder:{type:Boolean,default:!0},required:{type:Boolean,default:!0},logic:{type:Boolean,default:!0},attributes:{type:Boolean,default:!0}},setup:function(e){return{fieldRef:(0,k.Vh)(e,"field"),allowLogic:(0,k.Fl)((function(){return!0===(0,n.iE)().logic}))}},components:(Se={},Te=Ue.name,De=Ue,Te in Se?Object.defineProperty(Se,Te,{value:De,enumerable:!0,configurable:!0,writable:!0}):Se[Te]=De,Se)});var Se,Te,De;const Ce=(0,w.Z)(je,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-input"),i=(0,r.up)("el-checkbox"),d=(0,r.up)("field-logic");return(0,r.wg)(),(0,r.iD)("div",{class:(0,W.C_)("xform-el-field-setting xform-el-".concat(e.fieldRef.type,"-setting"))},[(0,r._)("h3",N,(0,W.zw)(e.field.conf.title),1),(0,r._)("section",R,[Z,(0,r.Wm)(o,{size:"small",placeholder:"[必填] 请输入标题...",modelValue:e.fieldRef.title,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.fieldRef.title=l})},null,8,["modelValue"]),(0,r.WI)(e.$slots,"title")]),e.placeholder?((0,r.wg)(),(0,r.iD)("section",L,[z,(0,r.Wm)(o,{type:"textarea",size:"small",placeholder:"[可选] 请输入提示信息...",rows:"3",modelValue:e.fieldRef.placeholder,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.fieldRef.placeholder=l})},null,8,["modelValue"])])):(0,r.kq)("",!0),e.attributes?((0,r.wg)(),(0,r.iD)("section",q,[M,e.required?((0,r.wg)(),(0,r.j4)(i,{key:0,size:"small",modelValue:e.fieldRef.required,"onUpdate:modelValue":l[2]||(l[2]=function(l){return e.fieldRef.required=l}),name:"".concat(e.field.name,"-required"),title:"勾选则该字段在表单提交时必须填写"},{default:(0,r.w5)((function(){return[F]})),_:1},8,["modelValue","name"])):(0,r.kq)("",!0),(0,r.Wm)(i,{size:"small",modelValue:e.fieldRef.disabled,"onUpdate:modelValue":l[3]||(l[3]=function(l){return e.fieldRef.disabled=l}),name:"".concat(e.field.name,"-disabled"),title:"勾选则该字段在表单中无法编辑, 也不参与表单验证"},{default:(0,r.w5)((function(){return[H]})),_:1},8,["modelValue","name"]),(0,r.Wm)(i,{size:"small",modelValue:e.fieldRef.hidden,"onUpdate:modelValue":l[4]||(l[4]=function(l){return e.fieldRef.hidden=l}),name:"".concat(e.field.name,"-hidden"),title:"勾选则该字段将不会再表单中显示"},{default:(0,r.w5)((function(){return[Y]})),_:1},8,["modelValue","name"]),(0,r.WI)(e.$slots,"attributes")])):(0,r.kq)("",!0),(0,r.WI)(e.$slots,"default"),e.allowLogic?((0,r.wg)(),(0,r.j4)(d,{key:2,field:e.fieldRef,"onUpdate:field":l[5]||(l[5]=function(l){return e.fieldRef=l})},null,8,["field"])):(0,r.kq)("",!0)],2)}]]);function Ae(e,l){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);l&&(n=n.filter((function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),t.push.apply(t,n)}return t}function Ie(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}var Ne=(0,n.hS)(),Re=Ne.BuiltInDefaultValueType,Ze=Ne.EVENTS;const Le=(0,r.aZ)({name:"xform-el-checkbox-setting",props:{field:n.Wi},emits:[Ze.UPDATE_FIELD],setup:function(){var e=[{value:Re.MANUAL,label:"手动指定"},{value:Re.OPTION_ALL,label:"全部选项"}],l=(0,m.D2)((function(){if(!n.value)return;var e=l.options.value,t=a.value;a.value=t.filter((function(l){return e.some((function(e){return e.value==l}))}))})),t=(0,m.Xu)(e),n=t.useIsManual(),r=t.useCompatType(),a=t.useCompatValue((function(e){var l=e.value;return Array.isArray(l)?l:[]}));return function(e){for(var l=1;l<arguments.length;l++){var t=null!=arguments[l]?arguments[l]:{};l%2?Ae(Object(t),!0).forEach((function(l){Ie(e,l,t[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ae(Object(t)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(t,l))}))}return e}({compatType:r,compatValue:a,defTypes:e,isManual:n,layout:(0,m.Et)("layout","attributes")},l)},components:Ie({},Ce.name,Ce)}),ze={classes:{defaultValue:"jMICAHZCJ87pgWcwZ34J",compatType:"wlh7YR7IhZS7VbmDgZ1E",compatValue:"h1dfSYVBHeQw8m6LWLQU"}},qe=(0,w.Z)(Le,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-radio-button"),i=(0,r.up)("el-radio-group"),d=(0,r.up)("el-input"),s=(0,r.up)("el-button"),c=(0,r.up)("el-option"),f=(0,r.up)("el-select"),p=(0,r.up)("field-setting");return(0,r.wg)(),(0,r.j4)(p,{field:e.field,placeholder:!1},{default:(0,r.w5)((function(){return[(0,r._)("section",E,[O,(0,r.Wm)(i,{modelValue:e.layout,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.layout=l}),size:"small"},{default:(0,r.w5)((function(){return[(0,r.Wm)(o,{label:"inline"},{default:(0,r.w5)((function(){return[U]})),_:1}),(0,r.Wm)(o,{label:"block"},{default:(0,r.w5)((function(){return[j]})),_:1})]})),_:1},8,["modelValue"])]),(0,r._)("section",S,[T,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.options,(function(l,t){return(0,r.wg)(),(0,r.iD)("div",{key:t,class:"xform-el-setting-option"},[(0,r.Wm)(d,{modelValue:l.value,"onUpdate:modelValue":function(e){return l.value=e},size:"small",placeholder:"请输入选项内容"},null,8,["modelValue","onUpdate:modelValue"]),(0,r.Wm)(s,{type:"danger",size:"small",plain:"",onClick:function(t){return e.removeOption(l)},disabled:e.field.options.length<=1},{default:(0,r.w5)((function(){return[D]})),_:2},1032,["onClick","disabled"])])})),128)),(0,r.Wm)(s,{type:"primary",size:"small",onClick:e.addOption,plain:""},{default:(0,r.w5)((function(){return[C]})),_:1},8,["onClick"])]),(0,r._)("section",A,[I,(0,r._)("div",{class:(0,W.C_)(e.classes.defaultValue)},[(0,r.Wm)(f,{modelValue:e.compatType,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.compatType=l}),size:"small",class:(0,W.C_)(e.classes.compatType)},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.defTypes,(function(e,l){return(0,r.wg)(),(0,r.j4)(c,{key:l,value:e.value,label:e.label||e.value},null,8,["value","label"])})),128))]})),_:1},8,["modelValue","class"]),e.isManual?((0,r.wg)(),(0,r.j4)(f,{key:0,modelValue:e.compatValue,"onUpdate:modelValue":l[2]||(l[2]=function(l){return e.compatValue=l}),class:(0,W.C_)(e.classes.compatValue),size:"small",placeholder:"请选择",clearable:"",multiple:"","collapse-tags":""},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.options,(function(e,l){return(0,r.wg)(),(0,r.j4)(c,{key:l,value:e.value,label:e.label||e.value},null,8,["value","label"])})),128))]})),_:1},8,["modelValue","class"])):(0,r.kq)("",!0)],2)])]})),_:1},8,["field"])}],["__cssModules",ze]]);var Me=(0,n.hS)().BuiltInLogicOperator;const Fe=n.gN.create({icon:V.Z,type:"checkbox",title:"多选",setting:qe,build:P,validator:function(e,l){return e.required&&(0,n.xb)(l)?Promise.reject("必填"):Promise.resolve()},onCreate:function(e,l,t){var n=Array.isArray(l.options)?l.options:[];t&&(n.push({value:"选项1"}),e.attributes.layout="inline"),e.options=n},operators:[Me.EQ,Me.NE,Me.EMPTY,Me.CONTAINS]});t(2222),t(5827),t(7314);var He=t(9704),Ye=(0,r.Uk)("隐藏标题"),Be=(0,r.Uk)("顶部对齐"),Ke={class:"xform-el-field-setting-prop"},Ge=(0,r._)("header",null,"表单布局：",-1),Qe=(0,r.Uk)("窗口"),Xe=(0,r.Uk)("行内"),Je={class:"xform-el-field-setting-prop"},$e=(0,r._)("header",null,"列宽：",-1),el=["placeholder","value","onInput"],ll={key:0,class:"text-secondary"};t(4678);var tl=150,nl="xform-el-datatable-columns";var rl=(0,n.hS)(),al=rl.EVENTS,ul=rl.LabelPosition;const ol=(0,r.aZ)({name:"xform-el-datatable-setting",props:{field:{type:n.Wi,required:!0}},emits:[al.UPDATE_FIELD],setup:function(e,l){var t=l.emit;return{DEF_COLUMN_WIDTH:tl,updateColWidth:function(l,n){var r=l.target,a=parseFloat(r.value),u=e.field.attributes.colWidths;u[n]=isNaN(a)?null:a,t(al.UPDATE_FIELD,{prop:"colWidths",value:u,scope:"attributes"})},getColumnWidth:function(l){return e.field.attributes.colWidths[l]},layout:(0,m.Et)("layout","attributes"),hideTitle:(0,m.Et)("hideTitle","attributes"),labelPosition:(0,k.Fl)({get:function(){var l;return(null===(l=e.field.attributes)||void 0===l?void 0:l.labelPosition)==ul.TOP},set:function(e){var l=!0===e?ul.TOP:void 0;t(al.UPDATE_FIELD,{prop:"labelPosition",scope:"attributes",value:l})}})}},components:function(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}({},Ce.name,Ce)}),il=(0,w.Z)(ol,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-checkbox"),i=(0,r.up)("el-radio-button"),d=(0,r.up)("el-radio-group"),s=(0,r.up)("field-setting");return(0,r.wg)(),(0,r.j4)(s,{field:e.field,placeholder:!1},{title:(0,r.w5)((function(){return[(0,r.Wm)(o,{title:"勾选则不显示标题",modelValue:e.hideTitle,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.hideTitle=l})},{default:(0,r.w5)((function(){return[Ye]})),_:1},8,["modelValue"]),(0,r.Wm)(o,{title:"勾选则标题位于顶部",modelValue:e.labelPosition,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.labelPosition=l})},{default:(0,r.w5)((function(){return[Be]})),_:1},8,["modelValue"])]})),default:(0,r.w5)((function(){return[(0,r._)("section",Ke,[Ge,(0,r.Wm)(d,{modelValue:e.layout,"onUpdate:modelValue":l[2]||(l[2]=function(l){return e.layout=l}),size:"small"},{default:(0,r.w5)((function(){return[(0,r.Wm)(i,{label:"modal",title:"选中则表单在弹出模态框中编辑"},{default:(0,r.w5)((function(){return[Qe]})),_:1}),(0,r.Wm)(i,{label:"inline",title:"选中则表单在表格中直接编辑"},{default:(0,r.w5)((function(){return[Xe]})),_:1})]})),_:1},8,["modelValue"])]),(0,r._)("section",Je,[$e,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.field.fields,(function(l){var t;return(0,r.wg)(),(0,r.iD)("div",{class:"xform-el-datatable-column",key:l.uid},[(0,r._)("div",{class:"xform-el-datatable-column-width",style:(0,W.j5)({width:"".concat(null!==(t=e.getColumnWidth(l.name))&&void 0!==t?t:e.DEF_COLUMN_WIDTH,"px")})},null,4),(0,r._)("label",null,(0,W.zw)(l.title),1),(0,r._)("input",{type:"number",min:"0",placeholder:"默认宽度".concat(e.DEF_COLUMN_WIDTH),value:e.getColumnWidth(l.name),onInput:function(t){return e.updateColWidth(t,l.name)}},null,40,el)])})),128)),0==e.field.fields.length?((0,r.wg)(),(0,r.iD)("div",ll,"请至少放入一个字段")):(0,r.kq)("",!0)])]})),_:1},8,["field"])}]]);function dl(e){return function(e){if(Array.isArray(e))return sl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,l){if(!e)return;if("string"==typeof e)return sl(e,l);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sl(e,l)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sl(e,l){(null==l||l>e.length)&&(l=e.length);for(var t=0,n=new Array(l);t<l;t++)n[t]=e[t];return n}function cl(e){return function(e){if(Array.isArray(e))return fl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,l){if(!e)return;if("string"==typeof e)return fl(e,l);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fl(e,l)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fl(e,l){(null==l||l>e.length)&&(l=e.length);for(var t=0,n=new Array(l);t<l;t++)n[t]=e[t];return n}function pl(e,l){var t=(0,k.iH)(!1),a=(0,r.FN)(),u=(0,n.I_)(),o=(0,k.iH)(null),i=(0,n.j9)(),d=null;function s(l){d=l;var n=function(e,l){return null==l?{}:e.reduce((function(e,t){var n,r=l[t.name],a=null===(n=r.conf)||void 0===n?void 0:n.onValueSubmit;return e[t.name]="function"==typeof a?a(r):r.value,e}),{})}(e.field.fields,d),r=e.field.fields.map((function(e){return e.clone(!0)}));o.value=u.value.genSchema({fields:r},n),t.value=!0}function c(){t.value=!1}function f(){var t=a.refs.form;if(null==t)return c();t.validate().then((function(t){var n,r,a;t.valid&&(null==d?(n=t.model,r=e.field.fields.reduce((function(l,t){var r=t.clone(!0);return r.setValue(n[t.name]),r.setParent(e.field),l[t.name]=r,l}),{}),(a=l.value).push(r),l.value=a):function(l){e.field.fields.forEach((function(e){var t=e.name;d[t].value=l[t]})),d=null}(t.model),c())}))}function p(e){var t=l.value,n=t.indexOf(e);n>=0&&(t.splice(n,1),l.value=t)}return(0,r.Jd)((function(){o.value=null,d=null})),function(){var n,a=e.field.fields.filter((function(e){return!0!==e.hidden}));if(0==a.length)return(0,r.Wm)("div",{class:"xform-is-unknown"},[(0,r.Uk)("请放入至少一个字段")]);var m=e.disabled||e.field.disabled,v=null!==(n=e.field.attributes.colWidths)&&void 0!==n?n:{},b={default:function(){var e={header:function(){return m?"#":(0,r.Wm)((0,r.up)("el-button"),{onClick:s.bind(null,null),type:"text",size:"mini",class:"xform-el-datatable-add","auto-insert-space":!1},{default:function(){return[(0,r.Uk)("添加")]}})}},l={default:function(e){return[(0,r.Wm)((0,r.up)("el-button"),{onClick:s.bind(null,e.row),type:"text",size:"mini","auto-insert-space":!1,class:"xform-el-datatable-add"},{default:function(){return[(0,r.Uk)("编辑")]}}),(0,r.Wm)((0,r.up)("el-button"),{onClick:p.bind(null,e.row),type:"text",size:"mini","auto-insert-space":!1,class:"xform-el-datatable-remove"},{default:function(){return[(0,r.Uk)("删除")]}})]}},t=a.map((function(e){var l,t=null!==(l=v[e.name])&&void 0!==l?l:tl,n={default:function(l){var t=l.row[e.name];return i.renderField(t,{parentProps:{disabled:m},renderItem:function(e,l){return l.custom=!0,(0,r.h)(e,l,(function(){var e;return null!==(e=t.value)&&void 0!==e?e:u.value.viewerPlaceholder}))}})}};return(0,r.Wm)((0,r.up)("el-table-column"),{prop:e.name,label:e.title,"min-width":t,"label-class-name":e.required?"xform-is-required":null},n)}));return[(0,r.Wm)((0,r.up)("el-table-column"),{type:"index",fixed:"left",width:"60px"},e)].concat(cl(t),[m?null:(0,r.Wm)((0,r.up)("el-table-column"),{label:"操作",fixed:"right",width:"100px",aligh:"right"},l)])}},g={default:function(){return t.value?(0,r.Wm)((0,r.up)("xform-builder"),{schema:o.value,ref:"form",onSubmit:f},{default:function(){return[(0,r.Wm)("button",{class:"xform-is-hidden",type:"submit"},null)]}}):null},footer:function(){return(0,r.Wm)("div",null,[(0,r.Wm)((0,r.up)("el-button"),{onClick:c},{default:function(){return[(0,r.Uk)("取消")]}}),(0,r.Wm)((0,r.up)("el-button"),{type:"primary",onClick:f},{default:function(){return[(0,r.Uk)("确定")]}})])}},y={"xform-el-datatable":!0,"xform-el-datatable-is-empty":0==l.value.length},h="".concat(null==d?"添加":"编辑","数据");return(0,r.Wm)(r.HY,null,[(0,r.Wm)((0,r.up)("el-table"),{class:y,size:"mini","data-layout":"modal",data:l.value},b),(0,r.Wm)((0,r.up)("el-dialog"),{modelValue:t.value,"onUpdate:modelValue":function(e){return t.value=e},title:h,"custom-class":"xform-el-datatable-dialog","append-to-body":!0},g)])}}var ml=t(7736);function vl(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}var bl=(0,n.hS)(),gl=bl.CLASS,yl=bl.PROPS,hl=bl.EVENTS,wl=bl.EnumValidateMode,xl=(0,r.aZ)({name:"xform-el-datatable-preview",props:{field:{type:n.Wi,required:!0}},setup:function(e){var l=(0,n.j9)();return function(){var t,n,a=e.field,u=a.fields,o=null!==(t=a.attributes.colWidths)&&void 0!==t?t:{},i=0==u.length?(0,r.Wm)("p",{class:"".concat(gl.IS_EMPTY_TIP," xform-el-empty-tip")},[(0,r.Uk)("请将左侧控件拖动到此处")]):u.map((function(e){return l.renderField(e,{renderItem:function(){var l,t={"xform-el-datatable-cell":!0,"xform-is-required":e.required},n={width:"".concat(null!==(l=o[e.name])&&void 0!==l?l:tl,"px")};return(0,r.Wm)("div",{class:t,style:n},[(0,r.Wm)("span",null,[e.title])])}})})),d=(vl(n={class:"".concat(nl," ").concat(gl.DROPPABLE," ").concat(gl.SCOPE)},"."+yl.FIELD,e.field),vl(n,"."+yl.SCOPE,e.field),n);return(0,r.Wm)("div",{class:"xform-el-datatable ".concat(gl.IS_SCROLL," ").concat(gl.IS_HORIZONTAL_SCROLL)},[(0,r.Wm)("div",d,[i])])}}}),Vl=(0,r.aZ)({name:"xform-el-datatable",props:{field:{type:n.Wi,required:!0},disabled:{type:Boolean,default:!1}},emits:[hl.UPDATE_VALUE],setup:function(e){var l=(0,m.Hg)(),t=pl(e,l),a=function(e,l){var t=(0,n.j9)();function a(){var t=e.field.fields.reduce((function(l,t){var n=t.clone(!0);return n.setParent(e.field),l[t.name]=n,l}),{}),n=l.value;n.push(t),l.value=n}function u(e){var t=l.value,n=t.indexOf(e);n>=0&&(t.splice(n,1),l.value=t)}return function(){var n=e.field.fields.filter((function(e){return!0!==e.hidden}));if(0==n.length)return(0,r.Wm)("div",{class:"xform-is-unknown"},[(0,r.Uk)("请放入至少一个字段")]);var o=e.disabled||e.field.disabled,i={default:function(){var l,i={default:function(e){return[(0,r.Wm)("strong",{class:"xform-el-datatable-row-index"},[e.$index+1]),o?null:(0,r.Wm)((0,r.up)("el-button"),{onClick:u.bind(null,e.row),type:"text",size:"mini",class:"xform-el-datatable-remove","auto-insert-space":!1},{default:function(){return[(0,r.Uk)("删除")]}})]},header:function(){return o?"#":(0,r.Wm)((0,r.up)("el-button"),{onClick:a,type:"text",size:"mini",class:"xform-el-datatable-add","auto-insert-space":!1},{default:function(){return[(0,r.Uk)("添加")]}})}},d=null!==(l=e.field.attributes.colWidths)&&void 0!==l?l:{},s=n.map((function(e){var l,n=null!==(l=d[e.name])&&void 0!==l?l:tl,a={default:function(l){return t.renderField(l.row[e.name],{parentProps:{disabled:o},renderItem:function(e,l,t){return l.label=!1,(0,r.h)(e,l,t)}})}};return(0,r.Wm)((0,r.up)("el-table-column"),{prop:e.name,label:e.title,"min-width":n,"label-class-name":e.required?"xform-is-required":null},a)}));return[(0,r.Wm)((0,r.up)("el-table-column"),{type:"index",fixed:"left",width:"60px"},i)].concat(dl(s))}},d={"xform-el-datatable":!0,"xform-el-datatable-is-empty":0==l.value.length};return(0,r.Wm)((0,r.up)("el-table"),{data:l.value,size:"mini",class:d,"data-layout":"inline"},i)}}(e,l);return function(){return"inline"==e.field.attributes.layout?a():t()}}}),Wl=(0,r.aZ)({name:"xform-el-datatable-view",props:{field:{type:n.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){var l=(0,m.Hg)(),t=(0,n.j9)(),a=(0,n.I_)();return function(){var n,u=e.field.fields;if(!Array.isArray(l.value)||0==l.value.length||0==u.length)return(0,r.Wm)("span",{class:"xform-viewer-value"},[a.value.viewerPlaceholder]);var o=null!==(n=e.field.attributes.colWidths)&&void 0!==n?n:{},i=l.value,d=u.map((function(e){var l,n=null!==(l=o[e.name])&&void 0!==l?l:tl,a={default:function(l){return t.renderField(l.row[e.name],{renderItem:function(e,l,t){return t()}})}};return(0,r.Wm)((0,r.up)("el-table-column"),{prop:e.name,label:e.title,"min-width":n,"label-class-name":e.required?"xform-is-required":null},a)}));return(0,r.Wm)((0,r.up)("el-table"),{data:i,size:"mini",class:"xform-el-datatable"},{default:function(){return[(0,r.Wm)((0,r.up)("el-table-column"),{type:"index",width:60,fixed:"left"},null),d]}})}}});const kl=n.gN.create({type:"datatable",title:"数据表格",icon:He.Z,buttons:[ml.n,n.gN.BUTTON_COPY,n.gN.BUTTON_REMOVE],accept:["text","textarea","number","select","radio","checkbox","date"],setting:il,preview:xl,build:Vl,view:Wl,onDragOver:function(e){var l=e.currentTarget;if(l.matches("."+nl)){e.stopPropagation(),e.preventDefault();var t=e.context,n=t.directionX,r=t.moveMarkEl,a=t.getRootScopeEl,u=e.dragElement.contains(l);r(n,u?e.dragElement:e.target,u?a():l)}},onDrop:function(e){e.stopPropagation()},onCreate:function(e,l,t){t&&(e.attributes.colWidths={},e.attributes.layout="modal")},onSubmit:function(e){var l,t,n=null!==(l=null===(t=e.attributes)||void 0===t?void 0:t.colWidths)&&void 0!==l?l:{},r=e.fields.map((function(e){return e.name}));for(var a in n)r.indexOf(a)<0&&delete n[a];return e},onValueInit:function(e,l){if(!Array.isArray(l))return[];var t=e.fields;return l.map((function(l){return t.reduce((function(t,n){var r=n.clone(!0);return r.setValue(l[n.name]),r.setParent(e),t[n.name]=r,t}),{})}))},onValueSubmit:function(e){if(Array.isArray(e.value)){var l=e.fields;return e.value.map((function(e){return l.map((function(e){return e.name})).reduce((function(l,t){var n,r=e[t],a=null===(n=r.conf)||void 0===n?void 0:n.onValueSubmit;return l[r.name]="function"==typeof a?a(r):r.value,l}),{})}))}},validator:function(e,l,t){if(e.required&&(0,n.xb)(l))return Promise.reject("必填");var r=l.reduce((function(e,l){return e.concat(Object.values(l))}),[]).map((function(e){return t.mode==wl.RECURSIVE?e.validate({mode:wl.RECURSIVE}):e.invalid?Promise.reject():Promise.resolve()}));return Promise.allSettled(r).then((function(e){return e.some((function(e){return"rejected"===e.status}))?Promise.reject("请补全必填内容"):Promise.resolve()}))},onValidate:function(e){return(0,n.xb)(e.title)?Promise.reject("标题为空"):0==e.fields.length?Promise.reject("至少需要一个字段"):Promise.resolve()},operators:!1});var _l=t(6113);const Pl=(0,r.aZ)({name:"xform-el-date",props:{field:{type:n.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(){return{value:(0,m.Hg)(),popperOptions:{placement:"bottom-start"}}}}),El=(0,w.Z)(Pl,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-date-picker");return(0,r.wg)(),(0,r.j4)(o,{modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.value=l}),name:e.field.name,placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled,format:e.field.attributes.format,"value-format":e.field.attributes.valueFormat,editable:!1,"popper-options":e.popperOptions,class:"xform-el-date",size:"small"},null,8,["modelValue","name","placeholder","disabled","format","value-format","popper-options"])}]]);var Ol={class:"xform-el-field-setting-prop"},Ul=(0,r._)("header",null,"默认值：",-1);var jl=(0,n.hS)(),Sl=jl.BuiltInDefaultValueType,Tl=jl.EVENTS;const Dl=(0,r.aZ)({name:"xform-el-date-setting",props:{field:n.Wi},emits:[Tl.UPDATE_FIELD],setup:function(){var e=[{value:Sl.MANUAL,label:"手动指定"},{value:Sl.DATE_NOW,label:"当前时间"}],l=(0,m.Xu)(e);return{isManual:l.useIsManual(),compatType:l.useCompatType(),compatValue:l.useCompatValue(),defTypes:e,popperOptions:{placement:"bottom-end"}}},components:function(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}({},Ce.name,Ce)}),Cl={classes:{defaultValue:"rLolytKPeV2gxknHqTnI"}},Al=(0,w.Z)(Dl,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-option"),i=(0,r.up)("el-select"),d=(0,r.up)("el-date-picker"),s=(0,r.up)("field-setting");return(0,r.wg)(),(0,r.j4)(s,{field:e.field},{default:(0,r.w5)((function(){return[(0,r._)("section",Ol,[Ul,(0,r._)("div",{class:(0,W.C_)(e.classes.defaultValue)},[(0,r.Wm)(i,{modelValue:e.compatType,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.compatType=l}),size:"small"},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.defTypes,(function(e,l){return(0,r.wg)(),(0,r.j4)(o,{key:l,value:e.value,label:e.label||e.value},null,8,["value","label"])})),128))]})),_:1},8,["modelValue"]),e.isManual?((0,r.wg)(),(0,r.j4)(d,{key:0,modelValue:e.compatValue,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.compatValue=l}),placeholder:"请选择默认时间",size:"small",format:e.field.attributes.format,"value-format":e.field.attributes.valueFormat,editable:!1,"popper-options":e.popperOptions},null,8,["modelValue","format","value-format","popper-options"])):(0,r.kq)("",!0)],2)])]})),_:1},8,["field"])}],["__cssModules",Cl]]);var Il=(0,n.hS)().BuiltInLogicOperator;const Nl=n.gN.create({icon:_l.Z,type:"date",title:"日期",setting:Al,build:El,onCreate:function(e){var l,t;e.attributes.format=null!==(l=e.attributes.format)&&void 0!==l?l:"YYYY-MM-DD",e.attributes.valueFormat=null!==(t=e.attributes.format)&&void 0!==t?t:"YYYY-MM-DD"},validator:function(e,l){return e.required&&(0,n.xb)(l)?Promise.reject("必填"):Promise.resolve()},operators:[Il.LT,Il.LTE,Il.GT,Il.GTE,Il.EQ,Il.NE,Il.EMPTY]});var Rl=t(2209);var Zl=t(898);const Ll=(0,r.aZ)({name:"xform-el-divider",inheritAttrs:!1,props:{field:{type:n.Wi,required:!0}},components:function(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}({},Zl.Z.name,Zl.Z)}),zl=(0,w.Z)(Ll,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("xform-divider");return(0,r.wg)(),(0,r.j4)(o,{class:"xform-item xform-el-divider",title:e.field.title,layout:e.field.attributes.layout,type:e.field.attributes.type,top:e.field.attributes.top,bottom:e.field.attributes.bottom},null,8,["title","layout","type","top","bottom"])}]]);var ql,Ml={class:"xform-el-field-setting-prop xform-divider-types"},Fl=(0,r._)("header",null,"样式：",-1),Hl={class:"xform-el-field-setting-prop"},Yl=(0,r._)("header",null,"间距：",-1),Bl={class:"xform-el-divider-range"},Kl=(0,r._)("label",null,"上间距：",-1),Gl={class:"xform-el-divider-range"},Ql=(0,r._)("label",null,"下间距：",-1);function Xl(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}var Jl=(0,n.hS)().EVENTS;const $l=(0,r.aZ)({name:"xform-el-divider-setting",props:{field:n.Wi},emits:[Jl.UPDATE_FIELD],setup:function(){return{types:["solid","dashed","double","solid-dashed","dashed-solid"],compatType:(0,m.Et)("type","attributes"),compatTop:(0,m.Et)("top","attributes"),compatBottom:(0,m.Et)("bottom","attributes")}},components:(ql={},Xl(ql,Zl.Z.name,Zl.Z),Xl(ql,Ce.name,Ce),ql)}),et=(0,w.Z)($l,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("xform-divider"),i=(0,r.up)("el-radio"),d=(0,r.up)("el-slider"),s=(0,r.up)("field-setting");return(0,r.wg)(),(0,r.j4)(s,{field:e.field,placeholder:!1,attributes:!1},{default:(0,r.w5)((function(){return[(0,r._)("section",Ml,[Fl,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.types,(function(t){return(0,r.wg)(),(0,r.j4)(i,{key:t,modelValue:e.compatType,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.compatType=l}),name:"setting-divider-type",label:t},{default:(0,r.w5)((function(){return[(0,r.Wm)(o,{type:t},null,8,["type"])]})),_:2},1032,["modelValue","label"])})),128))]),(0,r._)("section",Hl,[Yl,(0,r._)("div",Bl,[Kl,(0,r.Wm)(d,{modelValue:e.compatTop,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.compatTop=l}),min:0,max:100,step:5,"show-stops":""},null,8,["modelValue"])]),(0,r._)("div",Gl,[Ql,(0,r.Wm)(d,{modelValue:e.compatBottom,"onUpdate:modelValue":l[2]||(l[2]=function(l){return e.compatBottom=l}),min:0,max:100,step:5,"show-stops":""},null,8,["modelValue"])])])]})),_:1},8,["field"])}]]),lt=n.gN.create({icon:Rl.Z,type:"divider",title:"分割线",custom:!0,setting:et,build:zl,view:zl,onCreate:function(e,l,t){t&&(e.attributes.type="solid",e.attributes.top=0,e.attributes.bottom=0)},operators:!1});t(4819),t(3593);var tt=t(1993),nt=(0,r.Uk)("允许收起");var rt=(0,n.hS)().EVENTS;const at=(0,r.aZ)({name:"xform-el-group-setting",props:{field:n.Wi},emits:[rt.UPDATE_FIELD],setup:function(){return{collapsable:(0,m.Et)("collapsable","attributes")}},components:function(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}({},Ce.name,Ce)}),ut=(0,w.Z)(at,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-checkbox"),i=(0,r.up)("field-setting");return(0,r.wg)(),(0,r.j4)(i,{field:e.field,placeholder:!1,required:!1},{attributes:(0,r.w5)((function(){return[(0,r.Wm)(o,{name:"".concat(e.field.name,"-collapsable"),modelValue:e.collapsable,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.collapsable=l}),title:"勾选则支持展开/收起分组"},{default:(0,r.w5)((function(){return[nt]})),_:1},8,["name","modelValue"])]})),_:1},8,["field"])}]]);function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function it(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}var dt=(0,n.hS)(),st=dt.SELECTOR,ct=dt.CLASS,ft=dt.EnumRenderType,pt=dt.PROPS,mt=dt.EnumValidateMode,vt=dt.EnumValidityState,bt="xform-el-group-list",gt=".".concat(bt);function yt(){var e=(0,k.iH)(!1);function l(){e.value=!e.value}return{collasped:e,renderHeader:function(t){if(null==t.title)return null;var n=!0===t.attributes.collapsable?(0,r.Wm)((0,r.up)("el-button"),{type:"text",title:e.value?"展开":"收起",onClick:l,size:"small","auto-insert-space":!1},{default:function(){return[e.value?"展开":"收起"]}}):null;return(0,r.Wm)("div",{class:"xform-el-card-header"},[(0,r.Wm)("h3",null,[t.title]),n])}}}var ht=(0,r.aZ)({name:"xform-el-group",props:{field:{type:n.Wi,required:!0},behavior:{type:String,default:null},disabled:{type:Boolean,default:!1}},setup:function(e){var l=yt(),t=l.collasped,a=l.renderHeader,u=(0,n.j9)();return function(){var l,n=e.field.value,o=e.field.fields,i=e.behavior==ft.DESIGNER||u.type==ft.DESIGNER,d=e.field.validation.message,s=e.disabled,c=it({"xform-item":!0,"xform-el-group":!0,"xform-is-collasped":t.value},ct.IS_ERROR,e.field.validation.valid==vt.ERROR),f=i&&0==o.length?(0,r.Wm)("p",{class:[ct.IS_EMPTY_TIP,"xform-el-empty-tip"]},[(0,r.Uk)("请将左侧控件拖动到此处")]):null,p=o.map((function(e){return u.renderField(i?e:n[e.name],{parentProps:{disabled:s}})})),m=it({class:(l={},it(l,bt,!0),it(l,ct.DROPPABLE,i),it(l,ct.SCOPE,i),l)},"."+pt.FIELD,i?e.field:void 0),v={header:function(){return a(e.field)},default:function(){return(0,r.Wm)("div",m,[f,p])}};return(0,r.Wm)("div",{class:c},[(0,r.Wm)((0,r.up)("el-card"),{shadow:i?"never":"hover"},v),d&&(0,r.Wm)("p",{class:"xform-item-message"},[d])])}}}),wt=(0,r.aZ)({name:"xform-el-group-view",props:{field:{type:n.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){var l=(0,n.j9)().renderField,t=yt(),a=t.collasped,u=t.renderHeader;return function(){var t=e.field.value,n=e.field.fields,o={"xform-item":!0,"xform-el-group":!0,"xform-is-collasped":a.value},i={header:function(){return u(e.field)},default:function(){return n.map((function(n){return l(t[n.name],{parentProps:{disabled:e.disabled}})}))}};return(0,r.Wm)("div",{class:o},[(0,r.Wm)((0,r.up)("el-card"),{shadow:"hover"},i)])}}});const xt=n.gN.create({icon:tt.Z,type:"group",title:"分组",custom:!0,buttons:[ml.n,n.gN.BUTTON_COPY,n.gN.BUTTON_REMOVE],preview:ht,setting:ut,build:ht,view:wt,onDragOver:function(e){var l=e.currentTarget;if(l.matches(gt)){e.stopPropagation(),e.preventDefault();var t=e.context,n=t.directionY,r=t.moveMarkEl,a=e.dragElement.contains(l);r(n,a?e.dragElement:e.target,a?e.dragElement.parentElement.closest(st.DROPPABLE):l)}},onDrop:function(e){e.currentTarget.matches(st.SCOPE)&&e.stopPropagation()},onValueInit:function(e,l){var t=null==l||"object"!=ot(l)?{}:l;return e.fields.reduce((function(l,n){var r=n.clone(!0);return r.setValue(t[n.name]),r.setParent(e),l[n.name]=r,l}),{})},onValueSubmit:function(e){var l=e.value;if(null!=l&&"object"==ot(l)&&0!=Object.keys(l).length)return e.fields.map((function(e){return e.name})).reduce((function(e,t){var n=Reflect.get(l,t,l);if(null!=n){var r=n.conf,a="function"==typeof(null==r?void 0:r.onValueSubmit)?r.onValueSubmit(n):n.value;Reflect.set(e,t,a,e)}return e}),{})},validator:function(e,l,t){var n=e.value,r=Object.keys(n).map((function(e){var l=n[e];return t.mode==mt.RECURSIVE?l.validate({mode:mt.RECURSIVE}):l.invalid?Promise.reject():Promise.resolve()}));return Promise.allSettled(r).then((function(e){return e.some((function(e){return"rejected"===e.status}))?Promise.reject("请补全必填内容"):Promise.resolve()}))},operators:!1});var Vt=t(4874),Wt=(0,r._)("span",null,"默认值：",-1),kt=(0,r.Uk)("清除"),_t=(0,r.Uk)("整数");t(9653);var Pt=(0,n.hS)().EVENTS;const Et=(0,r.aZ)({name:"xform-el-number-setting",props:{field:n.Wi},emits:[Pt.UPDATE_FIELD],setup:function(e){var l=(0,m.Xu)(),t=(0,k.iH)(1),a=(0,m.Et)("integer","attributes"),u=l.useCompatValue((function(e){var l=e.value;return"number"==typeof l?l:(0,n.xb)(l)?NaN:Number(l)}));return(0,r.YP)(a,(function(e){if(e){var l=u.value;isNaN(l)||(u.value=Math.round(l))}})),{integer:a,compatValue:u,version:t,updateValue:function(l){if(!(!0===e.field.attributes.integer))return u.value=l;u.value=Math.round(l),t.value++},clearDefaultValue:function(){u.value=null,t.value++}}},components:function(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}({},Ce.name,Ce)}),Ot={classes:{propDefaultValue:"v1BlFbPnjyDymRpFgPUx"}},Ut=(0,w.Z)(Et,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-button"),i=(0,r.up)("el-input-number"),d=(0,r.up)("el-checkbox"),s=(0,r.up)("field-setting");return(0,r.wg)(),(0,r.j4)(s,{field:e.field},{attributes:(0,r.w5)((function(){return[(0,r.Wm)(d,{title:"勾选则只允许输入整数",modelValue:e.integer,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.integer=l})},{default:(0,r.w5)((function(){return[_t]})),_:1},8,["modelValue"])]})),default:(0,r.w5)((function(){return[(0,r._)("section",{class:(0,W.C_)(["xform-el-field-setting-prop",e.classes.propDefaultValue])},[(0,r._)("header",null,[Wt,(0,r.Wm)(o,{onClick:e.clearDefaultValue,size:"small",type:"text","auto-insert-space":!1},{default:(0,r.w5)((function(){return[kt]})),_:1},8,["onClick"])]),(0,r.Wm)(i,{"model-value":e.compatValue,key:e.version,size:"small",placeholder:"[可选] 如果字段没有填写，默认为设定的值","controls-position":"right","onUpdate:modelValue":e.updateValue},null,8,["model-value","onUpdate:modelValue"])],2)]})),_:1},8,["field"])}],["__cssModules",Ot]]);const jt=(0,r.aZ)({name:"xform-el-number",props:{field:{type:n.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){var l=(0,k.iH)(1),t=(0,m.Hg)(NaN);return{value:t,version:l,updateValue:function(n){if(!(!0===e.field.attributes.integer))return t.value=n;t.value=Math.round(n),l.value++}}}}),St=(0,w.Z)(jt,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-input-number");return(0,r.wg)(),(0,r.j4)(o,{key:e.version,id:e.field.uid,name:e.field.name,"model-value":e.value,placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled,"controls-position":"right",class:"xform-el-number",size:"small","onUpdate:modelValue":e.updateValue},null,8,["id","name","model-value","placeholder","disabled","onUpdate:modelValue"])}]]);var Tt=(0,n.hS)().BuiltInLogicOperator;const Dt=n.gN.create({icon:Vt.Z,type:"number",title:"数字",setting:Ut,build:St,validator:function(e,l){return e.required&&(0,n.xb)(l)?Promise.reject("必填"):e.attributes.integer&&!/^[-+]?[1-9]?\d+$/.test(l+"")?Promise.reject("请输入整数"):Promise.resolve()},operators:[Tt.LT,Tt.LTE,Tt.GT,Tt.GTE,Tt.EQ,Tt.NE,Tt.EMPTY]});var Ct=t(3684);const At=(0,r.aZ)({name:"xform-el-radio",props:{field:{type:n.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){return{value:(0,m.Hg)(),className:(0,k.Fl)((function(){var l=["xform-el-radio"];return"block"==e.field.attributes.layout&&l.push("xform-el-radio-block"),l}))}}}),It=(0,w.Z)(At,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-radio"),i=(0,r.up)("el-radio-group");return(0,r.wg)(),(0,r.j4)(i,{modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.value=l}),size:"small",disabled:e.disabled||e.field.disabled,class:(0,W.C_)(e.className)},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.field.options,(function(l,t){return(0,r.wg)(),(0,r.j4)(o,{key:t,label:l.value,name:e.field.name},null,8,["label","name"])})),128))]})),_:1},8,["modelValue","disabled","class"])}]]);var Nt={class:"xform-el-field-setting-prop"},Rt=(0,r._)("header",null,"布局：",-1),Zt=(0,r.Uk)("行内"),Lt=(0,r.Uk)("换行"),zt={class:"xform-el-field-setting-prop"},qt=(0,r._)("header",null,"选项：",-1),Mt=(0,r.Uk)("删除"),Ft=(0,r.Uk)("添加选项"),Ht={class:"xform-el-field-setting-prop"},Yt=(0,r._)("header",null,"默认值：",-1);function Bt(e,l){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);l&&(n=n.filter((function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),t.push.apply(t,n)}return t}function Kt(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}var Gt=(0,n.hS)(),Qt=Gt.BuiltInDefaultValueType,Xt=Gt.EVENTS;const Jt=(0,r.aZ)({name:"xform-el-radio-setting",props:{field:n.Wi},emits:[Xt.UPDATE_FIELD],setup:function(){var e=[{value:Qt.MANUAL,label:"手动指定"},{value:Qt.OPTION_FIRST,label:"首选项"}],l=(0,m.D2)((function(){if(!n.value)return;var e=l.options.value,t=a.value;a.value=e.some((function(e){return e.value==t}))?t:void 0})),t=(0,m.Xu)(e),n=t.useIsManual(),r=t.useCompatType(),a=t.useCompatValue((function(e){return e.value||""}));return function(e){for(var l=1;l<arguments.length;l++){var t=null!=arguments[l]?arguments[l]:{};l%2?Bt(Object(t),!0).forEach((function(l){Kt(e,l,t[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Bt(Object(t)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(t,l))}))}return e}({compatType:r,compatValue:a,defTypes:e,isManual:n,layout:(0,m.Et)("layout","attributes")},l)},components:Kt({},Ce.name,Ce)}),$t={classes:{defaultValue:"X6wdNocBaY31i2woKQGN",compatType:"ETLAPFW362LkeHbxsKdL",compatValue:"Yc5l7ja6KgCwqlu7wx6U"}},en=(0,w.Z)(Jt,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-radio-button"),i=(0,r.up)("el-radio-group"),d=(0,r.up)("el-input"),s=(0,r.up)("el-button"),c=(0,r.up)("el-option"),f=(0,r.up)("el-select"),p=(0,r.up)("field-setting");return(0,r.wg)(),(0,r.j4)(p,{field:e.field,placeholder:!1},{default:(0,r.w5)((function(){return[(0,r._)("section",Nt,[Rt,(0,r.Wm)(i,{modelValue:e.layout,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.layout=l}),size:"small"},{default:(0,r.w5)((function(){return[(0,r.Wm)(o,{label:"inline"},{default:(0,r.w5)((function(){return[Zt]})),_:1}),(0,r.Wm)(o,{label:"block"},{default:(0,r.w5)((function(){return[Lt]})),_:1})]})),_:1},8,["modelValue"])]),(0,r._)("section",zt,[qt,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.options,(function(l,t){return(0,r.wg)(),(0,r.iD)("div",{key:t,class:"xform-el-setting-option"},[(0,r.Wm)(d,{modelValue:l.value,"onUpdate:modelValue":function(e){return l.value=e},size:"small",placeholder:"请输入选项内容"},null,8,["modelValue","onUpdate:modelValue"]),(0,r.Wm)(s,{type:"danger",size:"small",plain:"",onClick:function(t){return e.removeOption(l)},disabled:e.field.options.length<=1},{default:(0,r.w5)((function(){return[Mt]})),_:2},1032,["onClick","disabled"])])})),128)),(0,r.Wm)(s,{type:"primary",size:"small",onClick:e.addOption,plain:""},{default:(0,r.w5)((function(){return[Ft]})),_:1},8,["onClick"])]),(0,r._)("section",Ht,[Yt,(0,r._)("div",{class:(0,W.C_)(e.classes.defaultValue)},[(0,r.Wm)(f,{modelValue:e.compatType,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.compatType=l}),size:"small",class:(0,W.C_)(e.classes.compatType)},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.defTypes,(function(e,l){return(0,r.wg)(),(0,r.j4)(c,{key:l,value:e.value,label:e.label||e.value},null,8,["value","label"])})),128))]})),_:1},8,["modelValue","class"]),e.isManual?((0,r.wg)(),(0,r.j4)(f,{key:0,modelValue:e.compatValue,"onUpdate:modelValue":l[2]||(l[2]=function(l){return e.compatValue=l}),class:(0,W.C_)(e.classes.compatValue),size:"small",placeholder:"请选择",clearable:""},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.options,(function(e,l){return(0,r.wg)(),(0,r.j4)(c,{key:l,value:e.value,label:e.label||e.value},null,8,["value","label"])})),128))]})),_:1},8,["modelValue","class"])):(0,r.kq)("",!0)],2)])]})),_:1},8,["field"])}],["__cssModules",$t]]);var ln=(0,n.hS)().BuiltInLogicOperator;const tn=n.gN.create({icon:Ct.Z,type:"radio",title:"单选",setting:en,build:It,validator:function(e,l){return e.required&&(0,n.xb)(l)?Promise.reject("必填"):Promise.resolve()},onCreate:function(e,l,t){var n=Array.isArray(l.options)?l.options:[];t&&(n.push({value:"选项1"}),e.attributes.layout="inline"),e.options=n},operators:[ln.EQ,ln.NE,ln.EMPTY,ln.CONTAINS]});var nn=t(1871);const rn=(0,r.aZ)({name:"xform-el-select",props:{field:{type:n.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(){return{value:(0,m.Hg)()}}}),an=(0,w.Z)(rn,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-option"),i=(0,r.up)("el-select");return(0,r.wg)(),(0,r.j4)(i,{name:e.field.name,disabled:e.disabled||e.field.disabled,placeholder:e.field.placeholder,modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.value=l}),class:"xform-el-select",size:"small",clearable:""},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.field.options,(function(e,l){return(0,r.wg)(),(0,r.j4)(o,{key:l,value:e.value,label:e.value},null,8,["value","label"])})),128))]})),_:1},8,["name","disabled","placeholder","modelValue"])}]]);var un={class:"xform-el-field-setting-prop"},on=(0,r._)("header",null,"选项：",-1),dn=(0,r.Uk)("删除"),sn=(0,r.Uk)("添加选项"),cn={class:"xform-el-field-setting-prop"},fn=(0,r._)("header",null,"默认值：",-1);function pn(e,l){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);l&&(n=n.filter((function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),t.push.apply(t,n)}return t}function mn(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}var vn=(0,n.hS)(),bn=vn.BuiltInDefaultValueType,gn=vn.EVENTS;const yn=(0,r.aZ)({name:"xform-el-select-setting",props:{field:n.Wi},emits:[gn.UPDATE_FIELD],setup:function(){var e=[{value:bn.MANUAL,label:"手动指定"},{value:bn.OPTION_FIRST,label:"首选项"}],l=(0,m.D2)((function(){if(!n.value)return;var e=l.options.value,t=a.value;a.value=e.some((function(e){return e.value==t}))?t:void 0})),t=(0,m.Xu)(e),n=t.useIsManual(),r=t.useCompatType(),a=t.useCompatValue((function(e){return e.value||""}));return function(e){for(var l=1;l<arguments.length;l++){var t=null!=arguments[l]?arguments[l]:{};l%2?pn(Object(t),!0).forEach((function(l){mn(e,l,t[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pn(Object(t)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(t,l))}))}return e}({compatType:r,compatValue:a,defTypes:e,isManual:n},l)},components:mn({},Ce.name,Ce)}),hn={classes:{defaultValue:"wYJcBJE8kDsHvWtpJad8",compatType:"ESojE_ztyYX9HmODMH_W",compatValue:"RubtsX4YmnD76ynnU0pS"}},wn=(0,w.Z)(yn,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-input"),i=(0,r.up)("el-button"),d=(0,r.up)("el-option"),s=(0,r.up)("el-select"),c=(0,r.up)("field-setting");return(0,r.wg)(),(0,r.j4)(c,{field:e.field},{default:(0,r.w5)((function(){return[(0,r._)("section",un,[on,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.options,(function(l,t){return(0,r.wg)(),(0,r.iD)("div",{key:t,class:"xform-el-setting-option"},[(0,r.Wm)(o,{modelValue:l.value,"onUpdate:modelValue":function(e){return l.value=e},size:"small",placeholder:"请输入选项内容"},null,8,["modelValue","onUpdate:modelValue"]),(0,r.Wm)(i,{type:"danger",size:"small",plain:"",onClick:function(t){return e.removeOption(l)},disabled:e.field.options.length<=1},{default:(0,r.w5)((function(){return[dn]})),_:2},1032,["onClick","disabled"])])})),128)),(0,r.Wm)(i,{type:"primary",size:"small",onClick:e.addOption,plain:""},{default:(0,r.w5)((function(){return[sn]})),_:1},8,["onClick"])]),(0,r._)("section",cn,[fn,(0,r._)("div",{class:(0,W.C_)(e.classes.defaultValue)},[(0,r.Wm)(s,{modelValue:e.compatType,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.compatType=l}),size:"small",class:(0,W.C_)(e.classes.compatType)},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.defTypes,(function(e,l){return(0,r.wg)(),(0,r.j4)(d,{key:l,value:e.value,label:e.label||e.value},null,8,["value","label"])})),128))]})),_:1},8,["modelValue","class"]),e.isManual?((0,r.wg)(),(0,r.j4)(s,{key:0,modelValue:e.compatValue,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.compatValue=l}),class:(0,W.C_)(e.classes.compatValue),size:"small",placeholder:"请选择",clearable:""},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.options,(function(e,l){return(0,r.wg)(),(0,r.j4)(d,{key:l,value:e.value,label:e.label||e.value},null,8,["value","label"])})),128))]})),_:1},8,["modelValue","class"])):(0,r.kq)("",!0)],2)])]})),_:1},8,["field"])}],["__cssModules",hn]]);var xn=(0,n.hS)().BuiltInLogicOperator;const Vn=n.gN.create({icon:nn.Z,type:"select",title:"下拉选择",setting:wn,build:an,validator:function(e,l){return e.required&&(0,n.xb)(l)?Promise.reject("必填"):Promise.resolve()},onCreate:function(e,l,t){var n=Array.isArray(l.options)?l.options:[];t&&n.push({value:"选项1"}),e.options=n},operators:[xn.EQ,xn.NE,xn.EMPTY,xn.CONTAINS]});t(6541),t(9600);var Wn=t(3720);function kn(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}var _n=(0,n.hS)(),Pn=_n.SELECTOR,En=_n.CLASS,On=_n.PROPS,Un=_n.EnumValidateMode,jn=_n.EnumRenderType;const Sn=n.gN.create({type:"tabs.pane",title:"标签面板",custom:!0,build:(0,r.aZ)({name:"xform-el-tabs-pane",props:{field:{type:n.Wi,required:!0},behavior:{type:String,default:null},disabled:{type:Boolean,default:!1}},setup:function(e){return function(){var l,t,a=(0,n.j9)(),u=e.field.fields,o=null!==(l=e.field.value)&&void 0!==l?l:{},i=e.behavior==jn.DESIGNER||a.type==jn.DESIGNER,d=i&&0==u.length?(0,r.Wm)("p",{class:[En.IS_EMPTY_TIP,"xform-el-empty-tip"]},[(0,r.Uk)("请将左侧控件拖动到此处")]):u.map((function(l){return a.renderField(i?l:o[l.name],{parentProps:{disabled:e.disabled}})})),s=kn({class:(t={"xform-el-tab-pane":!0},kn(t,En.DROPPABLE,i),kn(t,En.SCOPE,i),t)},"."+On.FIELD,i?e.field:void 0);return(0,r.Wm)("div",s,[d])}}}),view:(0,r.aZ)({name:"xform-el-tabs-pane-view",props:{field:{type:n.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){var l,t=(0,n.j9)(),a=null!==(l=e.field.value)&&void 0!==l?l:{};return function(){var l=e.field.fields;return(0,r.Wm)("div",{class:"xform-el-tab-pane"},[l.map((function(l){return t.renderField(a[l.name],{parentProps:{disabled:e.disabled}})}))])}}}),onDragOver:function(e){var l=e.currentTarget;e.stopPropagation(),e.preventDefault();var t=e.context,n=t.directionY,r=t.moveMarkEl,a=e.dragElement.contains(l);r(n,a?e.dragElement:e.target,a?e.dragElement.parentElement.closest(Pn.DROPPABLE):l)},onDrop:function(e){e.stopPropagation()},onValueInit:function(e,l){var t=null!=l?l:{};return e.fields.reduce((function(l,n){var r=n.name,a=n.clone(!0);return a.setValue(t[r]),a.setParent(e),l[r]=a,l}),{})},onValueSubmit:function(e){var l,t=null!==(l=e.value)&&void 0!==l?l:{};return e.fields.map((function(e){return e.name})).reduce((function(e,l){var n,r=t[l],a=null===(n=r.conf)||void 0===n?void 0:n.onValueSubmit;return e[l]="function"==typeof a?a(r):r.value,e}),{})},validator:function(e,l,t){var n=Object.values(null!=l?l:{}).map((function(e){return t.mode==Un.RECURSIVE?e.validate({mode:Un.RECURSIVE}):e.invalid?Promise.reject():Promise.resolve()}));return Promise.allSettled(n).then((function(l){return l.some((function(e){return"rejected"===e.status}))?Promise.reject("请补全标签页[".concat(e.title,"]必填内容")):Promise.resolve()}))}});function Tn(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}function Dn(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,r.lA)(e)}var Cn=(0,n.hS)(),An=Cn.CLASS,In=Cn.EnumValidityState,Nn=Cn.EVENTS,Rn=Cn.EnumRenderType,Zn=(0,r.aZ)({name:"xform-el-tabs-setting",props:{field:{type:n.Wi,required:!0}},emits:[Nn.UPDATE_FIELD],setup:function(e){var l=(0,m.Et)("hideTitle","attributes");function t(){var l=e.field,t=new n.Wi(Sn);t.title="标签".concat(e.field.fields.length+1),l.fields.push(t)}function a(l){var t=e.field.fields;if(!(t.length<=1)){var n=t.indexOf(l);n>=0&&t.splice(n,1)}}function u(l){var t=e.field.fields,n=t.splice(l,1)[0];t.splice(l-1,0,n)}function o(l){var t=e.field.fields,n=t.splice(l+1,1)[0];t.splice(l,0,n)}return function(){var n=e.field,i=n.fields.map((function(e,l){var t=n.fields.length;return(0,r.Wm)("div",{class:"xform-el-setting-option xform-el-tabs-option"},[(0,r.Wm)((0,r.up)("el-input"),{placeholder:"请输入标签名称",size:"small",modelValue:e.title,"onUpdate:modelValue":function(l){return e.title=l}},null),(0,r.Wm)((0,r.up)("el-button"),{type:"primary",size:"small",plain:!0,onClick:u.bind(null,l),disabled:0==l},{default:function(){return[(0,r.Uk)("上移")]}}),(0,r.Wm)((0,r.up)("el-button"),{type:"primary",size:"small",plain:!0,onClick:o.bind(null,l),disabled:l==t-1},{default:function(){return[(0,r.Uk)("下移")]}}),(0,r.Wm)((0,r.up)("el-button"),{type:"danger",size:"small",plain:!0,onClick:a.bind(null,e),disabled:t<=1},{default:function(){return[(0,r.Uk)("删除")]}})])})),d={default:function(){return(0,r.Wm)("div",{class:"xform-el-field-setting-prop"},[(0,r.Wm)("header",null,[(0,r.Uk)("标签：")]),i,(0,r.Wm)((0,r.up)("el-button"),{type:"primary",size:"small",onClick:t,plain:!0},{default:function(){return[(0,r.Uk)("添加标签")]}})])},attributes:function(){return(0,r.Wm)((0,r.up)("el-checkbox"),{name:"".concat(n.name,"-hide-title"),modelValue:l.value,"onUpdate:modelValue":function(e){return l.value=e},title:"勾选则不显示标题"},{default:function(){return[(0,r.Uk)("隐藏标题")]}})}};return(0,r.Wm)((0,r.up)("field-setting"),{field:n,placeholder:!1,required:!1},d)}},components:Tn({},Ce.name,Ce)});function Ln(e){return e.validation.valid!==In.ERROR?null:(0,r.Wm)("p",{class:"xform-item-message"},[e.validation.message])}var zn=(0,r.aZ)({name:"xform-el-tabs",props:{field:{type:n.Wi,required:!0},behavior:{type:String,default:null},disabled:{type:Boolean,default:!1}},setup:function(e){var l=(0,k.iH)(e.field.fields[0].name),t=(0,n.j9)();return(0,r.Jd)((0,r.YP)(e.field.fields,(function(e){e.every((function(e){return e.name!=l.value}))&&(l.value=e[e.length-1].name)}))),function(){var n,a=e.field,u=null!==(n=a.value)&&void 0!==n?n:{},o=e.disabled,i=!0!==a.attributes.hideTitle,d=e.behavior==Rn.DESIGNER||t.type==Rn.DESIGNER,s=a.fields.map((function(e){var l;return(0,r.Wm)((0,r.up)("el-tab-pane"),{label:e.title,name:e.name,lazy:!0},Dn(l=t.renderField(d?e:u[e.name],{parentProps:{disabled:o},renderPreivew:function(e,l,t,n){return n()}}))?l:{default:function(){return[l]}})})),c={class:Tn({"xform-item":!0,"xform-el-tabs":!0,"xform-is-with-title":i},An.IS_ERROR,a.invalid),style:i?{"--xform-el-tabs-field-title":'"'.concat(a.title,'"')}:null};return(0,r.Wm)("div",c,[(0,r.Wm)((0,r.up)("el-tabs"),{modelValue:l.value,"onUpdate:modelValue":function(e){return l.value=e},type:"border-card"},Dn(s)?s:{default:function(){return[s]}}),Ln(a)])}}});const qn=n.gN.create({type:"tabs",title:"标签页",icon:Wn.Z,custom:!0,setting:Zn,build:zn,view:zn,dependencies:[Sn],onCreate:function(e,l,t){if(t){var r=new n.Wi(Sn);r.title="标签".concat(e.fields.length+1),e.push(r)}},onValueInit:function(e,l){var t=null!=l?l:{};return e.fields.reduce((function(l,n){var r=n.name,a=n.clone(!0);return a.setValue(t[r]),a.setParent(e),l[r]=a,l}),{})},onValueSubmit:function(e){var l,t=null!==(l=e.value)&&void 0!==l?l:{};return e.fields.map((function(e){return e.name})).reduce((function(e,l){var n,r=t[l],a=null===(n=r.conf)||void 0===n?void 0:n.onValueSubmit;return e[l]="function"==typeof a?a(r):r.value,e}),{})},validator:function(e,l,t){var n=Object.values(null!=l?l:{}).map((function(e){return e.validate({mode:t.mode})}));return Promise.allSettled(n).then((function(e){var l=e.map((function(e){return"rejected"==e.status?e.reason:null})).filter((function(e){return e}));return l.length>0?Promise.reject(l.join("\n")):Promise.resolve()}))},operators:!1});var Mn=t(3161);const Fn=(0,r.aZ)({name:"xform-el-text",props:{field:{type:n.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(){return{value:(0,m.Hg)()}}}),Hn=(0,w.Z)(Fn,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-input");return(0,r.wg)(),(0,r.j4)(o,{modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.value=l}),id:e.field.uid,name:e.field.name,placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled,class:"xform-el-text",size:"small"},null,8,["modelValue","id","name","placeholder","disabled"])}]]);var Yn={class:"xform-el-field-setting-prop"},Bn=(0,r._)("header",null,"默认值：",-1);var Kn=(0,n.hS)().EVENTS;const Gn=(0,r.aZ)({name:"xform-el-text-setting",props:{field:n.Wi},emits:[Kn.UPDATE_FIELD],setup:function(){return{compatValue:(0,m.Xu)([]).useCompatValue()}},components:function(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}({},Ce.name,Ce)}),Qn=(0,w.Z)(Gn,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-input"),i=(0,r.up)("field-setting");return(0,r.wg)(),(0,r.j4)(i,{field:e.field},{default:(0,r.w5)((function(){return[(0,r._)("section",Yn,[Bn,(0,r.Wm)(o,{size:"small",modelValue:e.compatValue,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.compatValue=l}),placeholder:"[可选] 如果字段没有填写，默认为设定的值"},null,8,["modelValue"])])]})),_:1},8,["field"])}]]);var Xn=(0,n.hS)().BuiltInLogicOperator;const Jn=n.gN.create({icon:Mn.Z,type:"text",title:"单行文本",setting:Qn,build:Hn,validator:function(e,l){return e.required&&(0,n.xb)(l)?Promise.reject("必填"):Promise.resolve()},operators:[Xn.EQ,Xn.NE,Xn.EMPTY,Xn.CONTAINS]});var $n=t(3923);const er=(0,r.aZ)({name:"xform-el-textarea",props:{field:{type:n.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(){return{value:(0,m.Hg)()}}}),lr=(0,w.Z)(er,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-input");return(0,r.wg)(),(0,r.j4)(o,{type:"textarea",modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.value=l}),id:e.field.uid,name:e.field.name,rows:3,placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled,class:"xform-el-textarea"},null,8,["modelValue","id","name","placeholder","disabled"])}]]);var tr={class:"xform-el-field-setting-prop"},nr=(0,r._)("header",null,"默认值：",-1);var rr=(0,n.hS)().EVENTS;const ar=(0,r.aZ)({name:"xform-el-textarea-setting",props:{field:n.Wi},emits:[rr.UPDATE_FIELD],setup:function(){return{compatValue:(0,m.Xu)([]).useCompatValue()}},components:function(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}({},Ce.name,Ce)}),ur=(0,w.Z)(ar,[["render",function(e,l,t,n,a,u){var o=(0,r.up)("el-input"),i=(0,r.up)("field-setting");return(0,r.wg)(),(0,r.j4)(i,{field:e.field},{default:(0,r.w5)((function(){return[(0,r._)("section",tr,[nr,(0,r.Wm)(o,{size:"small",modelValue:e.compatValue,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.compatValue=l}),placeholder:"[可选] 如果字段没有填写，默认为设定的值"},null,8,["modelValue"])])]})),_:1},8,["field"])}]]);var or=(0,n.hS)().BuiltInLogicOperator;const ir=n.gN.create({icon:$n.Z,type:"textarea",title:"多行文本",setting:ur,build:lr,validator:function(e,l){return e.required&&(0,n.xb)(l)?Promise.reject("必填"):Promise.resolve()},operators:[or.EQ,or.NE,or.EMPTY,or.CONTAINS]});const dr={name:"element-plus",version:"0.7.0",install:function(){var e=(0,n.h_)(),l=[Fe,kl,Nl,lt,xt,Dt,tn,Vn,qn,Jn,ir];return e.registerSlot("setting_form",x),e.registerField(l),function(){e.removeSlot("setting_form"),l.forEach(e.removeField)}}}}}]);