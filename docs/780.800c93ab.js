(self.webpackChunkxform=self.webpackChunkxform||[]).push([[780],{3147:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ul});var r=n(4979),o=n(6252),l=n(9963);n(1249),n(4916);const i={logicForm:"AXFb4Oig8ZeDiFbhXuYz",logicOperator:"iWE_4uCf4uyQn_tLfdFy",multipleSelect:"sB3AFYNaFORDlWcGrxlt",isOpen:"OtHZDvPvfQXl3I11LAgt",multipleSelectPanel:"KWHt_ndQ5GEsVJUtXQYh",multipleSelectInput:"h1PUhksP8HK12SoDIGes",multipleSelectContent:"WmRtyHt8kqMQHupjVvLp",multipleSelectTags:"xePwQttuwHZK5vdsCR3C",multipleSelectTag:"DVFkYWXKXx2rZjsQFmu4",isSingle:"WNtQTCU1_0FMcrKNFNtQ",multipleSelectCount:"N3qbgu_2jrraEnSTvr4v",isBottom:"eB5UIkUUUezJM4OFekON",isTop:"j7WxDYcNwNmrUp0hYKDC",multipleSelectOptions:"cfOFhC3FekAfcitjEycp",multipleSelectOption:"mwsDV3WFwJJI70BjHpCL",isSelected:"MEYf6umeDEjDlX5WICTO",multipleSelectPlaceholder:"vzAYAKVuocClV63pX2iZ",warnFieldTitle:"cAYZ4kU7Yau6BiGPdWNa"};var a=n(8018),u=(n(9826),n(1539),(0,r.hS)().CLASS);function c(e,t){var n=t.parent.find(e.field);if(null==n)return(0,o.Wm)("div",{class:u.IS_WARNING},[(0,o.Uk)("当前逻辑失效，目标字段被删除或位置发生变化")]);var r=(0,o.Wm)("strong",{class:i.warnFieldTitle},[n.title]);return(0,o.Wm)("div",{class:u.IS_WARNING},[(0,o.Uk)("当前逻辑失效，目标字段"),r,(0,o.Uk)("的位置发生变化")])}var s=r.gN.createFieldLogic({type:"string_value_compare",title:"值",render:function(e,t){var n=t.previousField(e.field);if(null==n)return c(e,t);var r=[a.d.OPERATOR_EQ,a.d.OPERATOR_NE,a.d.OPERATOR_CONTAINS,a.d.OPERATOR_EMPTY].map((function(e){return(0,o.Wm)("option",{value:e.type},[e.title])})),u=(0,o.wy)((0,o.Wm)("select",{class:"form-control form-control-sm ".concat(i.logicOperator),"onUpdate:modelValue":function(t){return e.operator=t}},[r]),[[l.bM,e.operator]]),s=e.operator===a.d.OPERATOR_EMPTY.type?null:(0,o.wy)((0,o.Wm)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":function(t){return e.value=t},placeholder:"目标值"},null),[[l.nr,e.value]]);return(0,o.Wm)("div",{class:i.logicForm},[(0,o.Wm)("span",null,[(0,o.Uk)("如果")]),(0,o.Wm)("strong",null,[n?n.title:"N/A"]),(0,o.Wm)("span",null,[(0,o.Uk)("的值")]),u,s])},test:function(e,t){var n=a.d.get(e.operator);if(null==n)return!0;var r=t.previousField(e.field);return null==r||n.test(r.value,e.value)},validator:function(e){return e.operator==a.d.OPERATOR_EMPTY.type||(!(0,r.xb)(e.value)||"请补全目标值")},onCreated:function(e){null==e.operator&&(e.operator=a.d.OPERATOR_EQ.type)}}),f=r.gN.createFieldLogic({type:"string_length_compare",title:"长度",render:function(e,t){var n=t.previousField(e.field);if(null==n)return c(e,t);var r=[a.d.OPERATOR_EQ,a.d.OPERATOR_NE,a.d.OPERATOR_LT,a.d.OPERATOR_LTE,a.d.OPERATOR_GT,a.d.OPERATOR_GTE].map((function(e){return(0,o.Wm)("option",{value:e.type},[e.title])})),u=(0,o.wy)((0,o.Wm)("select",{class:"form-control form-control-sm ".concat(i.logicOperator),"onUpdate:modelValue":function(t){return e.operator=t}},[r]),[[l.bM,e.operator]]),s=e.operator===a.d.OPERATOR_EMPTY.type?null:(0,o.wy)((0,o.Wm)("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":function(t){return e.value=t},placeholder:"目标值"},null),[[l.nr,e.value]]);return(0,o.Wm)("div",{class:i.logicForm},[(0,o.Wm)("span",null,[(0,o.Uk)("如果")]),(0,o.Wm)("strong",null,[n?n.title:"N/A"]),(0,o.Wm)("span",null,[(0,o.Uk)("的长度")]),u,s])},test:function(e,t){var n=a.d.get(e.operator);if(null==n)return!0;var r=t.previousField(e.field);if(null==r)return!0;var o=r.value;return"string"==typeof o&&n.test(o.length,e.value)},validator:function(e){return!(0,r.xb)(e.value)||"请补全目标值"},onCreated:function(e){null==e.operator&&(e.operator=a.d.OPERATOR_EQ.type)}}),d=(n(8309),r.gN.createFieldLogic({type:"number_value_compare",title:"值",render:function(e,t){var n=t.previous().find((function(t){return t.name==e.field}));if(null==n)return c(e,t);var r=[a.d.OPERATOR_EQ,a.d.OPERATOR_NE,a.d.OPERATOR_LT,a.d.OPERATOR_LTE,a.d.OPERATOR_GT,a.d.OPERATOR_GTE].map((function(e){return(0,o.Wm)("option",{value:e.type},[e.title])})),u=(0,o.wy)((0,o.Wm)("select",{class:"form-control form-control-sm ".concat(i.logicOperator),"onUpdate:modelValue":function(t){return e.operator=t}},[r]),[[l.bM,e.operator]]),s=e.operator===a.d.OPERATOR_EMPTY.type?null:(0,o.wy)((0,o.Wm)("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":function(t){return e.value=t},placeholder:"目标值"},null),[[l.nr,e.value,void 0,{number:!0}]]);return(0,o.Wm)("div",{class:i.logicForm},[(0,o.Wm)("span",null,[(0,o.Uk)("如果")]),(0,o.Wm)("strong",null,[n?n.title:"N/A"]),(0,o.Wm)("span",null,[(0,o.Uk)("的值")]),u,s])},test:function(e,t){var n=a.d.get(e.operator);if(null==n)return!0;var r=t.previousField(e.field);if(null==r)return!0;var o=r.value;return"number"==typeof o&&n.test(o,e.value)},validator:function(e){return!(0,r.xb)(e.value)||"请补全目标值"},onCreated:function(e){null==e.operator&&(e.operator=a.d.OPERATOR_EQ.type)}})),m=r.gN.createFieldLogic({type:"date_value_compare",title:"值",render:function(e,t){var n=t.previousField(e.field);if(null==n)return c(e,t);var r=[a.d.OPERATOR_EQ,a.d.OPERATOR_NE,a.d.OPERATOR_LT,a.d.OPERATOR_LTE,a.d.OPERATOR_GT,a.d.OPERATOR_GTE,a.d.OPERATOR_EMPTY].map((function(e){return(0,o.Wm)("option",{value:e.type},[e.title])})),u=(0,o.wy)((0,o.Wm)("select",{class:"form-control form-control-sm ".concat(i.logicOperator),"onUpdate:modelValue":function(t){return e.operator=t}},[r]),[[l.bM,e.operator]]),s=e.operator===a.d.OPERATOR_EMPTY.type?null:(0,o.wy)((0,o.Wm)("input",{type:"date",class:"form-control form-control-sm","onUpdate:modelValue":function(t){return e.value=t},placeholder:"目标值"},null),[[l.nr,e.value]]);return(0,o.Wm)("div",{class:i.logicForm},[(0,o.Wm)("span",null,[(0,o.Uk)("如果")]),(0,o.Wm)("strong",null,[n?n.title:"N/A"]),(0,o.Wm)("span",null,[(0,o.Uk)("的值")]),u,s])},test:function(e,t){var n=a.d.get(e.operator);if(null==n)return!0;var r=t.previousField(e.field);return null==r||n.test(r.value,e.value)},validator:function(e){return!(0,r.xb)(e.value)||"请补全目标值"},onCreated:function(e){null==e.operator&&(e.operator=a.d.OPERATOR_EQ.type)}}),p=(n(9753),n(2772),n(561),n(7042),n(6699),n(2023),n(4812),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(1038),n(6649),n(6078),n(9653),n(9070),n(2443),n(3680),n(3706),n(2703),n(8011),n(489),n(9554),n(4747),n(8304),n(5069),n(2262));function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */b=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var l=t&&t.prototype instanceof d?t:d,i=Object.create(l.prototype),a=new W(o||[]);return r(i,"_invoke",{value:O(e,n,a)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function d(){}function m(){}function p(){}var y={};u(y,l,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g(k([])));h&&h!==t&&n.call(h,l)&&(y=h);var _=p.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function o(r,l,i,a){var u=s(e[r],e,l);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==v(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,a)}),(function(e){o("throw",e,i,a)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return o("throw",e,i,a)}))}a(u.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function O(e,t,n){var r="suspendedStart";return function(o,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw l;return T()}for(n.method=o,n.arg=l;;){var i=n.delegate;if(i){var a=P(i,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var l=o.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function W(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return m.prototype=p,r(_,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,a,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(S.prototype),u(S.prototype,i,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,l){void 0===l&&(l=Promise);var i=new S(c(t,n,r,o),l);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),u(_,a,"Generator"),u(_,l,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,W.prototype={constructor:W,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var l=this.tryEntries[o],i=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var a=n.call(l,"catchLoc"),u=n.call(l,"finallyLoc");if(a&&u){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(a){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var i=l?l.completion:{};return i.type=e,i.arg=t,l?(this.method="next",this.next=l.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t,n,r,o,l,i){try{var a=e[l](i),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var l=e.apply(t,n);function i(e){w(l,r,o,i,a,"next",e)}function a(e){w(l,r,o,i,a,"throw",e)}i(void 0)}))}}var O=(0,r.hS)(),P=O.CLASS,E=O.SELECTOR,x=(0,o.aZ)({name:"multiple-select",props:{options:{required:!0,type:Array},modelValue:{default:null,type:Array}},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,r=(0,p.iH)(null),l=(0,p.iH)(null),a=(0,p.iH)(!1),u=(0,p.iH)(1),c=(0,o.Fl)((function(){return!Array.isArray(e.modelValue)||0==e.modelValue.length}));function s(t,r){r.stopPropagation();var o=Array.isArray(e.modelValue)?e.modelValue:[],l=o.indexOf(t.value);l>=0?o.splice(l,1):o.push(t.value),n("update:modelValue",o)}function f(e){if(null==r.value)return 1;var t=r.value,n=t.closest(E.IS_SCROLL);if(null==n)return 1;var o=t.getBoundingClientRect(),l=n.getBoundingClientRect();return e.getBoundingClientRect().bottom+o.height>l.bottom?-1:1}function d(e){return m.apply(this,arguments)}function m(){return(m=S(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.value=!a.value,a.value){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,o.Y3)();case 5:u.value=f(t.target);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){var t=e.target;t instanceof Element&&null!=l.value&&(l.value.contains(t)||(a.value=!1))}function h(t){t.stopPropagation();var r=e.modelValue;r.splice(0,1),n("update:modelValue",r)}return document.addEventListener("click",v,!0),(0,o.Jd)((function(){document.removeEventListener("click",v,!0)})),function(){var t,n=e.options.map((function(t){var n,r,l=(y(n={},i.multipleSelectOption,!0),y(n,i.isSelected,e.modelValue&&e.modelValue.includes(t.value)),n);return(0,o.Wm)("div",{class:l,onClick:s.bind(null,t)},[null!==(r=t.label)&&void 0!==r?r:t.value])})),f=(y(t={},i.multipleSelect,!0),y(t,i.isOpen,a.value),y(t,i.isBottom,1===u.value),y(t,i.isTop,-1===u.value),t),m=c.value?(0,o.Wm)("div",{class:i.multipleSelectPlaceholder},[(0,o.Uk)("请选择目标值")]):function(){var t=e.modelValue;if(1==t.length)return(0,o.Wm)("div",{class:i.multipleSelectContent},[(0,o.Wm)("div",{class:i.multipleSelectTags},[(0,o.Wm)("div",{class:[i.multipleSelectTag,i.isSingle]},[t[0]])])]);var n=g(t),r=n[0],l=n.slice(1);return(0,o.Wm)("div",{class:i.multipleSelectContent},[(0,o.Wm)("div",{class:i.multipleSelectTags},[(0,o.Wm)("div",{class:i.multipleSelectTag},[(0,o.Wm)("span",{class:i.multipleSelectTagContent},[r]),(0,o.Wm)("button",{type:"button",class:"btn-close shadow-none",onClick:h},null)])]),(0,o.Wm)("div",{class:i.multipleSelectCount},[(0,o.Uk)("+"),l.length])])}();return(0,o.Wm)("div",{class:f,ref:l},[(0,o.Wm)("div",{class:i.multipleSelectInput,onClick:d},[m]),(0,o.Wm)("div",{class:i.multipleSelectPanel,ref:r},[(0,o.Wm)("div",{class:[i.multipleSelectOptions,P.IS_SCROLL]},[n])])])}}});function W(e,t){if(e.operator==a.d.OPERATOR_EMPTY.type)return null;if(e.operator==a.d.OPERATOR_CONTAINS.type)return(0,o.wy)((0,o.Wm)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":function(t){return e.value=t},placeholder:"目标值"},null),[[l.nr,e.value]]);if(!Array.isArray(t.options))return null;if(e.operator==a.d.OPERATOR_OPTION_EQ.type||e.operator==a.d.OPERATOR_OPTION_NE.type||e.operator==a.d.OPERATOR_OPTION_CONTAINS.type)return(0,o.Wm)(x,{options:t.options,modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t}},null);var n=t.options.map((function(e){var t;return(0,o.Wm)("option",{value:e.value},[null!==(t=e.label)&&void 0!==t?t:e.value])}));return(0,o.wy)((0,o.Wm)("select",{class:"form-control form-control-sm","onUpdate:modelValue":function(t){return e.value=t}},[(0,o.Wm)("option",{value:null,disabled:!0},[(0,o.Uk)("-- 请选择目标值 --")]),n]),[[l.bM,e.value]])}function k(e,t){if(!(t instanceof r.Wi)||null==e.value)return!1;var n=t.previous().find((function(t){return t.name==e.field}));if(null==n)return!1;var o=n.options;if(!Array.isArray(o)||0==o.length)return!1;var l,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,l=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw l}}}}(Array.isArray(e.value)?e.value:[e.value]);try{var a=function(){var e=l.value;if(null==o.find((function(t){return t.value===e})))return{v:!1}};for(i.s();!(l=i.n()).done;){var u=a();if("object"===v(u))return u.v}}catch(e){i.e(e)}finally{i.f()}return!0}var T=r.gN.createFieldLogic({type:"option_value_compare",title:"值",render:function(e,t){var n=t.previousField(e.field);if(null==n)return c(e,t);var r=[a.d.OPERATOR_EQ,a.d.OPERATOR_NE,a.d.OPERATOR_CONTAINS,a.d.OPERATOR_EMPTY].map((function(e){return(0,o.Wm)("option",{value:e.type},[e.title])})),u=(0,o.wy)((0,o.Wm)("select",{class:"form-control form-control-sm ".concat(i.logicOperator),"onUpdate:modelValue":function(t){return e.operator=t}},[r]),[[l.bM,e.operator]]),s=W(e,n);return(0,o.Wm)("div",{class:i.logicForm},[(0,o.Wm)("span",null,[(0,o.Uk)("如果")]),(0,o.Wm)("strong",null,[n.title]),(0,o.Wm)("span",null,[(0,o.Uk)("的值")]),u,s])},test:function(e,t){var n=a.d.get(e.operator);if(null==n)return!0;var r=t.previousField(e.field);return null==r||n.test(r.value,e.value)},validator:function(e,t){return e.operator==a.d.OPERATOR_EMPTY.type||(e.operator==a.d.OPERATOR_CONTAINS.type?!(0,r.xb)(e.value)||"请输入目标值":!((0,r.xb)(e.value)||!k(e,t))||"请选择目标值")},onCreated:function(e,t){null==e.operator&&(e.operator=a.d.OPERATOR_EQ.type),e.operator==a.d.OPERATOR_CONTAINS.type||k(e,t)||(e.value=null)}}),R=r.gN.createFieldLogic({type:"multiple_option_value_compare",title:"值",render:function(e,t){var n=t.previousField(e.field);if(null==n)return c(e,t);var r=[a.d.OPERATOR_OPTION_EQ,a.d.OPERATOR_OPTION_NE,a.d.OPERATOR_OPTION_CONTAINS,a.d.OPERATOR_EMPTY].map((function(e){return(0,o.Wm)("option",{value:e.type},[e.title])})),u=(0,o.wy)((0,o.Wm)("select",{class:"form-control form-control-sm ".concat(i.logicOperator),"onUpdate:modelValue":function(t){return e.operator=t}},[r]),[[l.bM,e.operator]]),s=W(e,n);return(0,o.Wm)("div",{class:i.logicForm},[(0,o.Wm)("span",null,[(0,o.Uk)("如果")]),(0,o.Wm)("strong",null,[n.title]),(0,o.Wm)("span",null,[(0,o.Uk)("的值")]),u,s])},test:function(e,t){var n=a.d.get(e.operator);if(null==n)return!0;var r=t.previousField(e.field);return null==r||n.test(r.value,e.value)},onCreated:function(e,t){null==e.operator&&(e.operator=a.d.OPERATOR_OPTION_EQ.type),k(e,t)||(e.value=null)}});const j={use:function(){(0,r.ZN)(s),(0,r.ZN)(f),(0,r.ZN)(d),(0,r.ZN)(m),(0,r.ZN)(T),(0,r.ZN)(R)},remove:function(){(0,r.I5)(s),(0,r.I5)(f),(0,r.I5)(d),(0,r.I5)(m),(0,r.I5)(T),(0,r.I5)(R)}};var A=n(1642),C=["id","name","placeholder","disabled"];n(4678),n(7327);var V=n(1207),D=(0,r.hS)().EVENTS;function N(e){return"_value"in e?e._value:e.value}function I(e){var t=e.checked,n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}function U(e){return null==N(e)?e.checked:e.value}function L(e){var t=e.selectedIndex;return t<0?null:N(e.options[t])}function F(e,t,n,r){var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"build",n=e.value,r=e.type;if("number"==r){var o=parseFloat(n);return isNaN(o)?n:o}if("select"==r)return L(e);if("checkbox"==r){var l='input[type="checkbox"][name="'.concat(e.name,'"]'),i=Array.from(document.querySelectorAll(l));return"setting"===t&&1==i.length?I(i[0]):i.filter((function(e){return e.checked})).map(U)}return e.value}(t.target,"setting");e(D.UPDATE_FIELD,{prop:n,value:o,scope:r})}const M=(0,o.aZ)({name:"xform-bs-text",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(){return{value:(0,V.Hg)()}}});var Z=n(3744);const q=(0,Z.Z)(M,[["render",function(e,t,n,r,i,a){return(0,o.wy)(((0,o.wg)(),(0,o.iD)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.value=t}),id:e.field.uid,name:e.field.name,type:"text",class:"form-control form-control-sm",placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled},null,8,C)),[[l.nr,e.value]])}]]);var Y={class:"xform-bs-field-setting-prop"},H=(0,o._)("header",null,"默认值：",-1);var B=n(3577),G={class:"xform-bs-field-setting-head"},Q={class:"xform-bs-field-setting-prop"},K=(0,o._)("header",null,"标题：",-1),z={key:0,class:"xform-bs-field-setting-prop"},X=(0,o._)("header",null,"提示：",-1),$={key:1,class:"xform-bs-field-setting-prop"},J=(0,o._)("header",null,"属性：",-1),ee={key:0,class:"form-check form-check-inline"},te=["id","name"],ne=["for"],re={class:"form-check form-check-inline"},oe=["id","name"],le=["for"],ie={class:"form-check form-check-inline"},ae=["id","name"],ue=["for"];var ce={class:"xform-bs-field-setting-prop"},se=(0,o._)("span",null,"逻辑：",-1);var fe=n(9622),de=["id"],me={class:"modal-content"},pe={class:"modal-header"},ve={key:0,class:"modal-title"},be={class:"modal-body"},ye={class:"modal-footer"},ge={key:0,class:"modal-footer-left"};var he=1e4;function _e(){var e=null,t="xbs-modal__".concat(he++);function n(t){if(null!=e){var n=e._element;n.addEventListener("hidden.bs.modal",(function e(){n.removeEventListener("hidden.bs.modal",e),"function"==typeof t&&t()})),e.hide()}}return{id:t,show:function(){var n;n=document.getElementById(t),(e=null==n?null:new window.bootstrap.Modal(n,{backdrop:"static",keyboard:!1}))&&e.show()},hide:n,destroy:function(){var t=function(){e.dispose(),e=null};if(null!=e)return e._isShown?n(t):void t()}}}const we=(0,o.aZ)({name:"modal",inheritAttrs:!1,props:{title:{type:String,default:null},visible:{type:Boolean,default:!1},width:{type:String,default:"640px"}},emits:["update:visible","confirm","closed"],setup:function(e,t){var n=t.emit,r=(0,p.iH)(!1),l=_e();function i(){n("update:visible",!1)}return(0,o.YP)((function(){return e.visible}),(function(){e.visible?(r.value=!0,(0,o.Y3)((function(){return l.show()}))):l.hide((function(){r.value=!1,n("closed")}))})),(0,o.Jd)((function(){l.destroy(),i()})),{id:l.id,close:i,confirm:function(){n("confirm")},rendered:r}}}),Se=(0,Z.Z)(we,[["render",function(e,t,n,r,l,i){return(0,o.wg)(),(0,o.j4)(o.lR,{to:"body"},[e.rendered?((0,o.wg)(),(0,o.iD)("div",(0,o.dG)({key:0,class:"modal fade xform-bs-modal",id:e.id},e.$attrs),[(0,o._)("div",{class:"modal-dialog modal-dialog-centered",style:(0,B.j5)({width:e.width})},[(0,o._)("div",me,[(0,o._)("div",pe,[(0,o.WI)(e.$slots,"header",{},(function(){return[e.title?((0,o.wg)(),(0,o.iD)("h5",ve,(0,B.zw)(e.title),1)):(0,o.kq)("",!0)]})),(0,o._)("button",{type:"button",class:"btn-close shadow-none",onClick:t[0]||(t[0]=function(){return e.close&&e.close.apply(e,arguments)})})]),(0,o._)("div",be,[(0,o.WI)(e.$slots,"default")]),(0,o._)("div",ye,[e.$slots["footer-left"]?((0,o.wg)(),(0,o.iD)("div",ge,[(0,o.WI)(e.$slots,"footer-left")])):(0,o.kq)("",!0),(0,o._)("button",{type:"button",class:"btn btn-sm btn-link btn-text",onClick:t[1]||(t[1]=function(){return e.close&&e.close.apply(e,arguments)})},"关闭"),(0,o._)("button",{type:"button",class:"btn btn-sm btn-primary",onClick:t[2]||(t[2]=function(){return e.confirm&&e.confirm.apply(e,arguments)})},"保存")])])],4)],16,de)):(0,o.kq)("",!0)])}]]),Oe=(0,o.aZ)({name:"field-logic",props:{field:{type:r.Wi,required:!0}},setup:function(e){var t=(0,r.j9)(),n=(0,p.iH)(null),l=(0,p.iH)(!1),i=(0,o.Fl)({get:function(){return e.field.logic},set:function(n){t.updateField(e.field,{prop:"logic",value:n})}});return{editor:n,logic:i,visible:l,save:function(){var e=n.value;if(null!=e){var t=e.submit();t.valid&&(i.value=t.data,l.value=!1)}},showModal:function(){l.value=!0}}},components:{LogicEditor:fe.h,Modal:Se}}),Pe={classes:{modal:"MyFDKdyFHQgakOSw6YhR",logicBtn:"VMGeYtrSlpdGbmEa3zR4",tip:"o5agcyLGhHZQzloobthZ"}},Ee=(0,Z.Z)(Oe,[["render",function(e,t,n,r,l,i){var a=(0,o.up)("LogicEditor"),u=(0,o.up)("Modal");return(0,o.wg)(),(0,o.iD)("section",ce,[(0,o._)("header",null,[se,(0,o._)("button",{type:"button",class:(0,B.C_)(["btn btn-link btn-text",e.classes.logicBtn]),onClick:t[0]||(t[0]=function(){return e.showModal&&e.showModal.apply(e,arguments)})},"配置",2)]),(0,o._)("div",{class:(0,B.C_)(e.classes.tip)},"配置字段逻辑后，如果依赖的字段能够满足指定的条件，就会显示该字段，否则会隐藏该字段。",2),(0,o.Wm)(u,{title:"配置逻辑",class:(0,B.C_)(e.classes.modal),width:"840px",visible:e.visible,"onUpdate:visible":t[1]||(t[1]=function(t){return e.visible=t}),onConfirm:e.save},{default:(0,o.w5)((function(){return[(0,o.Wm)(a,{field:e.field,ref:"editor"},null,8,["field"])]})),_:1},8,["class","visible","onConfirm"])])}],["__cssModules",Pe]]),xe=(0,o.aZ)({name:"field-setting",props:{field:{type:r.Wi,required:!0},placeholder:{type:Boolean,default:!0},required:{type:Boolean,default:!0},logic:{type:Boolean,default:!0},attributes:{type:Boolean,default:!0}},setup:function(e){return{fieldRef:(0,p.Vh)(e,"field"),allowLogic:(0,o.Fl)((function(){return!0===(0,r.iE)().logic}))}},components:{FieldLogic:Ee}}),We=(0,Z.Z)(xe,[["render",function(e,t,n,r,i,a){var u=(0,o.up)("FieldLogic");return(0,o.wg)(),(0,o.iD)("div",{class:(0,B.C_)("xform-bs-field-setting xform-bs-".concat(e.fieldRef.type,"-setting"))},[(0,o._)("h3",G,(0,B.zw)(e.field.conf.title),1),(0,o._)("section",Q,[K,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control form-control-sm",placeholder:"[必填] 请输入标题...","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.fieldRef.title=t})},null,512),[[l.nr,e.fieldRef.title]]),(0,o.WI)(e.$slots,"title")]),e.placeholder?((0,o.wg)(),(0,o.iD)("section",z,[X,(0,o.wy)((0,o._)("textarea",{class:"form-control form-control-sm",placeholder:"[可选] 请输入提示信息...",rows:"3","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.fieldRef.placeholder=t})},null,512),[[l.nr,e.fieldRef.placeholder]])])):(0,o.kq)("",!0),e.attributes?((0,o.wg)(),(0,o.iD)("section",$,[J,e.required?((0,o.wg)(),(0,o.iD)("div",ee,[(0,o.wy)((0,o._)("input",{id:"".concat(e.field.name,"-required"),name:"".concat(e.field.name,"-required"),type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.fieldRef.required=t})},null,8,te),[[l.e8,e.fieldRef.required]]),(0,o._)("label",{class:"form-check-label",for:"".concat(e.field.name,"-required"),title:"勾选则该字段在表单提交时必须填写"},"必填",8,ne)])):(0,o.kq)("",!0),(0,o._)("div",re,[(0,o.wy)((0,o._)("input",{id:"".concat(e.field.name,"-disabled"),name:"".concat(e.field.name,"-disabled"),type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.fieldRef.disabled=t})},null,8,oe),[[l.e8,e.fieldRef.disabled]]),(0,o._)("label",{class:"form-check-label",for:"".concat(e.field.name,"-disabled"),title:"勾选则该字段在表单中无法编辑, 也不参与表单验证"},"禁用",8,le)]),(0,o._)("div",ie,[(0,o.wy)((0,o._)("input",{id:"".concat(e.field.name,"-hidden"),name:"".concat(e.field.name,"-hidden"),type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.fieldRef.hidden=t})},null,8,ae),[[l.e8,e.fieldRef.hidden]]),(0,o._)("label",{class:"form-check-label",for:"".concat(e.field.name,"-hidden"),title:"勾选则该字段将不会再表单中显示"},"隐藏",8,ue)]),(0,o.WI)(e.$slots,"attributes")])):(0,o.kq)("",!0),(0,o.WI)(e.$slots,"default"),e.allowLogic?((0,o.wg)(),(0,o.j4)(u,{key:2,field:e.fieldRef,"onUpdate:field":t[5]||(t[5]=function(t){return e.fieldRef=t})},null,8,["field"])):(0,o.kq)("",!0)],2)}]]);function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}var Te=(0,r.hS)().EVENTS;const Re=(0,o.aZ)({name:"xform-bs-text-setting",props:{field:r.Wi},emits:[Te.UPDATE_FIELD],setup:function(){return{compatValue:(0,V.Xu)([]).useCompatValue()}},components:(je={},Ae=We.name,Ce=We,(Ae=function(e){var t=function(e,t){if("object"!==ke(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ke(t)?t:String(t)}(Ae))in je?Object.defineProperty(je,Ae,{value:Ce,enumerable:!0,configurable:!0,writable:!0}):je[Ae]=Ce,je)});var je,Ae,Ce;const Ve=(0,Z.Z)(Re,[["render",function(e,t,n,r,i,a){var u=(0,o.up)("field-setting");return(0,o.wg)(),(0,o.j4)(u,{field:e.field},{default:(0,o.w5)((function(){return[(0,o._)("section",Y,[H,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.compatValue=t}),placeholder:"[可选] 如果字段没有填写，默认为设定的值"},null,512),[[l.nr,e.compatValue]])])]})),_:1},8,["field"])}]]),De=r.gN.create({icon:A,type:"text",title:"单行文本",setting:Ve,build:q,validator:function(e,t){return e.required&&(0,r.xb)(t)?Promise.reject("必填"):Promise.resolve()},logic:[s,f]});var Ne=n(5830),Ie=["id","name","placeholder","disabled"];const Ue=(0,o.aZ)({name:"xform-bs-textarea",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(){return{value:(0,V.Hg)()}}}),Le=(0,Z.Z)(Ue,[["render",function(e,t,n,r,i,a){return(0,o.wy)(((0,o.wg)(),(0,o.iD)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.value=t}),id:e.field.uid,rows:"3",name:e.field.name,class:"form-control form-control-sm",placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled},null,8,Ie)),[[l.nr,e.value]])}]]);var Fe={class:"xform-bs-field-setting-prop"},Me=(0,o._)("header",null,"默认值：",-1);function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}var qe=(0,r.hS)().EVENTS;const Ye=(0,o.aZ)({name:"xform-bs-textarea-setting",props:{field:r.Wi},emits:[qe.UPDATE_FIELD],setup:function(){return{compatValue:(0,V.Xu)([]).useCompatValue()}},components:function(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ze(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ze(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},We.name,We)}),He=(0,Z.Z)(Ye,[["render",function(e,t,n,r,i,a){var u=(0,o.up)("field-setting");return(0,o.wg)(),(0,o.j4)(u,{field:e.field},{default:(0,o.w5)((function(){return[(0,o._)("section",Fe,[Me,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.compatValue=t}),placeholder:"[可选] 如果字段没有填写，默认为设定的值"},null,512),[[l.nr,e.compatValue]])])]})),_:1},8,["field"])}]]),Be=r.gN.create({icon:Ne,type:"textarea",title:"多行文本",setting:He,build:Le,validator:function(e,t){return e.required&&(0,r.xb)(t)?Promise.reject("必填"):Promise.resolve()},logic:[s,f]});var Ge=n(5227),Qe={class:"xform-bs-field-setting-prop"},Ke=(0,o._)("header",null,"默认值：",-1),ze={class:"form-check form-check-inline"},Xe=["id","name"],$e=["for"];function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}var et=(0,r.hS)().EVENTS;const tt=(0,o.aZ)({name:"xform-bs-number-setting",props:{field:r.Wi},emits:[et.UPDATE_FIELD],setup:function(){var e=(0,V.Xu)([]);return{integer:(0,V.Et)("integer","attributes"),compatValue:e.useCompatValue()}},components:function(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Je(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Je(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},We.name,We)}),nt=(0,Z.Z)(tt,[["render",function(e,t,n,r,i,a){var u=(0,o.up)("field-setting");return(0,o.wg)(),(0,o.j4)(u,{field:e.field},{attributes:(0,o.w5)((function(){return[(0,o._)("div",ze,[(0,o.wy)((0,o._)("input",{id:"".concat(e.field.name,"-integer"),name:"".concat(e.field.name,"-integer"),type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.integer=t})},null,8,Xe),[[l.e8,e.integer]]),(0,o._)("label",{class:"form-check-label",for:"".concat(e.field.name,"-integer"),title:"勾选则只允许输入整数"},"整数",8,$e)])]})),default:(0,o.w5)((function(){return[(0,o._)("section",Qe,[Ke,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.compatValue=t}),placeholder:"[可选] 如果字段没有填写，默认为设定的值"},null,512),[[l.nr,e.compatValue,void 0,{number:!0}]])])]})),_:1},8,["field"])}]]);var rt=(0,o.aZ)({name:"xform-bs-number",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){var t=(0,V.Hg)();return function(){return(0,o.wy)((0,o.Wm)("input",{id:e.field.uid,name:e.field.name,type:"number","onUpdate:modelValue":function(e){return t.value=e},class:"form-control form-control-sm",placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled},null),[[l.nr,t.value,void 0,{number:!0}]])}}});const ot=r.gN.create({icon:Ge,type:"number",title:"数字",setting:nt,build:rt,validator:function(e,t){return e.required&&(0,r.xb)(t)?Promise.reject("必填"):e.attributes.integer&&!/^[-+]?[1-9]?\d+$/.test(t+"")?Promise.reject("请输入整数"):Promise.resolve()},logic:[d]});var lt=n(4640),it=["id","name","disabled"],at={class:"xform-bs-is-placeholer",value:""},ut=["value"];const ct=(0,o.aZ)({name:"xform-bs-select",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(){var e=(0,V.Hg)("");return{value:e,className:(0,o.Fl)((function(){return{"form-select":!0,"form-select-sm":!0,"xform-bs-select":!0,"xform-bs-is-empty":null==e||"string"==typeof e.value&&0==e.value.length}}))}}}),st=(0,Z.Z)(ct,[["render",function(e,t,n,r,i,a){return(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.value=t}),id:e.field.uid,name:e.field.name,class:(0,B.C_)(e.className),disabled:e.disabled||e.field.disabled},[(0,o._)("option",at,"---- "+(0,B.zw)(e.field.placeholder||"请选择")+" ----",1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.field.options,(function(e){return(0,o.wg)(),(0,o.iD)("option",{key:e.value,value:e.value},(0,B.zw)(e.value),9,ut)})),128))],10,it)),[[l.bM,e.value]])}]]);var ft={class:"xform-bs-field-setting-prop"},dt=(0,o._)("header",null,"选项：",-1),mt=["value","onInput"],pt=["onClick","disabled"],vt={class:"xform-bs-field-setting-prop"},bt=(0,o._)("header",null,"默认值：",-1),yt=["value"],gt=(0,o._)("option",{value:""},"-- 请选择--",-1),ht=["value"];n(5212),n(7941),n(5003),n(9337),n(3321);function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function St(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_t(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ot=(0,r.hS)(),Pt=Ot.BuiltInDefaultValueType,Et=Ot.EVENTS;const xt=(0,o.aZ)({name:"xform-bs-select-setting",props:{field:r.Wi},emits:[Et.UPDATE_FIELD],setup:function(){var e=[{value:Pt.MANUAL,label:"手动指定"},{value:Pt.OPTION_FIRST,label:"首选项"}],t=(0,V.D2)((function(){if(!r.value)return;var e=t.options.value,n=l.value;l.value=e.some((function(e){return e.value==n}))?n:void 0})),n=(0,V.Xu)(e),r=n.useIsManual(),o=n.useCompatType(),l=n.useCompatValue((function(e){return e.value||""}));return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){St(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({compatType:o,compatValue:l,defTypes:e,isManual:r},t)},components:St({},We.name,We)}),Wt={classes:{defaultValue:"deY9Z_hB27uAHEd9_O0C"}},kt=(0,Z.Z)(xt,[["render",function(e,t,n,r,i,a){var u=(0,o.up)("field-setting");return(0,o.wg)(),(0,o.j4)(u,{field:e.field},{default:(0,o.w5)((function(){return[(0,o._)("section",ft,[dt,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.options,(function(t,n){return(0,o.wg)(),(0,o.iD)("div",{key:n,class:"xform-bs-setting-option"},[(0,o._)("input",{value:t.value,class:"form-control form-control-sm",placeholder:"请输入选项内容",onInput:function(n){return e.updateOption(n,t)}},null,40,mt),(0,o._)("button",{type:"button",class:"btn btn-link btn-text text-danger",onClick:function(n){return e.removeOption(t)},disabled:e.field.options.length<=1},"删除",8,pt)])})),128)),(0,o._)("button",{type:"button",class:"btn btn-link btn-text btn-sm p-0",onClick:t[0]||(t[0]=function(){return e.addOption&&e.addOption.apply(e,arguments)})},"添加选项")]),(0,o._)("section",vt,[bt,(0,o._)("div",{class:(0,B.C_)(e.classes.defaultValue)},[(0,o.wy)((0,o._)("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.compatType=t})},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.defTypes,(function(e,t){return(0,o.wg)(),(0,o.iD)("option",{key:t,value:e.value},(0,B.zw)(e.label||e.value),9,yt)})),128))],512),[[l.bM,e.compatType]]),e.isManual?(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{key:0,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.compatValue=t}),class:"form-select form-select-sm"},[gt,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.options,(function(e,t){return(0,o.wg)(),(0,o.iD)("option",{key:t,value:e.value},(0,B.zw)(e.label||e.value),9,ht)})),128))],512)),[[l.bM,e.compatValue]]):(0,o.kq)("",!0)],2)])]})),_:1},8,["field"])}],["__cssModules",Wt]]),Tt=r.gN.create({icon:lt,type:"select",title:"下拉选择",setting:kt,build:st,validator:function(e,t){return e.required&&(0,r.xb)(t)?Promise.reject("必填"):Promise.resolve()},onCreate:function(e,t,n){var r=Array.isArray(t.options)?t.options:[];n&&r.push({value:"选项1"}),e.options=r},logic:[T]});var Rt=n(1412),jt={class:"xform-bs-radio"},At=["id","name","value","disabled"],Ct=["for"];const Vt=(0,o.aZ)({name:"xform-bs-radio",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){return{value:(0,V.Hg)(),radioClassName:(0,o.Fl)((function(){var t=["form-check"];return"inline"==e.field.attributes.layout&&t.push("form-check-inline"),t}))}}}),Dt=(0,Z.Z)(Vt,[["render",function(e,t,n,r,i,a){return(0,o.wg)(),(0,o.iD)("div",jt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.field.options,(function(n,r){return(0,o.wg)(),(0,o.iD)("div",{key:r,class:(0,B.C_)(e.radioClassName)},[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.value=t}),id:e.field.uid+"_"+r,name:e.field.name,value:n.value,type:"radio",class:"form-check-input",disabled:e.disabled||e.field.disabled},null,8,At),[[l.G2,e.value]]),(0,o._)("label",{class:"form-check-label",for:e.field.uid+"_"+r},(0,B.zw)(n.value),9,Ct)],2)})),128))])}]]);var Nt={class:"xform-bs-field-setting-prop"},It=(0,o._)("header",null,"布局：",-1),Ut={class:"btn-group",role:"group"},Lt={class:"xform-bs-field-setting-prop"},Ft=(0,o._)("header",null,"选项：",-1),Mt=["value","onInput"],Zt=["onClick","disabled"],qt={class:"xform-bs-field-setting-prop"},Yt=(0,o._)("header",null,"默认值：",-1),Ht=["value"],Bt=(0,o._)("option",{value:""},"-- 请选择--",-1),Gt=["value"];function Qt(e){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Qt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Qt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xt=(0,r.hS)(),$t=Xt.BuiltInDefaultValueType,Jt=Xt.EVENTS;const en=(0,o.aZ)({name:"xform-bs-radio-setting",props:{field:r.Wi},emits:[Jt.UPDATE_FIELD],setup:function(){var e=[{value:$t.MANUAL,label:"手动指定"},{value:$t.OPTION_FIRST,label:"首选项"}],t=(0,V.D2)((function(){if(!r.value)return;var e=t.options.value,n=l.value;l.value=e.some((function(e){return e.value==n}))?n:void 0})),n=(0,V.Xu)(e),r=n.useIsManual(),o=n.useCompatType(),l=n.useCompatValue((function(e){return e.value||""}));return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(n),!0).forEach((function(t){zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({compatType:o,compatValue:l,defTypes:e,isManual:r},t)},components:zt({},We.name,We)}),tn={classes:{defaultValue:"ySdLSG3unM25YHrKsbYt"}},nn=(0,Z.Z)(en,[["render",function(e,t,n,r,i,a){var u=(0,o.up)("field-setting");return(0,o.wg)(),(0,o.j4)(u,{field:e.field,placeholder:!1},{default:(0,o.w5)((function(){return[(0,o._)("section",Nt,[It,(0,o._)("div",Ut,[(0,o._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"inline"==e.field.attributes.layout}]),onClick:t[0]||(t[0]=function(t){return e.update("layout","inline","attributes")})}," 行内 ",2),(0,o._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"block"==e.field.attributes.layout}]),onClick:t[1]||(t[1]=function(t){return e.update("layout","block","attributes")})}," 换行 ",2)])]),(0,o._)("section",Lt,[Ft,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.options,(function(t,n){return(0,o.wg)(),(0,o.iD)("div",{key:n,class:"xform-bs-setting-option"},[(0,o._)("input",{value:t.value,class:"form-control form-control-sm",placeholder:"请输入选项内容",onInput:function(n){return e.updateOption(n,t)}},null,40,Mt),(0,o._)("button",{type:"button",class:"btn btn-link btn-text text-danger",onClick:function(n){return e.removeOption(t)},disabled:e.options.length<=1},"删除",8,Zt)])})),128)),(0,o._)("button",{type:"button",class:"btn btn-sm btn-link btn-text p-0",onClick:t[2]||(t[2]=function(){return e.addOption&&e.addOption.apply(e,arguments)})},"添加选项")]),(0,o._)("section",qt,[Yt,(0,o._)("div",{class:(0,B.C_)(e.classes.defaultValue)},[(0,o.wy)((0,o._)("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.compatType=t})},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.defTypes,(function(e,t){return(0,o.wg)(),(0,o.iD)("option",{key:t,value:e.value},(0,B.zw)(e.label||e.value),9,Ht)})),128))],512),[[l.bM,e.compatType]]),e.isManual?(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{key:0,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.compatValue=t}),class:"form-select form-select-sm"},[Bt,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.options,(function(e,t){return(0,o.wg)(),(0,o.iD)("option",{key:t,value:e.value},(0,B.zw)(e.label||e.value),9,Gt)})),128))],512)),[[l.bM,e.compatValue]]):(0,o.kq)("",!0)],2)])]})),_:1},8,["field"])}],["__cssModules",tn]]),rn=r.gN.create({icon:Rt,type:"radio",title:"单选",setting:nn,build:Dt,validator:function(e,t){return e.required&&(0,r.xb)(t)?Promise.reject("必填"):Promise.resolve()},onCreate:function(e,t,n){var r=Array.isArray(t.options)?t.options:[];n&&(r.push({value:"选项1"}),e.attributes.layout="inline"),e.options=r},logic:[T]});var on=n(8346),ln={class:"xform-bs-checkbox"},an=["id","name","value","disabled"],un=["for"];const cn=(0,o.aZ)({name:"xform-bs-checkbox",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){return{value:(0,V.Hg)([]),className:(0,o.Fl)((function(){var t=["form-check"];return"inline"==e.field.attributes.layout&&t.push("form-check-inline"),t}))}}}),sn=(0,Z.Z)(cn,[["render",function(e,t,n,r,i,a){return(0,o.wg)(),(0,o.iD)("div",ln,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.field.options,(function(n,r){return(0,o.wg)(),(0,o.iD)("div",{key:r,class:(0,B.C_)(e.className)},[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.value=t}),id:e.field.uid+"_"+r,name:e.field.name,value:n.value,type:"checkbox",class:"form-check-input",disabled:e.disabled||e.field.disabled},null,8,an),[[l.e8,e.value]]),(0,o._)("label",{class:"form-check-label",for:e.field.uid+"_"+r},(0,B.zw)(n.value),9,un)],2)})),128))])}]]);var fn={class:"xform-bs-field-setting-prop"},dn=(0,o._)("header",null,"布局：",-1),mn={class:"btn-group",role:"group"},pn={class:"xform-bs-field-setting-prop"},vn=(0,o._)("header",null,"选项：",-1),bn=["value","onInput"],yn=["onClick","disabled"],gn={class:"xform-bs-field-setting-prop"},hn=(0,o._)("header",null,"默认值：",-1),_n=["value"],wn=["value"];function Sn(e){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(e)}function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Sn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Sn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Sn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var En=(0,r.hS)(),xn=En.BuiltInDefaultValueType,Wn=En.EVENTS;const kn=(0,o.aZ)({name:"xform-bs-checkbox-setting",props:{field:r.Wi},emits:[Wn.UPDATE_FIELD],setup:function(){var e=[{value:xn.MANUAL,label:"手动指定"},{value:xn.OPTION_ALL,label:"全部选项"}],t=(0,V.D2)((function(){if(!r.value)return;var e=t.options.value,n=l.value;l.value=n.filter((function(t){return e.some((function(e){return e.value==t}))}))})),n=(0,V.Xu)(e),r=n.useIsManual(),o=n.useCompatType(),l=n.useCompatValue((function(e){var t=e.value;return Array.isArray(t)?t:[]}));return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(Object(n),!0).forEach((function(t){Pn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({compatType:o,compatValue:l,defTypes:e,isManual:r},t)},components:Pn({},We.name,We)}),Tn={classes:{defaultValue:"vWbaOSSoRLt4TBhSTiME"}},Rn=(0,Z.Z)(kn,[["render",function(e,t,n,r,i,a){var u=(0,o.up)("field-setting");return(0,o.wg)(),(0,o.j4)(u,{field:e.field,placeholder:!1},{default:(0,o.w5)((function(){return[(0,o._)("section",fn,[dn,(0,o._)("div",mn,[(0,o._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"inline"==e.field.attributes.layout}]),onClick:t[0]||(t[0]=function(t){return e.update("layout","inline","attributes")})}," 行内 ",2),(0,o._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"block"==e.field.attributes.layout}]),onClick:t[1]||(t[1]=function(t){return e.update("layout","block","attributes")})}," 换行 ",2)])]),(0,o._)("section",pn,[vn,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.options,(function(t,n){return(0,o.wg)(),(0,o.iD)("div",{key:n,class:"xform-bs-setting-option"},[(0,o._)("input",{value:t.value,class:"form-control form-control-sm",placeholder:"请输入选项内容",onInput:function(n){return e.updateOption(n,t)}},null,40,bn),(0,o._)("button",{type:"button",class:"btn btn-link btn-text text-danger",onClick:function(n){return e.removeOption(t)},disabled:e.field.options.length<=1},"删除",8,yn)])})),128)),(0,o._)("button",{type:"button",class:"btn btn-link btn-text btn-sm p-0",onClick:t[2]||(t[2]=function(){return e.addOption&&e.addOption.apply(e,arguments)})},"添加选项")]),(0,o._)("section",gn,[hn,(0,o._)("div",{class:(0,B.C_)(e.classes.defaultValue)},[(0,o.wy)((0,o._)("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.compatType=t})},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.defTypes,(function(e,t){return(0,o.wg)(),(0,o.iD)("option",{key:t,value:e.value},(0,B.zw)(e.label||e.value),9,_n)})),128))],512),[[l.bM,e.compatType]]),e.isManual?(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{key:0,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.compatValue=t}),class:"form-select form-select-sm",multiple:""},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.options,(function(e,t){return(0,o.wg)(),(0,o.iD)("option",{key:t,value:e.value},(0,B.zw)(e.label||e.value),9,wn)})),128))],512)),[[l.bM,e.compatValue]]):(0,o.kq)("",!0)],2)])]})),_:1},8,["field"])}],["__cssModules",Tn]]),jn=r.gN.create({icon:on,type:"checkbox",title:"多选",setting:Rn,build:sn,validator:function(e,t){return e.required&&(0,r.xb)(t)?Promise.reject("必填"):Promise.resolve()},onCreate:function(e,t,n){var r=Array.isArray(t.options)?t.options:[];n&&(r.push({value:"选项1"}),e.attributes.layout="inline"),e.options=r},logic:[R]});var An=n(5464),Cn=["id","name","placeholder","disabled"];const Vn=(0,o.aZ)({name:"xform-bs-date",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(){return{value:(0,V.Hg)()}}}),Dn=(0,Z.Z)(Vn,[["render",function(e,t,n,r,i,a){return(0,o.wy)(((0,o.wg)(),(0,o.iD)("input",{id:e.field.uid,name:e.field.name,type:"date","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.value=t}),class:"form-control form-control-sm",placeholder:e.field.placeholder,disabled:e.disabled||e.field.disabled},null,8,Cn)),[[l.nr,e.value]])}]]);var Nn={class:"xform-bs-field-setting-prop"},In=(0,o._)("header",null,[(0,o._)("label",{class:"xform-bs-label",title:"如果字段没有填写，默认为设定的值"},"默认值：")],-1),Un=["value"];function Ln(e){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(e)}var Fn=(0,r.hS)(),Mn=Fn.BuiltInDefaultValueType,Zn=Fn.EVENTS;const qn=(0,o.aZ)({name:"xform-bs-date-setting",props:{field:r.Wi},emits:[Zn.UPDATE_FIELD],setup:function(){var e=[{value:Mn.MANUAL,label:"手动指定"},{value:Mn.DATE_NOW,label:"当前时间"}],t=(0,V.Xu)(e);return{isManual:t.useIsManual(),compatType:t.useCompatType(),compatValue:t.useCompatValue(),defTypes:e}},components:function(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ln(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ln(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ln(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},We.name,We)}),Yn={classes:{defaultValue:"u7Tcivau3QkBOwAATtHv"}},Hn=(0,Z.Z)(qn,[["render",function(e,t,n,r,i,a){var u=(0,o.up)("field-setting");return(0,o.wg)(),(0,o.j4)(u,{field:e.field,placeholder:!1},{default:(0,o.w5)((function(){return[(0,o._)("section",Nn,[In,(0,o._)("div",{class:(0,B.C_)(e.classes.defaultValue)},[(0,o.wy)((0,o._)("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.compatType=t})},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.defTypes,(function(e,t){return(0,o.wg)(),(0,o.iD)("option",{key:t,value:e.value},(0,B.zw)(e.label||e.value),9,Un)})),128))],512),[[l.bM,e.compatType]]),e.isManual?(0,o.wy)(((0,o.wg)(),(0,o.iD)("input",{key:0,type:"date","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.compatValue=t}),class:"form-control form-control-sm",placeholder:"请选择默认时间"},null,512)),[[l.nr,e.compatValue]]):(0,o.kq)("",!0)],2)])]})),_:1},8,["field"])}],["__cssModules",Yn]]),Bn=r.gN.create({icon:An,type:"date",title:"日期",setting:Hn,build:Dn,validator:function(e,t){return e.required&&(0,r.xb)(t)?Promise.reject("必填"):Promise.resolve()},logic:[m]});var Gn=n(1877);var Qn=n(898);function Kn(e){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kn(e)}const zn=(0,o.aZ)({name:"xform-bs-divider",inheritAttrs:!1,props:{field:{type:r.Wi,required:!0}},components:function(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Kn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Kn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Kn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},Qn.Z.name,Qn.Z)}),Xn=(0,Z.Z)(zn,[["render",function(e,t,n,r,l,i){var a=(0,o.up)("xform-divider");return(0,o.wg)(),(0,o.j4)(a,{class:"xform-item",title:e.field.title,layout:e.field.attributes.layout,type:e.field.attributes.type,top:e.field.attributes.top,bottom:e.field.attributes.bottom},null,8,["title","layout","type","top","bottom"])}]]);var $n={class:"xform-bs-field-setting-prop xform-divider-types"},Jn=(0,o._)("header",null,"样式：",-1),er=["id","value","checked","onChange"],tr=["for"],nr={class:"xform-bs-field-setting-prop"},rr=(0,o._)("header",null,"间距：",-1),or={class:"xform-bs-divider-range"},lr=(0,o._)("label",null,"上间距：",-1),ir=["value"],ar={class:"xform-bs-divider-range"},ur=(0,o._)("label",null,"下间距：",-1),cr=["value"];var sr;n(1058);function fr(e){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(e)}function dr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==fr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mr=(0,r.hS)().EVENTS;const pr=(0,o.aZ)({name:"xform-bs-divider-setting",props:{field:r.Wi},emits:[mr.UPDATE_FIELD],setup:function(e,t){var n=t.emit;function r(e,t,r){n(mr.UPDATE_FIELD,{prop:e,value:t,scope:r})}return{types:["solid","dashed","double","solid-dashed","dashed-solid"],update:r,updateField:function(e,t,n){var o=e.target;r(t,parseInt(o.value),n)}}},components:(sr={},dr(sr,Qn.Z.name,Qn.Z),dr(sr,We.name,We),sr)}),vr=(0,Z.Z)(pr,[["render",function(e,t,n,r,l,i){var a=(0,o.up)("xform-divider"),u=(0,o.up)("field-setting");return(0,o.wg)(),(0,o.j4)(u,{field:e.field,placeholder:!1,attributes:!1},{default:(0,o.w5)((function(){return[(0,o._)("section",$n,[Jn,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.types,(function(t){return(0,o.wg)(),(0,o.iD)("div",{key:t,class:"form-check"},[(0,o._)("input",{id:"divider-".concat(t),name:"setting-divider-type",type:"radio",value:t,class:"form-check-input",checked:e.field.attributes.type==t,onChange:function(n){return e.update("type",t,"attributes")}},null,40,er),(0,o._)("label",{class:"form-check-label",for:"divider-".concat(t)},[(0,o.Wm)(a,{type:t},null,8,["type"])],8,tr)])})),128))]),(0,o._)("section",nr,[rr,(0,o._)("div",or,[lr,(0,o._)("input",{value:e.field.attributes.top,type:"range",class:"form-range",min:"0",max:"100",step:"5",onInput:t[0]||(t[0]=function(t){return e.updateField(t,"top","attributes")})},null,40,ir)]),(0,o._)("div",ar,[ur,(0,o._)("input",{value:e.field.attributes.bottom,type:"range",class:"form-range",min:"0",max:"100",step:"5",onInput:t[1]||(t[1]=function(t){return e.updateField(t,"bottom","attributes")})},null,40,cr)])])]})),_:1},8,["field"])}]]),br=r.gN.create({icon:Gn,type:"divider",title:"分割线",custom:!0,setting:vr,build:Xn,view:Xn,onCreate:function(e,t,n){n&&(e.attributes.type="solid",e.attributes.top=0,e.attributes.bottom=0)}});n(5827),n(4819),n(3593),n(7314);var yr=n(1198),gr=n(7001),hr={class:"form-check form-check-inline",title:"勾选则支持展开/收起分组"},_r=["id","name","checked"],wr=["for"];function Sr(e){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(e)}var Or=(0,r.hS)().EVENTS;const Pr=(0,o.aZ)({name:"xform-bs-group-setting",props:{field:r.Wi},emits:[Or.UPDATE_FIELD],setup:function(e,t){var n=t.emit;return{updateField:F.bind(null,n)}},components:function(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Sr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Sr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},We.name,We)}),Er=(0,Z.Z)(Pr,[["render",function(e,t,n,r,l,i){var a=(0,o.up)("field-setting");return(0,o.wg)(),(0,o.j4)(a,{field:e.field,placeholder:!1,required:!1},{attributes:(0,o.w5)((function(){return[(0,o._)("div",hr,[(0,o._)("input",{id:"".concat(e.field.name,"-collapsable"),name:"".concat(e.field.name,"-collapsable"),checked:e.field.attributes.collapsable,type:"checkbox",class:"form-check-input",onInput:t[0]||(t[0]=function(t){return e.updateField(t,"collapsable","attributes")})},null,40,_r),(0,o._)("label",{class:"form-check-label",for:"".concat(e.field.name,"-collapsable")},"允许收起",8,wr)])]})),_:1},8,["field"])}]]);function xr(e){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xr(e)}function Wr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==xr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kr=(0,r.hS)(),Tr=kr.SELECTOR,Rr=kr.CLASS,jr=kr.EnumRenderType,Ar=kr.PROPS,Cr=kr.EnumValidateMode,Vr=kr.EnumValidityState,Dr="xform-bs-group-list",Nr=".".concat(Dr);function Ir(){var e=(0,p.iH)(!1);function t(){e.value=!e.value}return{collasped:e,renderHeader:function(n){if(null==n.title)return null;var r=!0===n.attributes.collapsable?(0,o.Wm)("button",{type:"button",title:e.value?"展开":"收起",class:"btn btn-link btn-text xform-bs-group-toggle",onClick:t},[e.value?"展开":"收起"]):null;return(0,o.Wm)("h6",{class:"card-header"},[(0,o.Wm)("span",null,[n.title]),r])}}}var Ur=(0,o.aZ)({name:"xform-bs-group",props:{field:{type:r.Wi,required:!0},behavior:{type:String,default:null},disabled:{type:Boolean,default:!1}},setup:function(e){var t=Ir(),n=t.collasped,l=t.renderHeader,i=(0,r.j9)();return function(){var t,r=e.field.value,a=e.field.fields,u=e.behavior==jr.DESIGNER||i.type==jr.DESIGNER,c=e.field.validation.message,s=e.disabled,f=Wr({"xform-item":!0,"xform-bs-group":!0,"xform-is-collasped":n.value},Rr.IS_ERROR,e.field.validation.valid==Vr.ERROR),d=u&&0==a.length?(0,o.Wm)("p",{class:[Rr.IS_EMPTY_TIP,"xform-bs-empty-tip"]},[(0,o.Uk)("请将左侧控件拖动到此处")]):null,m=Wr({class:(t={"card-body":!0},Wr(t,Dr,!0),Wr(t,Rr.DROPPABLE,u),Wr(t,Rr.SCOPE,u),t)},"."+Ar.FIELD,u?e.field:void 0),p=a.map((function(e){return i.renderField(u?e:r[e.name],{parentProps:{disabled:s}})}));return(0,o.Wm)("div",{class:f},[(0,o.Wm)("div",{class:"card"},[l(e.field),(0,o.Wm)("div",m,[d,p])]),c&&(0,o.Wm)("p",{class:"xform-item-message"},[c])])}}}),Lr=(0,o.aZ)({name:"xform-bs-group-view",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){var t=(0,r.j9)().renderField,n=Ir(),l=n.collasped,i=n.renderHeader;return function(){var n=e.field.value,r=e.field.fields,a={"xform-item":!0,"xform-bs-group":!0,"xform-is-collasped":l.value};return(0,o.Wm)("div",{class:a},[(0,o.Wm)("div",{class:"card"},[i(e.field),(0,o.Wm)("div",{class:["card-body",Dr]},[r.map((function(r){return t(n[r.name],{parentProps:{disabled:e.disabled}})}))])])])}}});const Fr=r.gN.create({icon:gr,type:"group",title:"分组",buttons:[yr.n,r.gN.BUTTON_COPY,r.gN.BUTTON_REMOVE],custom:!0,preview:Ur,setting:Er,build:Ur,view:Lr,onDragOver:function(e){var t=e.currentTarget;if(t.matches(Nr)){e.stopPropagation(),e.preventDefault();var n=e.context,r=n.directionY,o=n.moveMarkEl,l=e.dragElement.contains(t);o(r,l?e.dragElement:e.target,l?e.dragElement.parentElement.closest(Tr.DROPPABLE):t)}},onDrop:function(e){e.currentTarget.matches(Tr.SCOPE)&&e.stopPropagation()},onValueInit:function(e,t){var n=null==t||"object"!=xr(t)?{}:t;return e.fields.reduce((function(t,r){var o=r.clone(!0);return o.setValue(n[r.name]),o.setParent(e),t[r.name]=o,t}),{})},onValueSubmit:function(e){var t=e.value;if(null!=t&&"object"==xr(t)&&0!=Object.keys(t).length)return e.fields.map((function(e){return e.name})).reduce((function(e,n){var r=Reflect.get(t,n,t);if(null!=r){var o=r.conf,l="function"==typeof(null==o?void 0:o.onValueSubmit)?o.onValueSubmit(r):r.value;Reflect.set(e,n,l,e)}return e}),{})},validator:function(e,t,n){var r=e.value,o=Object.keys(r).map((function(e){var t=r[e];return n.mode==Cr.RECURSIVE?t.validate({mode:Cr.RECURSIVE}):t.invalid?Promise.reject():Promise.resolve()}));return Promise.allSettled(o).then((function(e){return e.some((function(e){return"rejected"===e.status}))?Promise.reject("请补全必填内容"):Promise.resolve()}))}});n(6541),n(2479),n(9600);var Mr=n(3688);function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function qr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Zr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Zr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yr=(0,r.hS)(),Hr=Yr.SELECTOR,Br=Yr.CLASS,Gr=Yr.PROPS,Qr=Yr.EnumValidateMode,Kr=Yr.EnumRenderType;const zr=r.gN.create({type:"tabs.pane",title:"标签面板",custom:!0,build:(0,o.aZ)({name:"xform-bs-tabs-pane",props:{field:{type:r.Wi,required:!0},behavior:{type:String,default:null},disabled:{type:Boolean,default:!1}},setup:function(e){return function(){var t,n,l=(0,r.j9)(),i=e.field.fields,a=null!==(t=e.field.value)&&void 0!==t?t:{},u=e.behavior==Kr.DESIGNER||l.type==Kr.DESIGNER,c=u&&0==i.length?(0,o.Wm)("p",{class:[Br.IS_EMPTY_TIP,"xform-bs-empty-tip"]},[(0,o.Uk)("请将左侧控件拖动到此处")]):i.map((function(t){return l.renderField(u?t:a[t.name],{parentProps:{disabled:e.disabled}})})),s=qr({class:(n={"tab-pane":!0},qr(n,Br.DROPPABLE,u),qr(n,Br.SCOPE,u),n)},"."+Gr.FIELD,u?e.field:void 0);return(0,o.Wm)("div",s,[c])}}}),view:(0,o.aZ)({name:"xform-bs-tabs-pane-view",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){var t,n=(0,r.j9)(),l=null!==(t=e.field.value)&&void 0!==t?t:{};return function(){var t=e.field.fields;return(0,o.Wm)("div",{class:"tab-pane"},[t.map((function(t){return n.renderField(l[t.name],{parentProps:{disabled:e.disabled}})}))])}}}),onDragOver:function(e){var t=e.currentTarget;e.stopPropagation(),e.preventDefault();var n=e.context,r=n.directionY,o=n.moveMarkEl,l=e.dragElement.contains(t);o(r,l?e.dragElement:e.target,l?e.dragElement.parentElement.closest(Hr.DROPPABLE):t)},onDrop:function(e){e.stopPropagation()},onValueInit:function(e,t){var n=null!=t?t:{};return e.fields.reduce((function(t,r){var o=r.name,l=r.clone(!0);return l.setValue(n[o]),l.setParent(e),t[o]=l,t}),{})},onValueSubmit:function(e){var t,n=null!==(t=e.value)&&void 0!==t?t:{};return e.fields.map((function(e){return e.name})).reduce((function(e,t){var r,o=n[t],l=null===(r=o.conf)||void 0===r?void 0:r.onValueSubmit;return e[t]="function"==typeof l?l(o):o.value,e}),{})},validator:function(e,t,n){var r=Object.values(null!=t?t:{}).map((function(e){return n.mode==Qr.RECURSIVE?e.validate({mode:Qr.RECURSIVE}):e.invalid?Promise.reject():Promise.resolve()}));return Promise.allSettled(r).then((function(t){return t.some((function(e){return"rejected"===e.status}))?Promise.reject("请补全标签页[".concat(e.title,"]必填内容")):Promise.resolve()}))}});function Xr(e){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xr(e)}function $r(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Xr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jr=(0,r.hS)(),eo=Jr.CLASS,to=Jr.EnumValidityState,no=Jr.EVENTS,ro=Jr.EnumRenderType,oo=(0,o.aZ)({name:"xform-bs-tabs-setting",props:{field:{type:r.Wi,required:!0}},emits:[no.UPDATE_FIELD],setup:function(e){var t=(0,V.Et)("hideTitle","attributes");function n(){var t=e.field,n=new r.Wi(zr);n.title="标签".concat(e.field.fields.length+1),t.push(n)}function i(t){var n=e.field;n.fields.length<=1||n.remove(t)}function a(e,t){e.title=t.target.value}function u(t){t<=0||e.field.fields[t].move(t-1)}function c(t){t>=e.field.fields.length-1||e.field.fields[t].move(t+1)}return function(){var r=e.field,s=r.fields.map((function(e,t){var n=r.fields.length;return(0,o.Wm)("div",{class:"xform-bs-setting-option"},[(0,o.Wm)("input",{type:"text",class:"form-control form-control-sm",placeholder:"请输入标签名称",value:e.title,onInput:a.bind(null,e)},null),(0,o.Wm)("button",{type:"button",class:"btn btn-link btn-text",onClick:u.bind(null,t),disabled:0==t},[(0,o.Uk)("上移")]),(0,o.Wm)("button",{type:"button",class:"btn btn-link btn-text",onClick:c.bind(null,t),disabled:t==n-1},[(0,o.Uk)("下移")]),(0,o.Wm)("button",{type:"button",class:"btn btn-link btn-text text-danger",onClick:i.bind(null,e),disabled:n<=1},[(0,o.Uk)("删除")])])})),f={default:function(){return(0,o.Wm)("div",{class:"xform-bs-field-setting-prop"},[(0,o.Wm)("header",null,[(0,o.Uk)("标签：")]),s,(0,o.Wm)("button",{type:"button",class:"btn btn-link btn-sm btn-text p-0",onClick:n},[(0,o.Uk)("添加标签")])])},attributes:function(){return(0,o.Wm)("div",{class:"form-check form-check-inline"},[(0,o.wy)((0,o.Wm)("input",{type:"checkbox",class:"form-check-input",id:"".concat(r.name,"-hide-title"),name:"".concat(r.name,"-hide-title"),"onUpdate:modelValue":function(e){return t.value=e}},null),[[l.e8,t.value]]),(0,o.Wm)("label",{class:"form-check-label",for:"".concat(r.name,"-hide-title"),title:"勾选则不显示标题"},[(0,o.Uk)("隐藏标题")])])}};return(0,o.Wm)((0,o.up)("field-setting"),{field:r,placeholder:!1,required:!1},f)}},components:$r({},We.name,We)});function lo(e){return e.validation.valid!==to.ERROR?null:(0,o.Wm)("p",{class:"xform-item-message"},[e.validation.message])}var io=(0,o.aZ)({name:"xform-bs-tabs",props:{field:{type:r.Wi,required:!0},behavior:{type:String,default:null},disabled:{type:Boolean,default:!1}},setup:function(e){var t=(0,p.iH)(e.field.fields[0].name),n=(0,o.FN)(),l=(0,r.j9)();function i(e,n){n.preventDefault(),t.value=e.name}function a(e){var t=(0,r.am)(n.refs,"scroll"),o=(0,r.am)(n.refs,"list");if(!(o.offsetWidth<=t.offsetWidth)){e.preventDefault();var l=function(e,t,n){var o=(0,r.fN)(e).pixelY+(t.__offset__||0);return o<0?0:o>t.offsetWidth-n.offsetWidth?t.offsetWidth-n.offsetWidth:o}(e,o,t);o.__offset__=l,o.style.transform="translateX(".concat(-l,"px)")}}var u=(0,o.YP)(e.field.fields,(function(e){e.every((function(e){return e.name!=t.value}))&&(t.value=e[e.length-1].name)}));return(0,o.Jd)(u),function(){var n,u=e.field,c=null!==(n=u.value)&&void 0!==n?n:{},s=!0===u.attributes.hideTitle?null:(0,o.Wm)("strong",{class:"nav-tabs-title"},[u.title]),f=e.disabled,d=e.behavior==ro.DESIGNER||l.type==ro.DESIGNER,m=u.fields.map((function(e){var n={"nav-link":!0,active:t.value==e.name};return(0,o.Wm)("a",{class:n,href:"javascript:;",onClick:i.bind(null,e)},[e.title])})),p=u.fields.map((function(e){return l.renderField(d?e:c[e.name],{parentProps:{disabled:f},renderContent:function(n,l){return l.class=(0,r.C_)(l.class,{active:t.value==e.name}),(0,o.h)(n,l)},renderPreivew:function(e,t,n,r){return r()}})})),v=$r({"xform-item":!0,"xform-bs-tabs":!0},eo.IS_ERROR,u.invalid);return(0,o.Wm)("div",{class:v},[(0,o.Wm)("div",{class:"nav nav-tabs"},[s,(0,o.Wm)("div",{class:"xform-bs-tabs-scroll",onWheel:a,ref:"scroll"},[(0,o.Wm)("div",{class:"xform-bs-tab-list",ref:"list"},[m])])]),(0,o.Wm)("div",{class:"tab-content"},[p]),lo(u)])}}});const ao=r.gN.create({type:"tabs",title:"标签页",icon:Mr,custom:!0,setting:oo,build:io,view:io,dependencies:[zr],onCreate:function(e,t,n){if(n){var o=new r.Wi(zr);o.title="标签".concat(e.fields.length+1),e.push(o)}},onValueInit:function(e,t){var n=null!=t?t:{};return e.fields.reduce((function(t,r){var o=r.name,l=r.clone(!0);return l.setValue(n[o]),l.setParent(e),t[o]=l,t}),{})},onValueSubmit:function(e){var t,n=null!==(t=e.value)&&void 0!==t?t:{};return e.fields.map((function(e){return e.name})).reduce((function(e,t){var r,o=n[t],l=null===(r=o.conf)||void 0===r?void 0:r.onValueSubmit;return e[t]="function"==typeof l?l(o):o.value,e}),{})},validator:function(e,t,n){var r=Object.values(null!=t?t:{}).map((function(e){return e.validate({mode:n.mode})}));return Promise.allSettled(r).then((function(e){var t=e.map((function(e){return"rejected"==e.status?e.reason:null})).filter((function(e){return e}));return t.length>0?Promise.reject(t.join("\n")):Promise.resolve()}))}});n(2222);var uo=150,co="xform-bs-datatable-columns";function so(e,t){var n=(0,p.iH)(!1),l=(0,o.FN)(),i=(0,r.I_)(),a=(0,p.iH)(null),u=(0,r.j9)(),c=null;function s(e){c=e,m()}function f(){c=null,m()}function d(e){n.value=e}function m(){var t=function(e,t){return null==t?{}:e.reduce((function(e,n){var r,o=t[n.name],l=null===(r=o.conf)||void 0===r?void 0:r.onValueSubmit;return e[n.name]="function"==typeof l?l(o):o.value,e}),{})}(e.field.fields,c),r=e.field.fields.map((function(e){return e.clone(!0)}));a.value=i.value.genSchema({fields:r},t),n.value=!0}function v(){n.value=!1}function b(){var n=l.refs.form;if(null==n)return v();n.validate().then((function(n){var r,o,l;n.valid&&(null==c?(r=n.model,o=e.field.fields.reduce((function(t,n){var o=n.clone(!0);return o.setValue(r[n.name]),o.setParent(e.field),t[n.name]=o,t}),{}),(l=t.value).push(o),t.value=l):function(t){e.field.fields.forEach((function(e){var n=e.name;c[n].value=t[n]})),c=null}(n.model),v())}))}function y(e){var n=t.value,r=n.indexOf(e);r>=0&&(n.splice(r,1),t.value=n)}function g(e,t,n){return e>0?null:t?(0,o.Wm)("div",{class:"xform-bs-datatable-tip",style:"width: ".concat(n,"px")},[(0,o.Uk)("暂无数据")]):(0,o.Wm)("div",{class:"xform-bs-datatable-tip",style:"width: ".concat(n,"px")},[(0,o.Wm)("span",null,[(0,o.Uk)("点击")]),(0,o.Wm)("button",{type:"button",class:"btn btn-link btn-text btn-sm shadow-none",onClick:f},[(0,o.Uk)("+ 添加")]),(0,o.Wm)("span",null,[(0,o.Uk)("按钮插入数据")])])}return(0,o.Jd)((function(){a.value=null,c=null})),function(){var r,l=e.field.fields.filter((function(e){return!0!==e.hidden}));if(0==l.length)return(0,o.Wm)("div",{class:"xform-is-unknown"},[(0,o.Uk)("请放入至少一个字段")]);var m=e.disabled||e.field.disabled,p=null!==(r=e.field.attributes.colWidths)&&void 0!==r?r:{},v=l.reduce((function(e,t){var n,r=null!==(n=p[t.name])&&void 0!==n?n:uo;return e.total+=r,e.cols.push((0,o.Wm)("col",{style:{width:"".concat(r,"px")}},null)),e}),{cols:[],total:60}),h=v.cols,_=v.total,w=t.value.map((function(e,t){var n=l.map((function(t){var n=e[t.name],r=u.renderField(n,{parentProps:{disabled:m},renderItem:function(e,t){return t.custom=!0,(0,o.h)(e,t,(function(){var e;return null!==(e=n.value)&&void 0!==e?e:i.value.viewerPlaceholder}))}});return(0,o.Wm)("td",null,[r])})),r=m?null:(0,o.Wm)("td",{class:"xform-bs-datatable-operate"},[(0,o.Wm)("button",{type:"button",class:"btn btn-link btn-text shadow-none",onClick:s.bind(null,e)},[(0,o.Uk)("编辑")]),(0,o.Wm)("button",{type:"button",class:"btn btn-link btn-text text-danger shadow-none",onClick:y.bind(null,e)},[(0,o.Uk)("删除")])]);return(0,o.Wm)("tr",{class:"xform-bs-datatable-row"},[(0,o.Wm)("td",{class:"xform-bs-datatable-index"},[t+1]),n,r])})),S=_+(m?0:100),O=m?"#":(0,o.Wm)("button",{type:"button",class:"btn btn-sm btn-link btn-text shadow-none",onClick:f},[(0,o.Uk)("添加")]),P=(0,o.Wm)("table",{class:"table table-hover",style:"width: ".concat(S,"px")},[(0,o.Wm)("colgroup",null,[(0,o.Wm)("col",{style:"width: ".concat(60,"px")},null),h,m?null:(0,o.Wm)("col",{style:"width: ".concat(100,"px")},null)]),(0,o.Wm)("thead",null,[(0,o.Wm)("th",{class:"xform-bs-datatable-index"},[O]),l.map((function(e){var t={"xform-bs-datatable-cell":!0,"xform-is-required":!m&&!e.disabled&&e.required};return(0,o.Wm)("th",{class:t},[(0,o.Wm)("span",null,[e.title])])})),m?null:(0,o.Wm)("th",{class:"xform-bs-datatable-operate"},[(0,o.Uk)("操作")])]),(0,o.Wm)("tbody",null,[w])]);return(0,o.Wm)("div",{class:"xform-bs-datatable","data-layout":"modal"},[(0,o.Wm)("div",{class:"table-responsive"},[P,g(w.length,m,S)]),(0,o.Wm)((0,o.up)("modal"),(0,o.dG)({title:"".concat(null==c?"添加":"编辑","数据"),class:"xform-bs-datatable-modal-layout",onConfirm:b},{visible:n.value,"onUpdate:visible":d}),{default:function(){return[(0,o.Wm)((0,o.up)("xform-builder"),{schema:a.value,ref:"form",onSubmit:b},{default:function(){return[(0,o.Wm)("button",{class:"xform-is-hidden",type:"submit"},null)]}})]}})])}}var fo={class:"form-check form-check-inline"},mo=["id","name"],po=["for"],vo={class:"form-check form-check-inline"},bo=["id","name"],yo=["for"],go={class:"xform-bs-field-setting-prop"},ho=(0,o._)("header",null,"表单布局：",-1),_o={class:"btn-group",role:"group"},wo={class:"xform-bs-field-setting-prop"},So=(0,o._)("header",null,"列宽：",-1),Oo=["placeholder","value","onInput"],Po={key:0,class:"text-secondary"};function Eo(e){return Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eo(e)}var xo=(0,r.hS)(),Wo=xo.EVENTS,ko=xo.LabelPosition,To="attributes";const Ro=(0,o.aZ)({name:"xform-bs-datatable-setting",props:{field:{type:r.Wi,required:!0}},emits:[Wo.UPDATE_FIELD],setup:function(e,t){var n=t.emit;return{DEF_COLUMN_WIDTH:uo,updateColWidth:function(t,r){var o=t.target,l=parseFloat(o.value),i=e.field.attributes.colWidths;i[r]=isNaN(l)?null:l,n(Wo.UPDATE_FIELD,{prop:"colWidths",value:i,scope:To})},getColumnWidth:function(t){return e.field.attributes.colWidths[t]},hideTitle:(0,V.Et)("hideTitle",To),layout:(0,V.Et)("layout",To),labelPosition:(0,o.Fl)({get:function(){var t;return(null===(t=e.field.attributes)||void 0===t?void 0:t.labelPosition)==ko.TOP},set:function(e){var t=!0===e?ko.TOP:void 0;n(Wo.UPDATE_FIELD,{prop:"labelPosition",scope:To,value:t})}})}},components:function(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Eo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Eo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Eo(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},We.name,We)}),jo={classes:{columnBg:"D2xFwxXoIfj0ESDBQYqx",titleProps:"tx1MA84ThNWpBbZ1ULgu"}},Ao=(0,Z.Z)(Ro,[["render",function(e,t,n,r,i,a){var u=(0,o.up)("field-setting");return(0,o.wg)(),(0,o.j4)(u,{field:e.field,placeholder:!1},{title:(0,o.w5)((function(){return[(0,o._)("div",{class:(0,B.C_)(e.classes.titleProps)},[(0,o._)("div",fo,[(0,o.wy)((0,o._)("input",{id:"".concat(e.field.name,"-hide-title"),name:"".concat(e.field.name,"-hide-title"),type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.hideTitle=t})},null,8,mo),[[l.e8,e.hideTitle]]),(0,o._)("label",{class:"form-check-label",for:"".concat(e.field.name,"-hide-title"),title:"勾选则不显示标题"},"隐藏标题",8,po)]),(0,o._)("div",vo,[(0,o.wy)((0,o._)("input",{id:"".concat(e.field.name,"-label-position"),name:"".concat(e.field.name,"-label-position"),type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.labelPosition=t})},null,8,bo),[[l.e8,e.labelPosition]]),(0,o._)("label",{class:"form-check-label",for:"".concat(e.field.name,"-label-position"),title:"勾选则标题位于顶部"},"顶部对齐",8,yo)])],2)]})),default:(0,o.w5)((function(){return[(0,o._)("section",go,[ho,(0,o._)("div",_o,[(0,o._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"modal"==e.layout}]),onClick:t[2]||(t[2]=function(t){return e.layout="modal"}),title:"选中则表单在弹出模态框中编辑"},"窗口",2),(0,o._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"inline"==e.layout}]),onClick:t[3]||(t[3]=function(t){return e.layout="inline"}),title:"选中则表单在表格中直接编辑"},"行内",2)])]),(0,o._)("section",wo,[So,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.field.fields,(function(t){var n;return(0,o.wg)(),(0,o.iD)("div",{class:"xform-bs-datatable-column",key:t.uid},[(0,o._)("div",{class:(0,B.C_)(e.classes.columnBg),style:(0,B.j5)({width:"".concat(null!==(n=e.getColumnWidth(t.name))&&void 0!==n?n:e.DEF_COLUMN_WIDTH,"px")})},null,6),(0,o._)("label",null,(0,B.zw)(t.title),1),(0,o._)("input",{type:"number",min:"0",placeholder:"默认宽度".concat(e.DEF_COLUMN_WIDTH),class:"form-control form-control-sm",value:e.getColumnWidth(t.name),onInput:function(n){return e.updateColWidth(n,t.name)}},null,40,Oo)])})),128)),0==e.field.fields.length?((0,o.wg)(),(0,o.iD)("div",Po,"请至少放入一个字段")):(0,o.kq)("",!0)])]})),_:1},8,["field"])}],["__cssModules",jo]]);var Co=n(9288);function Vo(e){return Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vo(e)}function Do(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Vo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Vo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Vo(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var No=(0,r.hS)(),Io=No.CLASS,Uo=No.PROPS,Lo=No.EVENTS,Fo=No.EnumValidateMode,Mo=(0,o.aZ)({name:"xform-bs-datatable-preview",props:{field:{type:r.Wi,required:!0}},setup:function(e){var t=(0,r.j9)();return function(){var n,r=e.field,l=r.fields,i=null!==(n=r.attributes.colWidths)&&void 0!==n?n:{},a=0==l.length?(0,o.Wm)("p",{class:"".concat(Io.IS_EMPTY_TIP," xform-bs-empty-tip")},[(0,o.Uk)("请将左侧控件拖动到此处")]):l.map((function(e){return t.renderField(e,{renderItem:function(){var t,n={"xform-bs-datatable-cell":!0,"xform-is-required":e.required},r={width:"".concat(null!==(t=i[e.name])&&void 0!==t?t:uo,"px")};return(0,o.Wm)("div",{class:n,style:r},[(0,o.Wm)("span",null,[e.title])])}})})),u=Do({class:"".concat(co," ").concat(Io.DROPPABLE," ").concat(Io.SCOPE)},"."+Uo.FIELD,e.field);return(0,o.Wm)("div",{class:"xform-bs-datatable ".concat(Io.IS_SCROLL," ").concat(Io.IS_HORIZONTAL_SCROLL)},[(0,o.Wm)("div",u,[a])])}}}),Zo=(0,o.aZ)({name:"xform-bs-datatable",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},emits:[Lo.UPDATE_VALUE],setup:function(e){var t=(0,V.Hg)(),n=so(e,t),l=function(e,t){var n=(0,r.j9)();function l(){var n=e.field.fields.reduce((function(t,n){var r=n.clone(!0);return r.setParent(e.field),t[n.name]=r,t}),{}),r=t.value;r.push(n),t.value=r}function i(e){var n=t.value,r=n.indexOf(e);r>=0&&(n.splice(r,1),t.value=n)}function a(e,t,n){return e>0?null:t?(0,o.Wm)("div",{class:"xform-bs-datatable-tip",style:"width: ".concat(n,"px")},[(0,o.Uk)("暂无数据")]):(0,o.Wm)("div",{class:"xform-bs-datatable-tip",style:"width: ".concat(n,"px")},[(0,o.Wm)("span",null,[(0,o.Uk)("点击")]),(0,o.Wm)("button",{type:"button",class:"btn btn-link btn-text btn-sm shadow-none",onClick:l},[(0,o.Uk)("+ 添加")]),(0,o.Wm)("span",null,[(0,o.Uk)("按钮插入数据")])])}return function(){var r,u=e.field.fields.filter((function(e){return!0!==e.hidden}));if(0==u.length)return(0,o.Wm)("div",{class:"xform-is-unknown"},[(0,o.Uk)("请放入至少一个字段")]);var c=e.disabled||e.field.disabled,s=null!==(r=e.field.attributes.colWidths)&&void 0!==r?r:{},f=u.reduce((function(e,t){var n,r=null!==(n=s[t.name])&&void 0!==n?n:uo;return e.total+=r,e.cols.push((0,o.Wm)("col",{style:{width:"".concat(r,"px")}},null)),e}),{cols:[],total:60}),d=f.cols,m=f.total,p=t.value.map((function(e,t){var r=u.map((function(t){var r=n.renderField(e[t.name],{parentProps:{disabled:c},renderItem:function(e,t,n){return t.label=!1,(0,o.h)(e,t,n)}});return(0,o.Wm)("td",null,[r])}));return(0,o.Wm)("tr",{class:"xform-bs-datatable-row"},[(0,o.Wm)("td",{class:"xform-bs-datatable-index"},[(0,o.Wm)("strong",null,[t+1]),c?null:(0,o.Wm)("button",{type:"button",class:"btn btn-link btn-text text-danger",onClick:i.bind(null,e)},[(0,o.Uk)("删除")])]),r])})),v=c?"#":(0,o.Wm)("button",{type:"button",class:"btn btn-link btn-text btn-sm shadow-none",onClick:l},[(0,o.Uk)("添加")]);return(0,o.Wm)("div",{class:"xform-bs-datatable","data-layout":"inline"},[(0,o.Wm)("div",{class:"table-responsive"},[(0,o.Wm)("table",{class:"table table-hover",style:{width:m+"px"}},[(0,o.Wm)("colgroup",null,[(0,o.Wm)("col",{style:"width: ".concat(60,"px")},null),d]),(0,o.Wm)("thead",null,[(0,o.Wm)("th",{class:"xform-bs-datatable-index"},[v]),u.map((function(e){var t={"xform-bs-datatable-cell":!0,"xform-is-required":!c&&!e.disabled&&e.required};return(0,o.Wm)("th",{class:t},[(0,o.Wm)("span",null,[e.title])])}))]),(0,o.Wm)("tbody",null,[p])]),a(p.length,c,m)])])}}(e,t);return function(){return"inline"==e.field.attributes.layout?l():n()}},components:Do({},Se.name,Se)}),qo=(0,o.aZ)({name:"xform-bs-datatable-view",props:{field:{type:r.Wi,required:!0},disabled:{type:Boolean,default:!1}},setup:function(e){var t=(0,V.Hg)(),n=(0,r.j9)(),l=(0,r.I_)();return function(){var r,i=e.field.fields;if(!Array.isArray(t.value)||0==t.value.length||0==i.length)return(0,o.Wm)("span",{class:"xform-viewer-value"},[l.value.viewerPlaceholder]);var a=null!==(r=e.field.attributes.colWidths)&&void 0!==r?r:{},u=i.reduce((function(e,t){var n,r=null!==(n=a[t.name])&&void 0!==n?n:uo;return e.total+=r,e.cols.push((0,o.Wm)("col",{style:"width: ".concat(r,"px")},null)),e}),{cols:[],total:60}),c=u.cols,s=u.total,f=t.value.map((function(t,r){var l=i.map((function(r){return(0,o.Wm)("td",null,[n.renderField(t[r.name],{parentProps:{disabled:e.disabled},renderItem:function(e,t,n){return n()}})])})),a=(0,o.Wm)("td",{class:"xform-bs-datatable-index"},[(0,o.Wm)("strong",null,[r+1])]);return(0,o.Wm)("tr",null,[a,l])}));return(0,o.Wm)("div",{class:"xform-bs-datatable xform-bs-datatable-view"},[(0,o.Wm)("div",{class:"table-responsive"},[(0,o.Wm)("table",{class:"table table-hover",style:{width:s+"px"}},[(0,o.Wm)("colgroup",null,[(0,o.Wm)("col",{style:"width: ".concat(60,"px")},null),c]),(0,o.Wm)("thead",null,[(0,o.Wm)("th",{class:"xform-bs-datatable-index"},[(0,o.Uk)("#")]),i.map((function(t){var n={"xform-bs-datatable-cell":!0,"xform-is-required":!e.disabled&&!t.disabled&&t.required};return(0,o.Wm)("th",{class:n},[(0,o.Wm)("span",null,[t.title])])}))]),(0,o.Wm)("tbody",null,[f])])])])}}});const Yo=r.gN.create({type:"datatable",title:"数据表格",icon:Co,buttons:[yr.n,r.gN.BUTTON_COPY,r.gN.BUTTON_REMOVE],accept:["text","textarea","number","select","radio","checkbox","date"],setting:Ao,preview:Mo,build:Zo,view:qo,onDragOver:function(e){var t=e.currentTarget;if(t.matches("."+co)){e.stopPropagation(),e.preventDefault();var n=e.context,r=n.directionX,o=n.moveMarkEl,l=n.getRootScopeEl,i=e.dragElement.contains(t);o(r,i?e.dragElement:e.target,i?l():t)}},onDrop:function(e){e.stopPropagation()},onCreate:function(e,t,n){n&&(e.attributes.colWidths={},e.attributes.layout="modal")},onSubmit:function(e){var t,n,r=null!==(t=null===(n=e.attributes)||void 0===n?void 0:n.colWidths)&&void 0!==t?t:{},o=e.fields.map((function(e){return e.name}));for(var l in r)o.indexOf(l)<0&&delete r[l];return e},onValueInit:function(e,t){if(!Array.isArray(t))return[];var n=e.fields;return t.map((function(t){return n.reduce((function(n,r){var o=r.clone(!0);return o.setValue(t[r.name]),o.setParent(e),n[r.name]=o,n}),{})}))},onValueSubmit:function(e){if(Array.isArray(e.value)){var t=e.fields;return e.value.map((function(e){return t.map((function(e){return e.name})).reduce((function(t,n){var r,o=e[n],l=null===(r=o.conf)||void 0===r?void 0:r.onValueSubmit;return t[o.name]="function"==typeof l?l(o):o.value,t}),{})}))}},validator:function(e,t,n){if(e.required&&(0,r.xb)(t))return Promise.reject("必填");var o=t.reduce((function(e,t){return e.concat(Object.values(t))}),[]).map((function(e){return n.mode==Fo.RECURSIVE?e.validate({mode:Fo.RECURSIVE}):e.invalid?Promise.reject():Promise.resolve()}));return Promise.allSettled(o).then((function(e){return e.some((function(e){return"rejected"===e.status}))?Promise.reject("请补全必填内容"):Promise.resolve()}))},onValidate:function(e){return(0,r.xb)(e.title)?Promise.reject("标题为空"):0==e.fields.length?Promise.reject("至少需要一个字段"):Promise.resolve()}});var Ho=[jn,Yo,Bn,br,Fr,ot,rn,Tt,ao,De,Be];const Bo={use:function(){(0,r.sZ)(Ho)},remove:function(){Ho.forEach(r.QZ)}};var Go={class:"xform-setting"},Qo=(0,o._)("header",null,"标题后缀：",-1),Ko=["value"],zo={class:"xform-setting"},Xo=(0,o._)("header",null,"空值显示为：",-1),$o=["value"],Jo={class:"xform-setting"},el=(0,o._)("header",null,"标题位置：",-1),tl={class:"btn-group",role:"group"};var nl=(0,r.hS)(),rl=nl.EVENTS,ol=nl.LabelPosition,ll=Object.values(ol);const il=(0,o.aZ)({name:"form-setting",props:{schema:{type:Object,required:!0}},emits:[rl.UPDATE_PROP],setup:function(e,t){var n=t.emit;return{updateProp:function(e,t){n(rl.UPDATE_PROP,{prop:e,value:t})},labelPosition:(0,o.Fl)((function(){var t=e.schema.labelPosition;return ll.includes(t)?t:"left"}))}}}),al=(0,Z.Z)(il,[["render",function(e,t,n,r,l,i){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("section",Go,[Qo,(0,o._)("input",{value:e.schema.labelSuffix,type:"text",class:"form-control form-control-sm",placeholder:"请输入标题后缀...",onInput:t[0]||(t[0]=function(t){return e.updateProp("labelSuffix",t.target.value)})},null,40,Ko)]),(0,o._)("section",zo,[Xo,(0,o._)("input",{value:e.schema.viewerPlaceholder,type:"text",class:"form-control form-control-sm",placeholder:"查看表单时如果值为空，则显示输入值",onInput:t[1]||(t[1]=function(t){return e.updateProp("viewerPlaceholder",t.target.value)})},null,40,$o)]),(0,o._)("section",Jo,[el,(0,o._)("div",tl,[(0,o._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"left"==e.labelPosition}]),onClick:t[2]||(t[2]=function(t){return e.updateProp("labelPosition","left")})},"左对齐",2),(0,o._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"top"==e.labelPosition}]),onClick:t[3]||(t[3]=function(t){return e.updateProp("labelPosition","top")})},"顶部对齐",2),(0,o._)("button",{type:"button",class:(0,B.C_)(["btn btn-sm btn-primary",{active:"right"==e.labelPosition}]),onClick:t[4]||(t[4]=function(t){return e.updateProp("labelPosition","right")})},"右对齐",2)])])],64)}]]);const ul={name:"bootstrap",version:"0.8.1",install:function(){return(0,r.QL)("setting_form",al),Bo.use(),j.use(),function(){(0,r.ac)("setting_form"),Bo.remove(),j.remove()}}}},3009:(e,t,n)=>{var r=n(7854),o=n(7293),l=n(1702),i=n(1340),a=n(3111).trim,u=n(1361),c=r.parseInt,s=r.Symbol,f=s&&s.iterator,d=/^[+-]?0x/i,m=l(d.exec),p=8!==c(u+"08")||22!==c(u+"0x16")||f&&!o((function(){c(Object(f))}));e.exports=p?function(e,t){var n=a(i(e));return c(n,t>>>0||(m(d,n)?16:10))}:c},1058:(e,t,n)=>{var r=n(2109),o=n(3009);r({global:!0,forced:parseInt!=o},{parseInt:o})}}]);